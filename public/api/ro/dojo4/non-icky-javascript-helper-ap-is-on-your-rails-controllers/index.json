{
  "data": {
    "dojo4/non-icky-javascript-helper-ap-is-on-your-rails-controllers": {
      "published_at": "2013-06-10 00:00:00 UTC",
      "title": "Non-Icky Javascript Helper APIs on your Rails' Controllers",
      "author": "ara@dojo4.com",
      "body": "<div class=\"ro markdown\">\n  <p>ref: <a href=\"https://gist.github.com/ahoward/5752290\" target=\"_blank\">https://gist.github.com/ahoward/5752290</a></p>\n\n<p>web apps nearly always end up needing a plethora of little javascript helper methods: you know, auto-complete forms, populating defaults, validations, etc.  these aren’t API calls properly, just little tidbits of functionality needed to make the views work.</p>\n\n<p>there is always a question of which controller to hang these methods off of.  do you make a global helper controller for all this stuff?  do you hang them off the controller in question?  how to do share the backend of javascript helper methods across controllers?</p>\n\n<h2>step one</h2>\n\n<p>include the RPC module in your ApplicationController</p>\n\n<div class=\"language-ruby highlighter-rouge\"><code class='code' style='white-space:pre;'><div class='code-line code-line-1'>\n</div><div class='code-line code-line-2'>&nbsp;&nbsp;<span style=\"color: #cf222e\">class</span>&nbsp;<span style=\"color: #953800\">ApplicationController</span>&nbsp;<span style=\"color: #0550ae\">&lt;</span>&nbsp;<span style=\"color: #0550ae\">::</span><span style=\"color: #953800\">ActionController</span><span style=\"color: #0550ae\">::</span><span style=\"color: #953800\">Base</span>\n</div><div class='code-line code-line-3'>&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #cf222e\">include</span>&nbsp;<span style=\"color: #953800\">RPC</span>\n</div><div class='code-line code-line-4'>&nbsp;&nbsp;<span style=\"color: #cf222e\">end</span>\n</div><div class='code-line code-line-5'>\n</div></code></div>\n\n<h2>step two</h2>\n\n<p>in controllers, declare rpc helper methods</p>\n\n<div class=\"language-ruby highlighter-rouge\"><code class='code' style='white-space:pre;'><div class='code-line code-line-1'>\n</div><div class='code-line code-line-2'>&nbsp;&nbsp;<span style=\"color: #cf222e\">class</span>&nbsp;<span style=\"color: #953800\">PostsController</span>&nbsp;<span style=\"color: #0550ae\">&lt;</span>&nbsp;<span style=\"color: #953800\">ApplicationController</span>\n</div><div class='code-line code-line-3'>&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #24292f;background-color: #f6f8fa\">rpc</span><span style=\"color: #24292f;background-color: #f6f8fa\">(</span><span style=\"color: #0a3069\">:defaults</span><span style=\"color: #24292f;background-color: #f6f8fa\">)</span>&nbsp;<span style=\"color: #cf222e\">do</span>&nbsp;<span style=\"color: #0550ae\">|</span><span style=\"color: #24292f;background-color: #f6f8fa\">params</span><span style=\"color: #0550ae\">|</span>\n</div><div class='code-line code-line-4'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #24292f;background-color: #f6f8fa\">post</span>&nbsp;<span style=\"color: #0550ae\">=</span>&nbsp;<span style=\"color: #953800\">Post</span><span style=\"color: #24292f;background-color: #f6f8fa\">.</span><span style=\"color: #8250df\">new</span><span style=\"color: #24292f;background-color: #f6f8fa\">(</span><span style=\"color: #24292f;background-color: #f6f8fa\">params</span><span style=\"color: #24292f;background-color: #f6f8fa\">)</span>\n</div><div class='code-line code-line-5'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #24292f;background-color: #f6f8fa\">post</span><span style=\"color: #24292f;background-color: #f6f8fa\">.</span><span style=\"color: #8250df\">set_defaults!</span>\n</div><div class='code-line code-line-6'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #24292f;background-color: #f6f8fa\">post</span><span style=\"color: #24292f;background-color: #f6f8fa\">.</span><span style=\"color: #8250df\">as_json</span>\n</div><div class='code-line code-line-7'>&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #cf222e\">end</span>\n</div><div class='code-line code-line-8'>&nbsp;&nbsp;<span style=\"color: #cf222e\">end</span>\n</div><div class='code-line code-line-9'>\n</div></code></div>\n\n<h2>step three</h2>\n\n<p>setup js to be able to call rpc methods <em>relative</em> to the current controller</p>\n\n<div class=\"language-javascript highlighter-rouge\"><code class='code' style='white-space:pre;'><div class='code-line code-line-1'>\n</div><div class='code-line code-line-2'>&nbsp;&nbsp;<span style=\"color: #6e7781\">// in file: app/views/layouts/application.html.erb</span>\n</div><div class='code-line code-line-3'>&nbsp;&nbsp;<span style=\"color: #6e7781\">//</span>\n</div><div class='code-line code-line-4'>&nbsp;&nbsp;<span style=\"color: #6e7781\">// notice the *relative* url rpc endpoint</span>\n</div><div class='code-line code-line-5'>&nbsp;&nbsp;<span style=\"color: #6e7781\">//</span>\n</div><div class='code-line code-line-6'>\n</div><div class='code-line code-line-7'>&nbsp;&nbsp;<span style=\"color: #6e7781\">// &lt;script&gt;</span>\n</div><div class='code-line code-line-8'>&nbsp;&nbsp;\n</div><div class='code-line code-line-9'>&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #8250df\">jQuery</span><span style=\"color: #24292f;background-color: #f6f8fa\">(</span><span style=\"color: #cf222e\">function</span><span style=\"color: #24292f;background-color: #f6f8fa\">(){</span>\n</div><div class='code-line code-line-10'>\n</div><div class='code-line code-line-11'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #cf222e\">var</span>&nbsp;<span style=\"color: #24292f;background-color: #f6f8fa\">rpc</span>&nbsp;<span style=\"color: #0550ae\">=</span>&nbsp;<span style=\"color: #cf222e\">function</span><span style=\"color: #24292f;background-color: #f6f8fa\">(){</span>\n</div><div class='code-line code-line-12'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #6e7781\">// parse args</span>\n</div><div class='code-line code-line-13'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #6e7781\">//</span>\n</div><div class='code-line code-line-14'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #cf222e\">var</span>&nbsp;<span style=\"color: #24292f;background-color: #f6f8fa\">args</span>&nbsp;<span style=\"color: #0550ae\">=</span>&nbsp;<span style=\"color: #953800\">Array</span><span style=\"color: #24292f;background-color: #f6f8fa\">.</span><span style=\"color: #24292f;background-color: #f6f8fa\">prototype</span><span style=\"color: #24292f;background-color: #f6f8fa\">.</span><span style=\"color: #24292f;background-color: #f6f8fa\">slice</span><span style=\"color: #24292f;background-color: #f6f8fa\">.</span><span style=\"color: #8250df\">call</span><span style=\"color: #24292f;background-color: #f6f8fa\">(</span><span style=\"color: #24292f;background-color: #f6f8fa\">arguments</span><span style=\"color: #24292f;background-color: #f6f8fa\">);</span>\n</div><div class='code-line code-line-15'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #cf222e\">var</span>&nbsp;<span style=\"color: #24292f;background-color: #f6f8fa\">ajax</span><span style=\"color: #24292f;background-color: #f6f8fa\">;</span>\n</div><div class='code-line code-line-16'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #cf222e\">var</span>&nbsp;<span style=\"color: #24292f;background-color: #f6f8fa\">method</span><span style=\"color: #24292f;background-color: #f6f8fa\">;</span>\n</div><div class='code-line code-line-17'>\n</div><div class='code-line code-line-18'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #cf222e\">if</span><span style=\"color: #24292f;background-color: #f6f8fa\">(</span><span style=\"color: #24292f;background-color: #f6f8fa\">args</span><span style=\"color: #24292f;background-color: #f6f8fa\">.</span><span style=\"color: #24292f;background-color: #f6f8fa\">length</span>&nbsp;<span style=\"color: #0550ae\">==</span>&nbsp;<span style=\"color: #0550ae\">1</span>&nbsp;<span style=\"color: #0550ae\">&amp;&amp;</span>&nbsp;<span style=\"color: #cf222e\">typeof</span><span style=\"color: #24292f;background-color: #f6f8fa\">(</span><span style=\"color: #24292f;background-color: #f6f8fa\">args</span><span style=\"color: #24292f;background-color: #f6f8fa\">[</span><span style=\"color: #0550ae\">0</span><span style=\"color: #24292f;background-color: #f6f8fa\">])</span>&nbsp;<span style=\"color: #0550ae\">==</span>&nbsp;<span style=\"color: #0a3069\">'</span><span style=\"color: #0a3069\">object</span><span style=\"color: #0a3069\">'</span><span style=\"color: #24292f;background-color: #f6f8fa\">){</span>\n</div><div class='code-line code-line-19'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #24292f;background-color: #f6f8fa\">ajax</span>&nbsp;<span style=\"color: #0550ae\">=</span>&nbsp;<span style=\"color: #24292f;background-color: #f6f8fa\">args</span><span style=\"color: #24292f;background-color: #f6f8fa\">.</span><span style=\"color: #8250df\">shift</span><span style=\"color: #24292f;background-color: #f6f8fa\">();</span>\n</div><div class='code-line code-line-20'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #24292f;background-color: #f6f8fa\">}</span>&nbsp;<span style=\"color: #cf222e\">else</span>&nbsp;<span style=\"color: #24292f;background-color: #f6f8fa\">{</span>\n</div><div class='code-line code-line-21'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #24292f;background-color: #f6f8fa\">ajax</span>&nbsp;<span style=\"color: #0550ae\">=</span>&nbsp;<span style=\"color: #24292f;background-color: #f6f8fa\">{};</span>\n</div><div class='code-line code-line-22'>\n</div><div class='code-line code-line-23'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #cf222e\">for</span><span style=\"color: #24292f;background-color: #f6f8fa\">(</span><span style=\"color: #cf222e\">var</span>&nbsp;<span style=\"color: #24292f;background-color: #f6f8fa\">i</span>&nbsp;<span style=\"color: #0550ae\">=</span>&nbsp;<span style=\"color: #0550ae\">0</span><span style=\"color: #24292f;background-color: #f6f8fa\">;</span>&nbsp;<span style=\"color: #24292f;background-color: #f6f8fa\">i</span>&nbsp;<span style=\"color: #0550ae\">&lt;</span>&nbsp;<span style=\"color: #24292f;background-color: #f6f8fa\">args</span><span style=\"color: #24292f;background-color: #f6f8fa\">.</span><span style=\"color: #24292f;background-color: #f6f8fa\">length</span><span style=\"color: #24292f;background-color: #f6f8fa\">;</span>&nbsp;<span style=\"color: #24292f;background-color: #f6f8fa\">i</span><span style=\"color: #0550ae\">++</span><span style=\"color: #24292f;background-color: #f6f8fa\">){</span>\n</div><div class='code-line code-line-24'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #cf222e\">var</span>&nbsp;<span style=\"color: #24292f;background-color: #f6f8fa\">arg</span>&nbsp;<span style=\"color: #0550ae\">=</span>&nbsp;<span style=\"color: #24292f;background-color: #f6f8fa\">args</span><span style=\"color: #24292f;background-color: #f6f8fa\">[</span><span style=\"color: #24292f;background-color: #f6f8fa\">i</span><span style=\"color: #24292f;background-color: #f6f8fa\">];</span>\n</div><div class='code-line code-line-25'>\n</div><div class='code-line code-line-26'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #cf222e\">switch </span><span style=\"color: #24292f;background-color: #f6f8fa\">(</span><span style=\"color: #cf222e\">typeof</span><span style=\"color: #24292f;background-color: #f6f8fa\">(</span><span style=\"color: #24292f;background-color: #f6f8fa\">arg</span><span style=\"color: #24292f;background-color: #f6f8fa\">))</span>&nbsp;<span style=\"color: #24292f;background-color: #f6f8fa\">{</span>\n</div><div class='code-line code-line-27'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #cf222e\">case</span>&nbsp;<span style=\"color: #0a3069\">'</span><span style=\"color: #0a3069\">object</span><span style=\"color: #0a3069\">'</span><span style=\"color: #24292f;background-color: #f6f8fa\">:</span>\n</div><div class='code-line code-line-28'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #24292f;background-color: #f6f8fa\">ajax</span><span style=\"color: #24292f;background-color: #f6f8fa\">[</span><span style=\"color: #0a3069\">'</span><span style=\"color: #0a3069\">data</span><span style=\"color: #0a3069\">'</span><span style=\"color: #24292f;background-color: #f6f8fa\">]</span>&nbsp;<span style=\"color: #0550ae\">=</span>&nbsp;<span style=\"color: #24292f;background-color: #f6f8fa\">arg</span><span style=\"color: #24292f;background-color: #f6f8fa\">;</span>\n</div><div class='code-line code-line-29'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #cf222e\">break</span><span style=\"color: #24292f;background-color: #f6f8fa\">;</span>\n</div><div class='code-line code-line-30'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #cf222e\">case</span>&nbsp;<span style=\"color: #0a3069\">'</span><span style=\"color: #0a3069\">function</span><span style=\"color: #0a3069\">'</span><span style=\"color: #24292f;background-color: #f6f8fa\">:</span>\n</div><div class='code-line code-line-31'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #24292f;background-color: #f6f8fa\">ajax</span><span style=\"color: #24292f;background-color: #f6f8fa\">[</span><span style=\"color: #0a3069\">'</span><span style=\"color: #0a3069\">success</span><span style=\"color: #0a3069\">'</span><span style=\"color: #24292f;background-color: #f6f8fa\">]</span>&nbsp;<span style=\"color: #0550ae\">=</span>&nbsp;<span style=\"color: #24292f;background-color: #f6f8fa\">arg</span><span style=\"color: #24292f;background-color: #f6f8fa\">;</span>\n</div><div class='code-line code-line-32'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #cf222e\">break</span><span style=\"color: #24292f;background-color: #f6f8fa\">;</span>\n</div><div class='code-line code-line-33'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #cf222e\">case</span>&nbsp;<span style=\"color: #0a3069\">'</span><span style=\"color: #0a3069\">string</span><span style=\"color: #0a3069\">'</span><span style=\"color: #24292f;background-color: #f6f8fa\">:</span>\n</div><div class='code-line code-line-34'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #24292f;background-color: #f6f8fa\">method</span>&nbsp;<span style=\"color: #0550ae\">=</span>&nbsp;<span style=\"color: #24292f;background-color: #f6f8fa\">arg</span><span style=\"color: #24292f;background-color: #f6f8fa\">;</span>\n</div><div class='code-line code-line-35'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #cf222e\">break</span><span style=\"color: #24292f;background-color: #f6f8fa\">;</span>\n</div><div class='code-line code-line-36'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #24292f;background-color: #f6f8fa\">};</span>\n</div><div class='code-line code-line-37'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #24292f;background-color: #f6f8fa\">}</span>\n</div><div class='code-line code-line-38'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #24292f;background-color: #f6f8fa\">};</span>\n</div><div class='code-line code-line-39'>\n</div><div class='code-line code-line-40'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #6e7781\">// normalize ajax options</span>\n</div><div class='code-line code-line-41'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #6e7781\">//</span>\n</div><div class='code-line code-line-42'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #24292f;background-color: #f6f8fa\">ajax</span><span style=\"color: #24292f;background-color: #f6f8fa\">[</span><span style=\"color: #0a3069\">'</span><span style=\"color: #0a3069\">url</span><span style=\"color: #0a3069\">'</span><span style=\"color: #24292f;background-color: #f6f8fa\">]</span>&nbsp;<span style=\"color: #0550ae\">=</span>&nbsp;<span style=\"color: #24292f;background-color: #f6f8fa\">ajax</span><span style=\"color: #24292f;background-color: #f6f8fa\">[</span><span style=\"color: #0a3069\">'</span><span style=\"color: #0a3069\">url</span><span style=\"color: #0a3069\">'</span><span style=\"color: #24292f;background-color: #f6f8fa\">]</span>&nbsp;<span style=\"color: #0550ae\">||</span>&nbsp;<span style=\"color: #24292f;background-color: #f6f8fa\">rpc</span><span style=\"color: #24292f;background-color: #f6f8fa\">[</span><span style=\"color: #0a3069\">'</span><span style=\"color: #0a3069\">url</span><span style=\"color: #0a3069\">'</span><span style=\"color: #24292f;background-color: #f6f8fa\">];</span>\n</div><div class='code-line code-line-43'>\n</div><div class='code-line code-line-44'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #24292f;background-color: #f6f8fa\">method</span>&nbsp;<span style=\"color: #0550ae\">=</span>&nbsp;<span style=\"color: #24292f;background-color: #f6f8fa\">method</span>&nbsp;<span style=\"color: #0550ae\">||</span>&nbsp;<span style=\"color: #24292f;background-color: #f6f8fa\">ajax</span><span style=\"color: #24292f;background-color: #f6f8fa\">[</span><span style=\"color: #0a3069\">'</span><span style=\"color: #0a3069\">method</span><span style=\"color: #0a3069\">'</span><span style=\"color: #24292f;background-color: #f6f8fa\">];</span>\n</div><div class='code-line code-line-45'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #cf222e\">delete</span>&nbsp;<span style=\"color: #24292f;background-color: #f6f8fa\">ajax</span><span style=\"color: #24292f;background-color: #f6f8fa\">[</span><span style=\"color: #0a3069\">'</span><span style=\"color: #0a3069\">method</span><span style=\"color: #0a3069\">'</span><span style=\"color: #24292f;background-color: #f6f8fa\">];</span>\n</div><div class='code-line code-line-46'>\n</div><div class='code-line code-line-47'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #24292f;background-color: #f6f8fa\">ajax</span><span style=\"color: #24292f;background-color: #f6f8fa\">[</span><span style=\"color: #0a3069\">'</span><span style=\"color: #0a3069\">data</span><span style=\"color: #0a3069\">'</span><span style=\"color: #24292f;background-color: #f6f8fa\">]</span>&nbsp;<span style=\"color: #0550ae\">=</span>&nbsp;<span style=\"color: #24292f;background-color: #f6f8fa\">ajax</span><span style=\"color: #24292f;background-color: #f6f8fa\">[</span><span style=\"color: #0a3069\">'</span><span style=\"color: #0a3069\">data</span><span style=\"color: #0a3069\">'</span><span style=\"color: #24292f;background-color: #f6f8fa\">]</span>&nbsp;<span style=\"color: #0550ae\">||</span>&nbsp;<span style=\"color: #24292f;background-color: #f6f8fa\">{};</span>\n</div><div class='code-line code-line-48'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #24292f;background-color: #f6f8fa\">ajax</span><span style=\"color: #24292f;background-color: #f6f8fa\">[</span><span style=\"color: #0a3069\">'</span><span style=\"color: #0a3069\">data</span><span style=\"color: #0a3069\">'</span><span style=\"color: #24292f;background-color: #f6f8fa\">][</span><span style=\"color: #0a3069\">'</span><span style=\"color: #0a3069\">method</span><span style=\"color: #0a3069\">'</span><span style=\"color: #24292f;background-color: #f6f8fa\">]</span>&nbsp;<span style=\"color: #0550ae\">=</span>&nbsp;<span style=\"color: #24292f;background-color: #f6f8fa\">method</span><span style=\"color: #24292f;background-color: #f6f8fa\">;</span>\n</div><div class='code-line code-line-49'>\n</div><div class='code-line code-line-50'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #24292f;background-color: #f6f8fa\">ajax</span><span style=\"color: #24292f;background-color: #f6f8fa\">[</span><span style=\"color: #0a3069\">'</span><span style=\"color: #0a3069\">async</span><span style=\"color: #0a3069\">'</span><span style=\"color: #24292f;background-color: #f6f8fa\">]</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #0550ae\">=</span>&nbsp;<span style=\"color: #0550ae\">true</span><span style=\"color: #24292f;background-color: #f6f8fa\">;</span>\n</div><div class='code-line code-line-51'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #24292f;background-color: #f6f8fa\">ajax</span><span style=\"color: #24292f;background-color: #f6f8fa\">[</span><span style=\"color: #0a3069\">'</span><span style=\"color: #0a3069\">type</span><span style=\"color: #0a3069\">'</span><span style=\"color: #24292f;background-color: #f6f8fa\">]</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #0550ae\">=</span>&nbsp;<span style=\"color: #0a3069\">'</span><span style=\"color: #0a3069\">GET</span><span style=\"color: #0a3069\">'</span><span style=\"color: #24292f;background-color: #f6f8fa\">;</span>\n</div><div class='code-line code-line-52'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #24292f;background-color: #f6f8fa\">ajax</span><span style=\"color: #24292f;background-color: #f6f8fa\">[</span><span style=\"color: #0a3069\">'</span><span style=\"color: #0a3069\">dataType</span><span style=\"color: #0a3069\">'</span><span style=\"color: #24292f;background-color: #f6f8fa\">]</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #0550ae\">=</span>&nbsp;<span style=\"color: #0a3069\">'</span><span style=\"color: #0a3069\">json</span><span style=\"color: #0a3069\">'</span><span style=\"color: #24292f;background-color: #f6f8fa\">;</span>\n</div><div class='code-line code-line-53'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #24292f;background-color: #f6f8fa\">ajax</span><span style=\"color: #24292f;background-color: #f6f8fa\">[</span><span style=\"color: #0a3069\">'</span><span style=\"color: #0a3069\">cache</span><span style=\"color: #0a3069\">'</span><span style=\"color: #24292f;background-color: #f6f8fa\">]</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #0550ae\">=</span>&nbsp;<span style=\"color: #0550ae\">false</span><span style=\"color: #24292f;background-color: #f6f8fa\">;</span>\n</div><div class='code-line code-line-54'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #24292f;background-color: #f6f8fa\">ajax</span><span style=\"color: #24292f;background-color: #f6f8fa\">[</span><span style=\"color: #0a3069\">'</span><span style=\"color: #0a3069\">contentType</span><span style=\"color: #0a3069\">'</span><span style=\"color: #24292f;background-color: #f6f8fa\">]</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #0550ae\">=</span>&nbsp;<span style=\"color: #0a3069\">'</span><span style=\"color: #0a3069\">application/json; charset = utf-8</span><span style=\"color: #0a3069\">'</span><span style=\"color: #24292f;background-color: #f6f8fa\">;</span>\n</div><div class='code-line code-line-55'>\n</div><div class='code-line code-line-56'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #cf222e\">var</span>&nbsp;<span style=\"color: #24292f;background-color: #f6f8fa\">result</span>&nbsp;<span style=\"color: #0550ae\">=</span>&nbsp;<span style=\"color: #24292f;background-color: #f6f8fa\">ajax</span><span style=\"color: #24292f;background-color: #f6f8fa\">;</span>\n</div><div class='code-line code-line-57'>\n</div><div class='code-line code-line-58'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #6e7781\">// ajax request - using callback or returning the result sync style</span>\n</div><div class='code-line code-line-59'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #6e7781\">//</span>\n</div><div class='code-line code-line-60'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #cf222e\">if</span><span style=\"color: #24292f;background-color: #f6f8fa\">(</span><span style=\"color: #0550ae\">!</span><span style=\"color: #24292f;background-color: #f6f8fa\">ajax</span><span style=\"color: #24292f;background-color: #f6f8fa\">[</span><span style=\"color: #0a3069\">'</span><span style=\"color: #0a3069\">success</span><span style=\"color: #0a3069\">'</span><span style=\"color: #24292f;background-color: #f6f8fa\">]){</span>\n</div><div class='code-line code-line-61'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #24292f;background-color: #f6f8fa\">ajax</span><span style=\"color: #24292f;background-color: #f6f8fa\">[</span><span style=\"color: #0a3069\">'</span><span style=\"color: #0a3069\">async</span><span style=\"color: #0a3069\">'</span><span style=\"color: #24292f;background-color: #f6f8fa\">]</span>&nbsp;<span style=\"color: #0550ae\">=</span>&nbsp;<span style=\"color: #0550ae\">false</span><span style=\"color: #24292f;background-color: #f6f8fa\">;</span>\n</div><div class='code-line code-line-62'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #24292f;background-color: #f6f8fa\">ajax</span><span style=\"color: #24292f;background-color: #f6f8fa\">[</span><span style=\"color: #0a3069\">'</span><span style=\"color: #0a3069\">success</span><span style=\"color: #0a3069\">'</span><span style=\"color: #24292f;background-color: #f6f8fa\">]</span>&nbsp;<span style=\"color: #0550ae\">=</span>&nbsp;<span style=\"color: #cf222e\">function</span><span style=\"color: #24292f;background-color: #f6f8fa\">(</span><span style=\"color: #24292f;background-color: #f6f8fa\">response</span><span style=\"color: #24292f;background-color: #f6f8fa\">){</span>&nbsp;<span style=\"color: #24292f;background-color: #f6f8fa\">result</span>&nbsp;<span style=\"color: #0550ae\">=</span>&nbsp;<span style=\"color: #24292f;background-color: #f6f8fa\">response</span>&nbsp;<span style=\"color: #24292f;background-color: #f6f8fa\">};</span>\n</div><div class='code-line code-line-63'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #24292f;background-color: #f6f8fa\">};</span>\n</div><div class='code-line code-line-64'>\n</div><div class='code-line code-line-65'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #24292f;background-color: #f6f8fa\">jQuery</span><span style=\"color: #24292f;background-color: #f6f8fa\">.</span><span style=\"color: #8250df\">ajax</span><span style=\"color: #24292f;background-color: #f6f8fa\">(</span><span style=\"color: #24292f;background-color: #f6f8fa\">ajax</span><span style=\"color: #24292f;background-color: #f6f8fa\">);</span>\n</div><div class='code-line code-line-66'>\n</div><div class='code-line code-line-67'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #cf222e\">return</span><span style=\"color: #24292f;background-color: #f6f8fa\">(</span><span style=\"color: #24292f;background-color: #f6f8fa\">result</span><span style=\"color: #24292f;background-color: #f6f8fa\">);</span>\n</div><div class='code-line code-line-68'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #24292f;background-color: #f6f8fa\">};</span>\n</div><div class='code-line code-line-69'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\n</div><div class='code-line code-line-70'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\n</div><div class='code-line code-line-71'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #24292f;background-color: #f6f8fa\">rpc</span><span style=\"color: #24292f;background-color: #f6f8fa\">[</span><span style=\"color: #0a3069\">'</span><span style=\"color: #0a3069\">url</span><span style=\"color: #0a3069\">'</span><span style=\"color: #24292f;background-color: #f6f8fa\">]</span>&nbsp;<span style=\"color: #0550ae\">=</span>&nbsp;<span style=\"color: #0550ae\">&lt;%=</span>&nbsp;<span style=\"color: #24292f;background-color: #f6f8fa\">raw</span>&nbsp;<span style=\"color: #8250df\">url_for</span><span style=\"color: #24292f;background-color: #f6f8fa\">(:</span><span style=\"color: #24292f;background-color: #f6f8fa\">action</span>&nbsp;<span style=\"color: #0550ae\">=&gt;</span>&nbsp;<span style=\"color: #24292f;background-color: #f6f8fa\">:</span><span style=\"color: #24292f;background-color: #f6f8fa\">rpc</span><span style=\"color: #24292f;background-color: #f6f8fa\">).</span><span style=\"color: #24292f;background-color: #f6f8fa\">to_json</span>&nbsp;<span style=\"color: #0550ae\">%&gt;</span><span style=\"color: #24292f;background-color: #f6f8fa\">;</span>\n</div><div class='code-line code-line-72'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\n</div><div class='code-line code-line-73'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\n</div><div class='code-line code-line-74'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #953800\">window</span><span style=\"color: #24292f;background-color: #f6f8fa\">.</span><span style=\"color: #24292f;background-color: #f6f8fa\">rpc</span>&nbsp;<span style=\"color: #0550ae\">=</span>&nbsp;<span style=\"color: #24292f;background-color: #f6f8fa\">rpc</span><span style=\"color: #24292f;background-color: #f6f8fa\">;</span>\n</div><div class='code-line code-line-75'>\n</div><div class='code-line code-line-76'>\n</div><div class='code-line code-line-77'>\n</div><div class='code-line code-line-78'>&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #24292f;background-color: #f6f8fa\">});</span>\n</div><div class='code-line code-line-79'>&nbsp;&nbsp;\n</div><div class='code-line code-line-80'>&nbsp;&nbsp;<span style=\"color: #6e7781\">// &lt;/script&gt;</span>\n</div><div class='code-line code-line-81'>\n</div></code></div>\n\n<h2>step four</h2>\n\n<p>enable the rpc endpoints in config/routes.rb</p>\n\n<div class=\"language-ruby highlighter-rouge\"><code class='code' style='white-space:pre;'><div class='code-line code-line-1'>\n</div><div class='code-line code-line-2'>&nbsp;&nbsp;<span style=\"color: #24292f;background-color: #f6f8fa\">resources</span>&nbsp;<span style=\"color: #0a3069\">:posts</span>&nbsp;<span style=\"color: #cf222e\">do</span>\n</div><div class='code-line code-line-3'>&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #24292f;background-color: #f6f8fa\">collection</span>&nbsp;<span style=\"color: #cf222e\">do</span>\n</div><div class='code-line code-line-4'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #24292f;background-color: #f6f8fa\">get</span>&nbsp;<span style=\"color: #0a3069\">'rpc'</span>\n</div><div class='code-line code-line-5'>&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #cf222e\">end</span>\n</div><div class='code-line code-line-6'>&nbsp;&nbsp;<span style=\"color: #cf222e\">end</span>\n</div><div class='code-line code-line-7'>\n</div></code></div>\n\n<h2>step five</h2>\n\n<p>now you can use relative js rpc helpers at will in your views</p>\n\n<div class=\"language-ruby highlighter-rouge\"><code class='code' style='white-space:pre;'><div class='code-line code-line-1'>\n</div><div class='code-line code-line-2'>&nbsp;&nbsp;<span style=\"color: #24292f;background-color: #f6f8fa\">var</span>&nbsp;<span style=\"color: #24292f;background-color: #f6f8fa\">title</span>&nbsp;<span style=\"color: #0550ae\">=</span>&nbsp;<span style=\"color: #f6f8fa;background-color: #82071e\">$</span><span style=\"color: #24292f;background-color: #f6f8fa\">(</span><span style=\"color: #0a3069\">'#title'</span><span style=\"color: #24292f;background-color: #f6f8fa\">);</span>\n</div><div class='code-line code-line-3'>&nbsp;&nbsp;<span style=\"color: #24292f;background-color: #f6f8fa\">var</span>&nbsp;<span style=\"color: #24292f;background-color: #f6f8fa\">slug</span>&nbsp;<span style=\"color: #0550ae\">=</span>&nbsp;<span style=\"color: #f6f8fa;background-color: #82071e\">$</span><span style=\"color: #24292f;background-color: #f6f8fa\">(</span><span style=\"color: #0a3069\">'#slug'</span><span style=\"color: #24292f;background-color: #f6f8fa\">);</span>\n</div><div class='code-line code-line-4'>\n</div><div class='code-line code-line-5'>&nbsp;&nbsp;<span style=\"color: #24292f;background-color: #f6f8fa\">title</span><span style=\"color: #24292f;background-color: #f6f8fa\">.</span><span style=\"color: #8250df\">change</span><span style=\"color: #24292f;background-color: #f6f8fa\">(</span><span style=\"color: #24292f;background-color: #f6f8fa\">function</span><span style=\"color: #24292f;background-color: #f6f8fa\">(){</span>\n</div><div class='code-line code-line-6'>&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #24292f;background-color: #f6f8fa\">var</span>&nbsp;<span style=\"color: #24292f;background-color: #f6f8fa\">value</span>&nbsp;<span style=\"color: #0550ae\">=</span>&nbsp;<span style=\"color: #24292f;background-color: #f6f8fa\">title</span><span style=\"color: #24292f;background-color: #f6f8fa\">.</span><span style=\"color: #8250df\">val</span><span style=\"color: #24292f;background-color: #f6f8fa\">();</span>\n</div><div class='code-line code-line-7'>&nbsp;&nbsp;&nbsp;&nbsp;\n</div><div class='code-line code-line-8'>&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #24292f;background-color: #f6f8fa\">var</span>&nbsp;<span style=\"color: #24292f;background-color: #f6f8fa\">data</span>&nbsp;<span style=\"color: #0550ae\">=</span>&nbsp;<span style=\"color: #24292f;background-color: #f6f8fa\">{</span><span style=\"color: #0a3069\">'title'</span>&nbsp;<span style=\"color: #24292f;background-color: #f6f8fa\">:</span>&nbsp;<span style=\"color: #24292f;background-color: #f6f8fa\">value</span><span style=\"color: #24292f;background-color: #f6f8fa\">};</span>\n</div><div class='code-line code-line-9'>&nbsp;&nbsp;&nbsp;&nbsp;\n</div><div class='code-line code-line-10'>&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #24292f;background-color: #f6f8fa\">var</span>&nbsp;<span style=\"color: #24292f;background-color: #f6f8fa\">success</span>&nbsp;<span style=\"color: #0550ae\">=</span>&nbsp;<span style=\"color: #24292f;background-color: #f6f8fa\">function</span><span style=\"color: #24292f;background-color: #f6f8fa\">(</span><span style=\"color: #24292f;background-color: #f6f8fa\">defaults</span><span style=\"color: #24292f;background-color: #f6f8fa\">){</span>\n</div><div class='code-line code-line-11'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #24292f;background-color: #f6f8fa\">slug</span><span style=\"color: #24292f;background-color: #f6f8fa\">.</span><span style=\"color: #8250df\">val</span><span style=\"color: #24292f;background-color: #f6f8fa\">(</span><span style=\"color: #24292f;background-color: #f6f8fa\">defaults</span><span style=\"color: #24292f;background-color: #f6f8fa\">[</span><span style=\"color: #0a3069\">'slug'</span><span style=\"color: #24292f;background-color: #f6f8fa\">]);</span>\n</div><div class='code-line code-line-12'>&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #24292f;background-color: #f6f8fa\">};</span>\n</div><div class='code-line code-line-13'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\n</div><div class='code-line code-line-14'>&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #24292f;background-color: #f6f8fa\">rpc</span><span style=\"color: #24292f;background-color: #f6f8fa\">(</span><span style=\"color: #0a3069\">'defaults'</span><span style=\"color: #24292f;background-color: #f6f8fa\">,</span>&nbsp;<span style=\"color: #24292f;background-color: #f6f8fa\">data</span><span style=\"color: #24292f;background-color: #f6f8fa\">,</span>&nbsp;<span style=\"color: #24292f;background-color: #f6f8fa\">success</span><span style=\"color: #24292f;background-color: #f6f8fa\">);</span>\n</div><div class='code-line code-line-15'>&nbsp;&nbsp;<span style=\"color: #24292f;background-color: #f6f8fa\">});</span>\n</div><div class='code-line code-line-16'>&nbsp;&nbsp;\n</div></code></div>\n\n<p>this organization keeps your code clean by avoiding a proliferation of controllers and prevents the need to litter clean resourceful controllers with loads of fugly js helper actions</p>\n\n<p>here is the code in it’s entirety</p>\n\n<div class=\"language-ruby highlighter-rouge\"><code class='code' style='white-space:pre;'><div class='code-line code-line-1'>\n</div><div class='code-line code-line-2'>&nbsp;&nbsp;<span style=\"color: #6e7781\"># file : ./lib/rpc.rb</span>\n</div><div class='code-line code-line-3'>\n</div><div class='code-line code-line-4'>&nbsp;&nbsp;<span style=\"color: #cf222e\">module</span>&nbsp;<span style=\"color: #953800\">RPC</span>\n</div><div class='code-line code-line-5'>&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #953800\">Actions</span>&nbsp;<span style=\"color: #0550ae\">=</span>\n</div><div class='code-line code-line-6'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #953800\">Hash</span><span style=\"color: #24292f;background-color: #f6f8fa\">.</span><span style=\"color: #8250df\">new</span><span style=\"color: #24292f;background-color: #f6f8fa\">{</span><span style=\"color: #0550ae\">|</span><span style=\"color: #953800\">hash</span><span style=\"color: #24292f;background-color: #f6f8fa\">,</span>&nbsp;<span style=\"color: #24292f;background-color: #f6f8fa\">controller</span><span style=\"color: #0550ae\">|</span>&nbsp;<span style=\"color: #953800\">hash</span><span style=\"color: #24292f;background-color: #f6f8fa\">[</span><span style=\"color: #24292f;background-color: #f6f8fa\">controller</span><span style=\"color: #24292f;background-color: #f6f8fa\">]</span>&nbsp;<span style=\"color: #0550ae\">=</span>&nbsp;<span style=\"color: #953800\">Hash</span><span style=\"color: #24292f;background-color: #f6f8fa\">.</span><span style=\"color: #8250df\">new</span><span style=\"color: #24292f;background-color: #f6f8fa\">}</span>\n</div><div class='code-line code-line-7'>\n</div><div class='code-line code-line-8'>&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #cf222e\">module</span>&nbsp;<span style=\"color: #953800\">ClassMethods</span>\n</div><div class='code-line code-line-9'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #cf222e\">def</span>&nbsp;<span style=\"color: #8250df\">rpc</span><span style=\"color: #24292f;background-color: #f6f8fa\">(</span><span style=\"color: #953800\">method</span>&nbsp;<span style=\"color: #0550ae\">=</span>&nbsp;<span style=\"color: #cf222e\">nil</span><span style=\"color: #24292f;background-color: #f6f8fa\">,</span>&nbsp;<span style=\"color: #0550ae\">&amp;</span><span style=\"color: #24292f;background-color: #f6f8fa\">block</span><span style=\"color: #24292f;background-color: #f6f8fa\">)</span>\n</div><div class='code-line code-line-10'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #cf222e\">case</span>\n</div><div class='code-line code-line-11'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #cf222e\">when</span>&nbsp;<span style=\"color: #953800\">method</span><span style=\"color: #24292f;background-color: #f6f8fa\">.</span><span style=\"color: #8250df\">nil?</span>&nbsp;<span style=\"color: #0550ae\">&amp;&amp;</span>&nbsp;<span style=\"color: #24292f;background-color: #f6f8fa\">block</span><span style=\"color: #24292f;background-color: #f6f8fa\">.</span><span style=\"color: #8250df\">nil?</span>\n</div><div class='code-line code-line-12'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #953800\">Actions</span>\n</div><div class='code-line code-line-13'>\n</div><div class='code-line code-line-14'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #cf222e\">else</span>\n</div><div class='code-line code-line-15'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #24292f;background-color: #f6f8fa\">controller</span>&nbsp;<span style=\"color: #0550ae\">=</span>&nbsp;<span style=\"color: #953800\">self</span>\n</div><div class='code-line code-line-16'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #953800\">method</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #0550ae\">=</span>&nbsp;<span style=\"color: #953800\">method</span><span style=\"color: #24292f;background-color: #f6f8fa\">.</span><span style=\"color: #8250df\">to_s</span>\n</div><div class='code-line code-line-17'>\n</div><div class='code-line code-line-18'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #953800\">Actions</span><span style=\"color: #24292f;background-color: #f6f8fa\">[</span><span style=\"color: #24292f;background-color: #f6f8fa\">controller</span><span style=\"color: #24292f;background-color: #f6f8fa\">][</span><span style=\"color: #953800\">method</span><span style=\"color: #24292f;background-color: #f6f8fa\">]</span>&nbsp;<span style=\"color: #0550ae\">=</span>&nbsp;<span style=\"color: #24292f;background-color: #f6f8fa\">block</span>\n</div><div class='code-line code-line-19'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #cf222e\">end</span>\n</div><div class='code-line code-line-20'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #cf222e\">end</span>\n</div><div class='code-line code-line-21'>&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #cf222e\">end</span>\n</div><div class='code-line code-line-22'>\n</div><div class='code-line code-line-23'>&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #cf222e\">module</span>&nbsp;<span style=\"color: #953800\">InstanceMethods</span>\n</div><div class='code-line code-line-24'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #cf222e\">def</span>&nbsp;<span style=\"color: #8250df\">rpc</span>\n</div><div class='code-line code-line-25'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #953800\">method</span>&nbsp;&nbsp;<span style=\"color: #0550ae\">=</span>&nbsp;<span style=\"color: #24292f;background-color: #f6f8fa\">params</span><span style=\"color: #24292f;background-color: #f6f8fa\">.</span><span style=\"color: #8250df\">delete</span><span style=\"color: #24292f;background-color: #f6f8fa\">(</span><span style=\"color: #0a3069\">:method</span><span style=\"color: #24292f;background-color: #f6f8fa\">)</span>&nbsp;<span style=\"color: #0550ae\">||</span>&nbsp;<span style=\"color: #24292f;background-color: #f6f8fa\">params</span><span style=\"color: #24292f;background-color: #f6f8fa\">.</span><span style=\"color: #8250df\">delete</span><span style=\"color: #24292f;background-color: #f6f8fa\">(</span><span style=\"color: #0a3069\">:call</span><span style=\"color: #24292f;background-color: #f6f8fa\">)</span>\n</div><div class='code-line code-line-26'>\n</div><div class='code-line code-line-27'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #cf222e\">if</span>&nbsp;<span style=\"color: #953800\">method</span>\n</div><div class='code-line code-line-28'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #24292f;background-color: #f6f8fa\">controllers</span>&nbsp;<span style=\"color: #0550ae\">=</span>&nbsp;<span style=\"color: #953800\">self</span><span style=\"color: #24292f;background-color: #f6f8fa\">.</span><span style=\"color: #8250df\">class</span><span style=\"color: #24292f;background-color: #f6f8fa\">.</span><span style=\"color: #8250df\">ancestors</span><span style=\"color: #24292f;background-color: #f6f8fa\">.</span><span style=\"color: #8250df\">select</span><span style=\"color: #24292f;background-color: #f6f8fa\">{</span><span style=\"color: #0550ae\">|</span><span style=\"color: #24292f;background-color: #f6f8fa\">controller</span><span style=\"color: #0550ae\">|</span>&nbsp;<span style=\"color: #24292f;background-color: #f6f8fa\">controller</span>&nbsp;<span style=\"color: #0550ae\">&lt;=</span>&nbsp;<span style=\"color: #0550ae\">::</span><span style=\"color: #953800\">ApplicationController</span><span style=\"color: #24292f;background-color: #f6f8fa\">}</span>\n</div><div class='code-line code-line-29'>\n</div><div class='code-line code-line-30'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #24292f;background-color: #f6f8fa\">controllers</span><span style=\"color: #24292f;background-color: #f6f8fa\">.</span><span style=\"color: #8250df\">each</span>&nbsp;<span style=\"color: #cf222e\">do</span>&nbsp;<span style=\"color: #0550ae\">|</span><span style=\"color: #24292f;background-color: #f6f8fa\">controller</span><span style=\"color: #0550ae\">|</span>\n</div><div class='code-line code-line-31'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #24292f;background-color: #f6f8fa\">action</span>&nbsp;<span style=\"color: #0550ae\">=</span>&nbsp;<span style=\"color: #953800\">Actions</span><span style=\"color: #24292f;background-color: #f6f8fa\">[</span><span style=\"color: #24292f;background-color: #f6f8fa\">controller</span><span style=\"color: #24292f;background-color: #f6f8fa\">][</span><span style=\"color: #953800\">method</span><span style=\"color: #24292f;background-color: #f6f8fa\">]</span>\n</div><div class='code-line code-line-32'>\n</div><div class='code-line code-line-33'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #cf222e\">if</span>&nbsp;<span style=\"color: #24292f;background-color: #f6f8fa\">action</span>\n</div><div class='code-line code-line-34'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #24292f;background-color: #f6f8fa\">result</span>&nbsp;<span style=\"color: #0550ae\">=</span>&nbsp;<span style=\"color: #24292f;background-color: #f6f8fa\">action</span><span style=\"color: #24292f;background-color: #f6f8fa\">.</span><span style=\"color: #8250df\">call</span><span style=\"color: #24292f;background-color: #f6f8fa\">(</span><span style=\"color: #24292f;background-color: #f6f8fa\">params</span><span style=\"color: #24292f;background-color: #f6f8fa\">)</span>\n</div><div class='code-line code-line-35'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #24292f;background-color: #f6f8fa\">render</span><span style=\"color: #24292f;background-color: #f6f8fa\">(</span><span style=\"color: #0a3069\">:json</span>&nbsp;<span style=\"color: #0550ae\">=&gt;</span>&nbsp;<span style=\"color: #24292f;background-color: #f6f8fa\">result</span><span style=\"color: #24292f;background-color: #f6f8fa\">.</span><span style=\"color: #8250df\">to_json</span><span style=\"color: #24292f;background-color: #f6f8fa\">)</span>\n</div><div class='code-line code-line-36'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #cf222e\">return</span>\n</div><div class='code-line code-line-37'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #cf222e\">end</span>\n</div><div class='code-line code-line-38'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #cf222e\">end</span>\n</div><div class='code-line code-line-39'>\n</div><div class='code-line code-line-40'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #24292f;background-color: #f6f8fa\">render</span><span style=\"color: #24292f;background-color: #f6f8fa\">(</span><span style=\"color: #0a3069\">:nothing</span>&nbsp;<span style=\"color: #0550ae\">=&gt;</span>&nbsp;<span style=\"color: #cf222e\">true</span><span style=\"color: #24292f;background-color: #f6f8fa\">,</span>&nbsp;<span style=\"color: #0a3069\">:status</span>&nbsp;<span style=\"color: #0550ae\">=&gt;</span>&nbsp;<span style=\"color: #0a3069\">:not_found</span><span style=\"color: #24292f;background-color: #f6f8fa\">,</span>&nbsp;<span style=\"color: #0a3069\">:layout</span>&nbsp;<span style=\"color: #0550ae\">=&gt;</span>&nbsp;<span style=\"color: #cf222e\">false</span><span style=\"color: #24292f;background-color: #f6f8fa\">)</span>\n</div><div class='code-line code-line-41'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #cf222e\">else</span>\n</div><div class='code-line code-line-42'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #24292f;background-color: #f6f8fa\">render</span><span style=\"color: #24292f;background-color: #f6f8fa\">(</span><span style=\"color: #0a3069\">:json</span>&nbsp;<span style=\"color: #0550ae\">=&gt;</span>&nbsp;<span style=\"color: #953800\">RPC</span><span style=\"color: #24292f;background-color: #f6f8fa\">.</span><span style=\"color: #8250df\">index</span><span style=\"color: #24292f;background-color: #f6f8fa\">)</span>\n</div><div class='code-line code-line-43'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #cf222e\">end</span>\n</div><div class='code-line code-line-44'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #cf222e\">end</span>\n</div><div class='code-line code-line-45'>&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #cf222e\">end</span>\n</div><div class='code-line code-line-46'>\n</div><div class='code-line code-line-47'>&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #cf222e\">def</span>&nbsp;<span style=\"color: #953800\">RPC</span><span style=\"color: #0550ae\">.</span><span style=\"color: #8250df\">index</span>\n</div><div class='code-line code-line-48'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #953800\">Hash</span><span style=\"color: #24292f;background-color: #f6f8fa\">.</span><span style=\"color: #8250df\">new</span><span style=\"color: #24292f;background-color: #f6f8fa\">.</span><span style=\"color: #8250df\">tap</span>&nbsp;<span style=\"color: #cf222e\">do</span>&nbsp;<span style=\"color: #0550ae\">|</span><span style=\"color: #953800\">methods</span><span style=\"color: #0550ae\">|</span>\n</div><div class='code-line code-line-49'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #953800\">Actions</span><span style=\"color: #24292f;background-color: #f6f8fa\">.</span><span style=\"color: #8250df\">each</span>&nbsp;<span style=\"color: #cf222e\">do</span>&nbsp;<span style=\"color: #0550ae\">|</span><span style=\"color: #24292f;background-color: #f6f8fa\">controller</span><span style=\"color: #24292f;background-color: #f6f8fa\">,</span>&nbsp;<span style=\"color: #24292f;background-color: #f6f8fa\">actions</span><span style=\"color: #0550ae\">|</span>\n</div><div class='code-line code-line-50'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #24292f;background-color: #f6f8fa\">controller</span>&nbsp;<span style=\"color: #0550ae\">=</span>&nbsp;<span style=\"color: #24292f;background-color: #f6f8fa\">controller</span><span style=\"color: #24292f;background-color: #f6f8fa\">.</span><span style=\"color: #8250df\">name</span><span style=\"color: #24292f;background-color: #f6f8fa\">.</span><span style=\"color: #8250df\">underscore</span>\n</div><div class='code-line code-line-51'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #953800\">methods</span><span style=\"color: #24292f;background-color: #f6f8fa\">[</span><span style=\"color: #24292f;background-color: #f6f8fa\">controller</span><span style=\"color: #24292f;background-color: #f6f8fa\">]</span>&nbsp;<span style=\"color: #0550ae\">=</span>&nbsp;<span style=\"color: #24292f;background-color: #f6f8fa\">[]</span>\n</div><div class='code-line code-line-52'>\n</div><div class='code-line code-line-53'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #24292f;background-color: #f6f8fa\">actions</span><span style=\"color: #24292f;background-color: #f6f8fa\">.</span><span style=\"color: #8250df\">each</span>&nbsp;<span style=\"color: #cf222e\">do</span>&nbsp;<span style=\"color: #0550ae\">|</span><span style=\"color: #953800\">method</span><span style=\"color: #24292f;background-color: #f6f8fa\">,</span>&nbsp;<span style=\"color: #24292f;background-color: #f6f8fa\">block</span><span style=\"color: #0550ae\">|</span>\n</div><div class='code-line code-line-54'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #953800\">methods</span><span style=\"color: #24292f;background-color: #f6f8fa\">[</span><span style=\"color: #24292f;background-color: #f6f8fa\">controller</span><span style=\"color: #24292f;background-color: #f6f8fa\">].</span><span style=\"color: #8250df\">push</span><span style=\"color: #24292f;background-color: #f6f8fa\">(</span><span style=\"color: #953800\">method</span><span style=\"color: #24292f;background-color: #f6f8fa\">)</span>\n</div><div class='code-line code-line-55'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #cf222e\">end</span>\n</div><div class='code-line code-line-56'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #cf222e\">end</span>\n</div><div class='code-line code-line-57'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #cf222e\">end</span>\n</div><div class='code-line code-line-58'>&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #cf222e\">end</span>\n</div><div class='code-line code-line-59'>\n</div><div class='code-line code-line-60'>&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #cf222e\">def</span>&nbsp;<span style=\"color: #953800\">RPC</span><span style=\"color: #0550ae\">.</span><span style=\"color: #8250df\">included</span><span style=\"color: #24292f;background-color: #f6f8fa\">(</span><span style=\"color: #24292f;background-color: #f6f8fa\">other</span><span style=\"color: #24292f;background-color: #f6f8fa\">)</span>\n</div><div class='code-line code-line-61'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #cf222e\">super</span>\n</div><div class='code-line code-line-62'>&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #cf222e\">ensure</span>\n</div><div class='code-line code-line-63'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #24292f;background-color: #f6f8fa\">other</span><span style=\"color: #24292f;background-color: #f6f8fa\">.</span><span style=\"color: #8250df\">send</span><span style=\"color: #24292f;background-color: #f6f8fa\">(</span><span style=\"color: #0a3069\">:extend</span><span style=\"color: #24292f;background-color: #f6f8fa\">,</span>&nbsp;<span style=\"color: #953800\">ClassMethods</span><span style=\"color: #24292f;background-color: #f6f8fa\">)</span>\n</div><div class='code-line code-line-64'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #24292f;background-color: #f6f8fa\">other</span><span style=\"color: #24292f;background-color: #f6f8fa\">.</span><span style=\"color: #8250df\">send</span><span style=\"color: #24292f;background-color: #f6f8fa\">(</span><span style=\"color: #0a3069\">:include</span><span style=\"color: #24292f;background-color: #f6f8fa\">,</span>&nbsp;<span style=\"color: #953800\">InstanceMethods</span><span style=\"color: #24292f;background-color: #f6f8fa\">)</span>\n</div><div class='code-line code-line-65'>&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #cf222e\">end</span>\n</div><div class='code-line code-line-66'>&nbsp;&nbsp;<span style=\"color: #cf222e\">end</span>\n</div><div class='code-line code-line-67'>\n</div><div class='code-line code-line-68'>\n</div></code></div>\n\n</div>\n",
      "assets": {},
      "_meta": {
        "identifier": "dojo4/non-icky-javascript-helper-ap-is-on-your-rails-controllers",
        "type": "dojo4",
        "id": "non-icky-javascript-helper-ap-is-on-your-rails-controllers",
        "urls": [
          "/ro/dojo4/non-icky-javascript-helper-ap-is-on-your-rails-controllers/body.md"
        ],
        "created_at": "2025-05-06 08:47:14 +0000",
        "updated_at": "2025-05-06 08:47:14 +0000",
        "rel": {
          "curr": "dojo4/non-icky-javascript-helper-ap-is-on-your-rails-controllers",
          "prev": "dojo4/dojo4-helps-big-boulder-shine-in-lil-ol-boulder",
          "next": "dojo4/know-thy-forms"
        }
      }
    }
  },
  "_meta": {
    "url": "/ro",
    "type": "dojo4",
    "id": "non-icky-javascript-helper-ap-is-on-your-rails-controllers"
  }
}