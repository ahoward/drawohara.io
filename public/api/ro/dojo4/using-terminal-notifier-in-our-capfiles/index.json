{
  "data": {
    "dojo4/using-terminal-notifier-in-our-capfiles": {
      "title": "using terminal notifier in our capfiles",
      "author": "miles@dojo4.com",
      "published_at": "2014-01-02 15:07:01 UTC",
      "body": "<div class=\"ro markdown\">\n  <p>We use <a href=\"http://www.capistranorb.com/\">capistrano</a> for our deployments and recently I came across the sweet <a href=\"https://github.com/alloy/terminal-notifier\">terminal-notifier</a> gem that uses the user notifications in OS X 10.8 and above to show a nice notification from the command line. Whenever I deploy I’m always manually checking if the deploy has finished yet, and this is a nice solution to avoid that. One problem that I ran into though when adding it to one of our projects is that some people on our team are using a version of Mac OS X <em>before</em> 10.8 (I know!), so the <code>terminal-notifier</code> command would fail and their deployment would have errors in it. So here’s the code I use now to ensure errors don’t show up if you can’t use the cool user notifications in newer os x’s:</p>\n\n<div class=\"language-ruby highlighter-rouge\"><code class='code' style='white-space:pre;'><div class='code-line code-line-1'><span style=\"color: #24292f;background-color: #f6f8fa\">desc</span>&nbsp;<span style=\"color: #0a3069\">'use terminal notifier if in &gt; osx 10.8 to use a user alert'</span>\n</div><div class='code-line code-line-2'><span style=\"color: #24292f;background-color: #f6f8fa\">task</span>&nbsp;<span style=\"color: #0a3069\">:terminal</span>&nbsp;<span style=\"color: #cf222e\">do</span>\n</div><div class='code-line code-line-3'>&nbsp;<span style=\"color: #cf222e\">begin</span>\n</div><div class='code-line code-line-4'>&nbsp;&nbsp;<span style=\"color: #953800\">require</span>&nbsp;<span style=\"color: #0a3069\">'terminal-notifier'</span>\n</div><div class='code-line code-line-5'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #24292f;background-color: #f6f8fa\">url</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #0550ae\">=</span>&nbsp;<span style=\"color: #24292f;background-color: #f6f8fa\">fetch</span><span style=\"color: #24292f;background-color: #f6f8fa\">(</span><span style=\"color: #0a3069\">:url</span><span style=\"color: #24292f;background-color: #f6f8fa\">)</span>\n</div><div class='code-line code-line-6'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #24292f;background-color: #f6f8fa\">application</span>&nbsp;<span style=\"color: #0550ae\">=</span>&nbsp;<span style=\"color: #24292f;background-color: #f6f8fa\">fetch</span><span style=\"color: #24292f;background-color: #f6f8fa\">(</span><span style=\"color: #0a3069\">:application</span><span style=\"color: #24292f;background-color: #f6f8fa\">)</span>\n</div><div class='code-line code-line-7'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #953800\">system</span>&nbsp;<span style=\"color: #0a3069\">\"terminal-notifier -title </span><span style=\"color: #24292f\">#{</span>&nbsp;<span style=\"color: #24292f;background-color: #f6f8fa\">application</span>&nbsp;<span style=\"color: #24292f\">}</span><span style=\"color: #0a3069\"> -message 'Deploy completed successfully to </span><span style=\"color: #24292f\">#{</span>&nbsp;<span style=\"color: #24292f;background-color: #f6f8fa\">url</span>&nbsp;<span style=\"color: #24292f\">}</span><span style=\"color: #0a3069\">.' -sound default\"</span>\n</div><div class='code-line code-line-8'>&nbsp;<span style=\"color: #cf222e\">rescue</span>&nbsp;<span style=\"color: #953800\">LoadError</span>\n</div><div class='code-line code-line-9'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #953800\">warn</span>&nbsp;<span style=\"color: #0a3069\">\"You're probably not on os x 10.8, so not using terminal notifier. If you are, use gem install terminal-notifier to use some sweet user notifications.\"</span>\n</div><div class='code-line code-line-10'>&nbsp;<span style=\"color: #cf222e\">end</span>\n</div><div class='code-line code-line-11'><span style=\"color: #cf222e\">end</span>\n</div></code></div>\n\n<p>Obviously we also include <code>gem terminal-notifier</code> in our Gemfile. See <a href=\"http://stackoverflow.com/questions/20885606/dangers-of-putting-a-gem-into-a-gemfile-is-someone-trying-to-install-it-doesnt\">my SO question</a> about including this gem in your gemfile for an explanation of why I’m using the simple gem include statement.</p>\n\n</div>\n",
      "assets": {},
      "_meta": {
        "identifier": "dojo4/using-terminal-notifier-in-our-capfiles",
        "type": "dojo4",
        "id": "using-terminal-notifier-in-our-capfiles",
        "urls": [
          "/ro/dojo4/using-terminal-notifier-in-our-capfiles/body.md"
        ],
        "created_at": "2025-05-06 08:47:14 +0000",
        "updated_at": "2025-05-06 08:47:14 +0000",
        "rel": {
          "curr": "dojo4/using-terminal-notifier-in-our-capfiles",
          "prev": "dojo4/our-remote-working-setup",
          "next": "dojo4/irish-dance-and-wordpress-the-soul-destroyer"
        }
      }
    }
  },
  "_meta": {
    "url": "/ro",
    "type": "dojo4",
    "id": "using-terminal-notifier-in-our-capfiles"
  }
}