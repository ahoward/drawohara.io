<html color-mode="user" lang="nl">
  <head>
  <!-- ga -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-DQVD9T27V4"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-DQVD9T27V4');
</script>

  <!-- deps -->
    <script type="module" src="/assets/js/turbo.es2017-esm.js" defer></script>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.fluid.classless.fuchsia.min.css"
    >

  <!-- langs -->
  <!--
    https://developers.google.com/search/docs/specialty/international/localized-versions#html
  -->
   <link rel="alternate" hreflang="en" href="/" />
   <link rel="alternate" hreflang="uk" href="https://drawohara.io/langs/uk" />
   <link rel="alternate" hreflang="sv" href="https://drawohara.io/langs/sv" />
   <link rel="alternate" hreflang="fr" href="https://drawohara.io/langs/fr" />
   <link rel="alternate" hreflang="es" href="https://drawohara.io/langs/es" />
   <link rel="alternate" hreflang="it" href="https://drawohara.io/langs/it" />

  <!-- defaults -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="color-scheme" content="light dark" />

  <!-- favicon -->
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">

    <base href='/langs/nl' />

  <!-- meta -->
    <title>Niets om te zien hier.</title>

<meta property="og:title" content="Niets om te zien hier."/>
<meta property="og:description" content="Ga door..." />
<meta property="og:image" content="https://drawohara.io/media/mick.jpg" />




  <meta property="og:image:type" content="image/jpeg" />

    <meta property="site:route" content="/dojo4/archive/:id" />
    <meta property="site:params" content="{'ext':null,'id':'yak-shaving-at-tax-time'}">
    <meta property="site:path_info" content="/yak-shaving-at-tax-time" />

    <style>
      /* anti pico */
      a {text-decoration: none !important; }

      /* anti turbo */
      html { transition: none !important; }
      .turbo-progress-bar { visibility: hidden; }

      /* anti progressive */
      html { margin: 1em; }
      img { display: block; text-align: center; }
    </style>

    <script>
      document.addEventListener("turbo:load", function() {
        const progressBar = document.querySelector('.turbo-progress-bar');
        if (progressBar) { progressBar.remove(); }
      });
    </script>
  </head>

  <body>
    <header>
      <a href="/home">@drawohara</a> &mdash;
<a href="mailto:i-love-this@drawohara.io?subject=/yak-shaving-at-tax-time">I ‚ù§Ô∏è dit!</a>
<small>
  <small>
    <small>
      <span title='drink me'>&lt;&lt; klik me üêõ ü´ñ üßö</span>
    </small>
  </small>
</small>
<hr>
<strong>/yak-shaving-at-tax-time</strong>
    </header>

    <main>
      <em>gepubliceerd op: 2013-03-04</em>
<br>
<br>
<div class="ro markdown">
  <p>Ik schreef dit script terwijl ik mijn belasting deed omdat, zoals alle goede programmeurs, ik liever een tool schrijf dan een verdomd spreadsheetprogramma gebruik.</p>

<p>Het beseft mij van</p>

<ul>
  <li>een spreadsheet te hoeven gebruiken om mijn belastingen te categoriseren</li>
</ul>

<p>en daarbovenop bespaart het me het gebruik van een spreadsheet om mijn belastingen te categoriseren</p>

<p>zonder verdere aanwijzing (dat is voor jou, @steve)</p>

<p><br /><br />
<br /></p>

<div class="language-ruby highlighter-rouge"><code class='code' style='white-space:pre;'><div class='code-line code-line-1'><span style="color: #6e7781">#! /usr/bin/env ruby</span>
</div><div class='code-line code-line-2'>
</div><div class='code-line code-line-3'><span style="color: #953800">require</span>&nbsp;<span style="color: #0a3069">'csv'</span>
</div><div class='code-line code-line-4'><span style="color: #953800">require</span>&nbsp;<span style="color: #0a3069">'pp'</span>
</div><div class='code-line code-line-5'><span style="color: #953800">require</span>&nbsp;<span style="color: #0a3069">'readline'</span>
</div><div class='code-line code-line-6'><span style="color: #953800">require</span>&nbsp;<span style="color: #0a3069">'fileutils'</span>
</div><div class='code-line code-line-7'>
</div><div class='code-line code-line-8'><span style="color: #953800">require</span>&nbsp;<span style="color: #0a3069">'rubygems'</span>
</div><div class='code-line code-line-9'>
</div><div class='code-line code-line-10'><span style="color: #953800">require</span>&nbsp;<span style="color: #0a3069">'main'</span>
</div><div class='code-line code-line-11'><span style="color: #953800">require</span>&nbsp;<span style="color: #0a3069">'coerce'</span>
</div><div class='code-line code-line-12'><span style="color: #953800">require</span>&nbsp;<span style="color: #0a3069">'arrayfields'</span>
</div><div class='code-line code-line-13'>
</div><div class='code-line code-line-14'><span style="color: #953800">Main</span>&nbsp;<span style="color: #24292f;background-color: #f6f8fa">{</span>
</div><div class='code-line code-line-15'>&nbsp;&nbsp;<span style="color: #24292f;background-color: #f6f8fa">synopsis</span>&nbsp;<span style="color: #0550ae">&lt;&lt;-</span><span style="color: #953800">__</span>
</div><div class='code-line code-line-16'>
</div><div class='code-line code-line-17'><span style="color: #0a3069">    ruby categorize.rb transactions.csv</span>
</div><div class='code-line code-line-18'>
</div><div class='code-line code-line-19'><span style="color: #0a3069">    ruby categorize.rb transactions.csv --continue # waar ik stapte...</span>
</div><div class='code-line code-line-20'>
</div><div class='code-line code-line-21'><span style="color: #953800">  __</span>
</div><div class='code-line code-line-22'>
</div><div class='code-line code-line-23'>&nbsp;&nbsp;<span style="color: #24292f;background-color: #f6f8fa">description</span>&nbsp;<span style="color: #0550ae">&lt;&lt;-</span><span style="color: #953800">__</span>
</div><div class='code-line code-line-24'>
</div><div class='code-line code-line-25'><span style="color: #0a3069">    categorize is een verdomd transactie-categoriserend verdomd script dat ik schreef tijdens mijn verdomde belasting.</span>
</div><div class='code-line code-line-26'>
</div><div class='code-line code-line-27'><span style="color: #0a3069">    het werkt op een csv die eruitziet als</span>
</div><div class='code-line code-line-28'>
</div><div class='code-line code-line-29'><span style="color: #0a3069">      Transactie Nummer,Datum,Omschrijving,Memo,Bedrag Debet,Bedrag Credit ,Saldo,Cheque Nummer, Kosten  </span>
</div><div class='code-line code-line-30'><span style="color: #0a3069">      "20121231000000[-7:MST]*-9.99*42**Opname",12/31/2012,"Opname","Amazon Video On Demand 866-216-1072 WA Datum 12/29/12 000031828826 5735",-9.99, ,"492.93",,</span>
</div><div class='code-line code-line-31'><span style="color: #0a3069">      "20121231000000[-7:MST]*-4000.00*12**Opname Thuisbankieren",12/31/2012,"Opname Thuisbankieren","Overboeking Naar HOWARD,ARA T 0000133543 Deel 0008 Online Bankieren Overboeking Dec. 31, 2012 09:37 Ref: 325989",-4000.00, ,"502.92",,</span>
</div><div class='code-line code-line-32'><span style="color: #0a3069">      "20121231000000[-7:MST]*4393.89*501**Storting DOJO4 LLC",12/31/2012,"Storting DOJO4 LLC","TYPE: QUICKBOOKS ID: 1722616653 CO: DOJO4 LLC",,4393.89 ,"4502.92",,</span>
</div><div class='code-line code-line-33'><span style="color: #0a3069">      "20121227000000[-7:MST]*-17.99*42**Opname",12/27/2012,"Opname","WWW.RDIOCHARGE.COM 877-7346843 CA Datum 12/26/12 900017146258 8699",-17.99, ,"122.02",,</span>
</div><div class='code-line code-line-34'><span style="color: #0a3069">      ...</span>
</div><div class='code-line code-line-35'>
</div><div class='code-line code-line-36'><span style="color: #0a3069">    veel banken kunnen deze exporteren</span>
</div><div class='code-line code-line-37'>
</div><div class='code-line code-line-38'><span style="color: #0a3069">    na het gebruik ervan zal het bestand er ongeveer als volgt uitzien</span>
</div><div class='code-line code-line-39'>
</div><div class='code-line code-line-40'><span style="color: #0a3069">      TRANSACTIE_NUMMER,DATUM,OMSCHRIJVING,MEMO,BEDRAG_DEBET,BEDRAG_CREDIT,SALDO,CHEQUE_NUMMER,KOSTEN,CATEGORIE</span>
</div><div class='code-line code-line-41'><span style="color: #0a3069">      20121015000000[-7:MST]*-3.00*21**Overboekingskosten,10/15/2012,Overboekingskosten,"",-3.00,"",9.99,,,kosten</span>
</div><div class='code-line code-line-42'><span style="color: #0a3069">      ...</span>
</div><div class='code-line code-line-43'>
</div><div class='code-line code-line-44'><span style="color: #0a3069">    wat betekent dat het een kolom CATEGORIE zal hebben en alle rijen gecategoriseerd zullen zijn</span>
</div><div class='code-line code-line-45'>
</div><div class='code-line code-line-46'><span style="color: #0a3069">    het maakt zich echt niet al te veel zorgen over de gegevens, alleen maar over √©√©n veld om</span>
</div><div class='code-line code-line-47'><span style="color: #0a3069">    te sorteren. Standaard is dit het veld 'Memo', maar het script maakt zich er echt niet van zorgen als het ontbreekt. Bovendien kun je het sorteerveld specificeren met</span>
</div><div class='code-line code-line-48'><span style="color: #0a3069">    '--sort' en je zult waarschijnlijk willen omdat de standaardmodus je laatste selectie onthoudt en het als standaard biedt terwijl je categorie√´n bewerkt.</span>
</div><div class='code-line code-line-49'><span style="color: #0a3069">    let op dat het script het invoerbestand destructief overschrijft, dus maak een backup als je echt zorgen maakt. Nee, het doet, maar het is toch goed om te weten dat het</span>
</div><div class='code-line code-line-50'><span style="color: #0a3069">    overschrijft om een bewerksessie voort te zetten.</span>
</div><div class='code-line code-line-51'>
</div><div class='code-line code-line-52'><span style="color: #0a3069">    merk op dat het script het invoerbestand destructief overschrijft, dus maak een backup als je er echt om geeft. Nee, het doet dat, maar het is toch goed om te weten dat het</span>
</div><div class='code-line code-line-53'><span style="color: #0a3069">    overschrijft om een bewerksessie voort te zetten.</span>
</div><div class='code-line code-line-54'>
</div><div class='code-line code-line-55'>
</div><div class='code-line code-line-56'>
</div><div class='code-line code-line-57'><span style="color: #953800">  __</span>
</div><div class='code-line code-line-58'>
</div><div class='code-line code-line-59'>&nbsp;&nbsp;<span style="color: #24292f;background-color: #f6f8fa">argument</span><span style="color: #24292f;background-color: #f6f8fa">(</span><span style="color: #0a3069">:transacties</span><span style="color: #24292f;background-color: #f6f8fa">)</span>
</div><div class='code-line code-line-60'>
</div><div class='code-line code-line-61'>&nbsp;&nbsp;<span style="color: #24292f;background-color: #f6f8fa">optie</span><span style="color: #24292f;background-color: #f6f8fa">(</span><span style="color: #0a3069">:doorgaan</span><span style="color: #24292f;background-color: #f6f8fa">,</span>&nbsp;<span style="color: #0a3069">:d</span><span style="color: #24292f;background-color: #f6f8fa">)</span>
</div><div class='code-line code-line-62'>
</div><div class='code-line code-line-63'>&nbsp;&nbsp;<span style="color: #24292f;background-color: #f6f8fa">optie</span><span style="color: #24292f;background-color: #f6f8fa">(</span><span style="color: #0a3069">:sorteren</span><span style="color: #24292f;background-color: #f6f8fa">,</span>&nbsp;<span style="color: #0a3069">:s</span><span style="color: #24292f;background-color: #f6f8fa">){</span>
</div><div class='code-line code-line-64'>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #24292f;background-color: #f6f8fa">standaard</span>&nbsp;<span style="color: #0a3069">'MEMO'</span>
</div><div class='code-line code-line-65'>&nbsp;&nbsp;<span style="color: #24292f;background-color: #f6f8fa">}</span>
</div><div class='code-line code-line-66'>
</div><div class='code-line code-line-67'>&nbsp;&nbsp;<span style="color: #24292f;background-color: #f6f8fa">optie</span><span style="color: #24292f;background-color: #f6f8fa">(</span><span style="color: #0a3069">:categorie√´n</span><span style="color: #24292f;background-color: #f6f8fa">){</span>
</div><div class='code-line code-line-68'>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #24292f;background-color: #f6f8fa">standaard</span>&nbsp;<span style="color: #0550ae">&lt;&lt;-</span><span style="color: #953800">__</span>
</div><div class='code-line code-line-69'>
</div><div class='code-line code-line-70'><span style="color: #0a3069">      kosten/klant</span>
</div><div class='code-line code-line-71'><span style="color: #0a3069">      kosten/klant/maaltijden</span>
</div><div class='code-line code-line-72'><span style="color: #0a3069">      kosten/klant/vermaak</span>
</div><div class='code-line code-line-73'>
</div><div class='code-line code-line-74'><span style="color: #0a3069">      kosten/kantoor</span>
</div><div class='code-line code-line-75'><span style="color: #0a3069">      kosten/kantoor/internet</span>
</div><div class='code-line code-line-76'><span style="color: #0a3069">      kosten/kantoor/telefoon</span>
</div><div class='code-line code-line-77'><span style="color: #0a3069">      kosten/kantoor/voorraad</span>
</div><div class='code-line code-line-78'><span style="color: #0a3069">      kosten/kantoor/onderhoud</span>
</div><div class='code-line code-line-79'>
</div><div class='code-line code-line-80'><span style="color: #0a3069">      kosten/software</span>
</div><div class='code-line code-line-81'><span style="color: #0a3069">      kosten/software/service</span>
</div><div class='code-line code-line-82'><span style="color: #0a3069">      kosten/software/licentie</span>
</div><div class='code-line code-line-83'>
</div><div class='code-line code-line-84'><span style="color: #0a3069">      kosten/hardware</span>
</div><div class='code-line code-line-85'>
</div><div class='code-line code-line-86'><span style="color: #0a3069">      inkomen</span>
</div><div class='code-line code-line-87'><span style="color: #0a3069">      salaris</span>
</div><div class='code-line code-line-88'><span style="color: #0a3069">      overboeking</span>
</div><div class='code-line code-line-89'><span style="color: #0a3069">      lening</span>
</div><div class='code-line code-line-90'><span style="color: #0a3069">      kosten</span>
</div><div class='code-line code-line-91'>
</div><div class='code-line code-line-92'><span style="color: #0a3069">      bier</span>
</div><div class='code-line code-line-93'>
</div><div class='code-line code-line-94'><span style="color: #0a3069">      ongecategoriseerd</span>
</div><div class='code-line code-line-95'><span style="color: #953800">    __</span>
</div><div class='code-line code-line-96'>&nbsp;&nbsp;<span style="color: #24292f;background-color: #f6f8fa">}</span>
</div><div class='code-line code-line-97'>
</div><div class='code-line code-line-98'>&nbsp;&nbsp;<span style="color: #cf222e">def</span>&nbsp;<span style="color: #8250df">run</span>
</div><div class='code-line code-line-99'>&nbsp;&nbsp;<span style="color: #6e7781"># setup</span>
</div><div class='code-line code-line-100'>&nbsp;&nbsp;<span style="color: #6e7781">#</span>
</div><div class='code-line code-line-101'>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #0550ae">@categorie√´n</span>&nbsp;<span style="color: #0550ae">=</span>&nbsp;<span style="color: #953800">Coerce</span><span style="color: #24292f;background-color: #f6f8fa">.</span><span style="color: #8250df">lijst_van_strings</span><span style="color: #24292f;background-color: #f6f8fa">(</span><span style="color: #24292f;background-color: #f6f8fa">params</span><span style="color: #24292f;background-color: #f6f8fa">[</span><span style="color: #0a3069">:categorie√´n</span><span style="color: #24292f;background-color: #f6f8fa">].</span><span style="color: #8250df">waarden</span><span style="color: #24292f;background-color: #f6f8fa">)</span>
</div><div class='code-line code-line-102'>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #0550ae">@transacties</span>&nbsp;<span style="color: #0550ae">=</span>&nbsp;<span style="color: #24292f;background-color: #f6f8fa">params</span><span style="color: #24292f;background-color: #f6f8fa">[</span><span style="color: #0a3069">:transacties</span><span style="color: #24292f;background-color: #f6f8fa">].</span><span style="color: #8250df">waarde</span>
</div><div class='code-line code-line-103'>
</div><div class='code-line code-line-104'>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #0550ae">@velden</span>&nbsp;<span style="color: #0550ae">=</span>&nbsp;<span style="color: #24292f;background-color: #f6f8fa">[]</span>&nbsp;
</div><div class='code-line code-line-105'>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #0550ae">@rijen</span>&nbsp;<span style="color: #0550ae">=</span>&nbsp;<span style="color: #24292f;background-color: #f6f8fa">[]</span>
</div><div class='code-line code-line-106'>
</div><div class='code-line code-line-107'>&nbsp;&nbsp;<span style="color: #6e7781"># par