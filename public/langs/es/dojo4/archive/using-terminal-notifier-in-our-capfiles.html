<!DOCTYPE html>
<html color-mode="user" lang="es">
  <head>
    <base href='/es' />
    <!-- ga -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-DQVD9T27V4"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-DQVD9T27V4');
    </script>

    <!-- deps -->
    <script type="module" src="/assets/js/turbo.es2017-esm.js" defer></script>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.fluid.classless.fuchsia.min.css"
    >

    <!-- defaults -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="color-scheme" content="light dark" />

    <!-- favicon -->
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">

    <!-- meta -->
    <title>usando terminal notifier en nuestros capfiles</title>

    <meta property="og:title" content="usando terminal notifier en nuestros capfiles"/>
    <meta property="og:description" content="sigue adelante." />
    <meta property="og:image" content="https://drawohara.io/media/mick.jpg" />

    <meta property="og:image:type" content="image/jpeg" />

    <meta property="site:route" content="/dojo4/archive/:id">
    <meta property="site:params" content="{"ext":null,"id":"using-terminal-notifier-in-our-capfiles"}">
    <meta property="site:path_info" content="/using-terminal-notifier-in-our-capfiles">

    <style>
      /* anti pico */
      a {text-decoration: none !important; }

      /* anti turbo */
      html { transition: none !important; }
      .turbo-progress-bar { visibility: hidden; }

      /* anti progressive */
      html { margin: 1em; }
      img { display: block; text-align: center; }
    </style>

    <script>
      document.addEventListener("turbo:load", function() {
        const progressBar = document.querySelector('.turbo-progress-bar');
        if (progressBar) {
          progressBar.remove();
        }
      });
    </script>
  </head>

  <body>
    <header>
      <a href="/home">@drawohara</a>
      <hr>
    </header>

    <main>
      <div class="ro markdown">
        <p>Usamos <a href="http://www.capistranorb.com/">capistrano</a> para nuestras implementaciones y recientemente me encontré con la increíble <a href="https://github.com/alloy/terminal-notifier">terminal-notifier</a> gema que usa las notificaciones de usuario en OS X 10.8 y superiores para mostrar una notificación agradable desde la línea de comandos. Siempre que implemento, estoy verificando manualmente si la implementación ha terminado, y esta es una buena solución para evitar eso. Un problema que encontré, sin embargo, cuando lo agregué a uno de nuestros proyectos es que algunas personas en nuestro equipo están usando una versión de Mac OS X <em>anterior</em> a 10.8 (¡Lo sé!), por lo que el comando <code>terminal-notifier</code> fallaría y su implementación tendría errores. Así que aquí está el código que uso ahora para asegurarme de que no aparezcan errores si no puedes usar las notificaciones de usuario en las versiones más nuevas de OS X:</p>

        <div class="language-ruby highlighter-rouge"><code class='code' style='white-space:pre;'><div class='code-line code-line-1'><span style="color: #24292f;background-color: #f6f8fa">desc</span>&nbsp;<span style="color: #0a3069">'use terminal notifier si en &gt; osx 10.8 para usar una alerta de usuario'</span>
        </div><div class='code-line code-line-2'><span style="color: #24292f;background-color: #f6f8fa">task</span>&nbsp;<span style="color: #0a3069">:terminal</span>&nbsp;<span style="color: #cf222e">do</span>
        </div><div class='code-line code-line-3'>&nbsp;<span style="color: #cf222e">begin</span>
        </div><div class='code-line code-line-4'>&nbsp;&nbsp;<span style="color: #953800">require</span>&nbsp;<span style="color: #0a3069">'terminal-notifier'</span>
        </div><div class='code-line code-line-5'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #24292f;background-color: #f6f8fa">url</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #0550ae">=</span>&nbsp;<span style="color: #24292f;background-color: #f6f8fa">fetch</span><span style="color: #24292f;background-color: #f6f8fa">(</span><span style="color: #0a3069">:url</span><span style="color: #24292f;background-color: #f6f8fa">)</span>
        </div><div class='code-line code-line-6'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #24292f;background-color: #f6f8fa">application</span>&nbsp;<span style="color: #0550ae">=</span>&nbsp;<span style="color: #24292f;background-color: #f6f8fa">fetch</span><span style="color: #24292f;background-color: #f6f8fa">(</span><span style="color: #0a3069">:application</span><span style="color: #24292f;background-color: #f6f8fa">)</span>
        </div><div class='code-line code-line-7'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #953800">system</span>&nbsp;<span style="color: #0a3069">"terminal-notifier -title </span><span style="color: #24292f">#{</span>&nbsp;<span style="color: #24292f;background-color: #f6f8fa">application</span>&nbsp;<span style="color: #24292f">}</span><span style="color: #0a3069"> -message 'Deploy completed successfully to </span><span style="color: #24292f">#{</span>&nbsp;<span style="color: #24292f;background-color: #f6f8fa">url</span>&nbsp;<span style="color: #24292f">}</span><span style="color: #0a3069">.' -sound default"</span>
        </div><div class='code-line code-line-8'>&nbsp;<span style="color: #cf222e">rescue</span>&nbsp;<span style="color: #953800">LoadError</span>
        </div><div class='code-line code-line-9'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #953800">warn</span>&nbsp;<span style="color: #0a3069">"Probablemente no estés en OS X 10.8, así que no se usa terminal notifier. Si estás, usa gem install terminal-notifier para usar algunas notificaciones de usuario increíbles."</span>
        </div><div class='code-line code-line-10'>&nbsp;<span style="color: #cf222e">end</span>
        </div><div class='code-line code-line-11'><span style="color: #cf222e">end</span>
        </div></code></div>

        <p>Obviamente también incluimos <code>gem terminal-notifier</code> en nuestro Gemfile. Ver <a href="http://stackoverflow.com/questions/20885606/dangers-of-putting-a-gem-into-a-gemfile-is-someone-trying-to-install-it-doesnt">mi pregunta en SO</a> sobre incluir esta gema en tu gemfile para una explicación de por qué estoy usando la simple declaración de inclusión de gema.</p>
      </div>
    </main>

    <footer>
      <hr>
      <a href="/goto" name="goto">&mdash;&gt; ir</a>
      <blockquote>
        <ul>
          <li>
            <a href="/about">acerca<a>
          </li>
          <li>
            <a href="mailto:i-hate-this@drawohara.io?subject=/using-terminal-notifier-in-our-capfiles">odio-esto<a>
          </li>
          <li>
            <a href="mailto:i-love-this@drawohara.io?subject=/using-terminal-notifier-in-our-capfiles">amo-esto<a>
          </li>
          <li>
            <a href="/contact">contacto<a>
          </li>
        </ul>
      </blockquote>
      <a href="/">&lt;&mdash; salir</a>
    </footer>
  </body>
</html>