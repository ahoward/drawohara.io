<html color-mode="user" lang="uk">
  <head>
  <base href='/langs/uk' />
  <!-- ga -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-DQVD9T27V4"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-DQVD9T27V4');
</script>

  <!-- deps -->
    <script type="module" src="/assets/js/turbo.es2017-esm.js" defer></script>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.fluid.classless.fuchsia.min.css"
    >

  <!-- langs -->
  <!--
    https://developers.google.com/search/docs/specialty/international/localized-versions#html
  -->
   <link rel="alternate" hreflang="en" href="/" />
   <link rel="alternate" hreflang="uk" href="https://drawohara.io/langs/uk" />
   <link rel="alternate" hreflang="sv" href="https://drawohara.io/langs/sv" />
   <link rel="alternate" hreflang="fr" href="https://drawohara.io/langs/fr" />
   <link rel="alternate" hreflang="es" href="https://drawohara.io/langs/es" />
   <link rel="alternate" hreflang="it" href="https://drawohara.io/langs/it" />

  <!-- defaults -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="color-scheme" content="light dark" />

  <!-- favicon -->
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">

  <!-- meta -->
    <title>—Ç—É—Ç –Ω–µ–º–∞—î –Ω—ñ—á–æ–≥–æ –¥–∏–≤–∏—Ç–∏—Å—è.</title>

<meta property="og:title" content="—Ç—É—Ç –Ω–µ–º–∞—î –Ω—ñ—á–æ–≥–æ –¥–∏–≤–∏—Ç–∏—Å—è."/>
<meta property="og:description" content="–ø–µ—Ä–µ—Ö–æ–¥—å—Ç–µ –¥–∞–ª—ñ." />
<meta property="og:image" content="https://drawohara.io/media/mick.jpg" />




  <meta property="og:image:type" content="image/jpeg" />

    <meta property="site:route" content=""/dojo4/archive/:id"">
    <meta property="site:params" content="{"ext":null,"id":"dangling-rpc-fruit-off-of-your-rails-controllers"}">
    <meta property="site:path_info" content=""/dangling-rpc-fruit-off-of-your-rails-controllers"">

    <style>
      /* anti pico */
      a {text-decoration: none !important; }

      /* anti turbo */
      html { transition: none !important; }
      .turbo-progress-bar { visibility: hidden; }

      /* anti progressive */
      html { margin: 1em; }
      img { display: block; text-align: center; }
    </style>

    <script>
      document.addEventListener("turbo:load", function() {
        const progressBar = document.querySelector('.turbo-progress-bar');
        if (progressBar) { progressBar.remove(); }
      });
    </script>
  </head>

  <body>
    <header>
      <a href="/home">@drawohara</a> &mdash;
<a href="mailto:i-love-this@drawohara.io?subject=/dangling-rpc-fruit-off-of-your-rails-controllers">—è ‚ù§Ô∏è —Ü–µ!</a>
<small>
  <small>
    <small>
      <span title='–≤–∏–ø–∏–π –º–µ–Ω–µ'>&lt;&lt; –∫–ª—ñ–∫–Ω–∏ –º–µ–Ω–µ üêõ ü´ñ üßö</a>
    </small>
  </small>
</small>
<hr>
<strong>/dangling-rpc-fruit-off-of-your-rails-controllers</strong>
    </header>

    <main>
      <em>–æ–ø—É–±–ª—ñ–∫–æ–≤–∞–Ω–æ: 2013-11-05</em>
<br>
<br>
<div class="ro markdown">
  <p>–ø—Ä–∏ —Ä–æ–±–æ—Ç—ñ –∑ –±—É–¥—å-—è–∫–∏–º –¥–æ–¥–∞—Ç–∫–æ–º Rails, —â–æ –Ω–µ —î "hello-world", –Ω–µ–º–∏–Ω—É—á–µ –ø–æ—Ç—Ä—ñ–±–Ω—ñ –Ω–µ–≤–µ–ª–∏–∫—ñ AJAX-–¥–æ–ø–æ–º—ñ–∂–Ω–∏–∫–∏ –¥–ª—è —Å–ø—ñ–ª–∫—É–≤–∞–Ω–Ω—è –∑ —Å–µ—Ä–≤–µ—Ä–æ–º, —â–æ–± –≤–∏–∫–æ–Ω—É–≤–∞—Ç–∏ –ª–æ–≥—ñ–∫—É –Ω–∞ —Å—Ç–æ—Ä–æ–Ω—ñ –∫–ª—ñ—î–Ω—Ç–∞. —è –Ω–µ –º–∞—é –Ω–∞ —É–≤–∞–∑—ñ API —è–∫ —Ç–∞–∫–∏–π, –∞ —Ä–∞–¥—à–µ –∞–¥—Ö–æ–∫ —É—Ç–∏–ª—ñ—Ç–∏, —Ç–∞–∫—ñ —è–∫ —Ü—ñ:</p>

<div class="language-javascript highlighter-rouge"><code class='code' style='white-space:pre;'><div class='code-line code-line-1'>
</div><div class='code-line code-line-2'><span style="color: #24292f;background-color: #f6f8fa">markdown</span><span style="color: #24292f;background-color: #f6f8fa">.</span><span style="color: #8250df">change</span><span style="color: #24292f;background-color: #f6f8fa">(</span><span style="color: #cf222e">function</span><span style="color: #24292f;background-color: #f6f8fa">(){</span>
</div><div class='code-line code-line-3'>
</div><div class='code-line code-line-4'>&nbsp;&nbsp;<span style="color: #8250df">generate_html_on_the_server</span><span style="color: #24292f;background-color: #f6f8fa">(</span>&nbsp;<span style="color: #24292f;background-color: #f6f8fa">markdown</span><span style="color: #24292f;background-color: #f6f8fa">.</span><span style="color: #8250df">val</span><span style="color: #24292f;background-color: #f6f8fa">(),</span>&nbsp;<span style="color: #cf222e">function</span><span style="color: #24292f;background-color: #f6f8fa">(</span><span style="color: #24292f;background-color: #f6f8fa">html</span><span style="color: #24292f;background-color: #f6f8fa">){</span>
</div><div class='code-line code-line-5'>&nbsp;&nbsp;
</div><div class='code-line code-line-6'>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #24292f;background-color: #f6f8fa">preview</span><span style="color: #24292f;background-color: #f6f8fa">.</span><span style="color: #8250df">html</span><span style="color: #24292f;background-color: #f6f8fa">(</span><span style="color: #24292f;background-color: #f6f8fa">html</span><span style="color: #24292f;background-color: #f6f8fa">);</span>
</div><div class='code-line code-line-7'>&nbsp;&nbsp;
</div><div class='code-line code-line-8'>&nbsp;&nbsp;<span style="color: #24292f;background-color: #f6f8fa">});</span>
</div><div class='code-line code-line-9'>
</div><div class='code-line code-line-10'><span style="color: #24292f;background-color: #f6f8fa">});</span>
</div><div class='code-line code-line-11'>
</div></code></div>

<p>–∞–±–æ</p>

<div class="language-javascript highlighter-rouge"><code class='code' style='white-space:pre;'><div class='code-line code-line-1'>
</div><div class='code-line code-line-2'>
</div><div class='code-line code-line-3'><span style="color: #24292f;background-color: #f6f8fa">reservation</span><span style="color: #24292f;background-color: #f6f8fa">.</span><span style="color: #8250df">change</span><span style="color: #24292f;background-color: #f6f8fa">(</span><span style="color: #cf222e">function</span><span style="color: #24292f;background-color: #f6f8fa">(){</span>
</div><div class='code-line code-line-4'>
</div><div class='code-line code-line-5'>
</div><div class='code-line code-line-6'>&nbsp;&nbsp;<span style="color: #8250df">check_availibity_on_the_server</span><span style="color: #24292f;background-color: #f6f8fa">(</span>&nbsp;<span style="color: #24292f;background-color: #f6f8fa">reservation</span><span style="color: #24292f;background-color: #f6f8fa">.</span><span style="color: #8250df">val</span><span style="color: #24292f;background-color: #f6f8fa">(),</span>&nbsp;<span style="color: #cf222e">function</span><span style="color: #24292f;background-color: #f6f8fa">(</span><span style="color: #24292f;background-color: #f6f8fa">data</span><span style="color: #24292f;background-color: #f6f8fa">){</span>
</div><div class='code-line code-line-7'>&nbsp;&nbsp;
</div><div class='code-line code-line-8'>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #cf222e">if</span><span style="color: #24292f;background-color: #f6f8fa">(</span><span style="color: #0550ae">!</span><span style="color: #24292f;background-color: #f6f8fa">data</span><span style="color: #24292f;background-color: #f6f8fa">[</span><span style="color: #0a3069">'</span><span style="color: #0a3069">available</span><span style="color: #0a3069">'</span><span style="color: #24292f;background-color: #f6f8fa">]){</span>
</div><div class='code-line code-line-9'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</div><div class='code-line code-line-10'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #8250df">alert</span><span style="color: #24292f;background-color: #f6f8fa">(</span><span style="color: #0a3069">'</span><span style="color: #0a3069">–¶–µ–π —á–∞—Å –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∏–π - –≤–∏–±–µ—Ä—ñ—Ç—å —ñ–Ω—à–∏–π!</span><span style="color: #0a3069">'</span><span style="color: #24292f;background-color: #f6f8fa">);</span>
</div><div class='code-line code-line-11'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</div><div class='code-line code-line-12'>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #24292f;background-color: #f6f8fa">};</span>
</div><div class='code-line code-line-13'>&nbsp;&nbsp;<span style="color: #24292f;background-color: #f6f8fa">})</span>
</div><div class='code-line code-line-14'>
</div><div class='code-line code-line-15'><span style="color: #24292f;background-color: #f6f8fa">});</span>
</div><div class='code-line code-line-16'>
</div><div class='code-line code-line-17'>
</div></code></div>

<p>—ñ —Ç.–¥.</p>

<p>–¶—ñ —Ç–∏–ø–∏ —Ñ—É–Ω–∫—Ü—ñ–π –Ω–µ —î —á–∞—Å—Ç–∏–Ω–æ—é —Å–µ—Ä–≤–µ—Ä–Ω–æ-—Å–µ—Ä–≤–µ—Ä–Ω–æ–≥–æ –ø—É–±–ª—ñ—á–Ω–æ–≥–æ API, —Ü–µ –ø—Ä–æ—Å—Ç–æ —Å–ø—ñ–≤–ø—Ä–∞—Ü—é—é—á—ñ JS/–±–µ–∫–µ–Ω–¥-–µ–Ω–¥–ø–æ—ñ–Ω—Ç–∏, —è–∫—ñ –ø–æ—Ç—Ä—ñ–±–Ω—ñ –¥–ª—è —Ä–æ–±–æ—Ç–∏ –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è.</p>

<p>–ë—ñ–ª—å—à—ñ—Å—Ç—å –¥–æ–¥–∞—Ç–∫—ñ–≤ Rails –Ω–∞–∫–æ–ø–∏—á—É—é—Ç—å –±–∞–≥–∞—Ç–æ —Ç–∞–∫–∏—Ö —Ñ—É–Ω–∫—Ü—ñ–π, —ñ –≤–∏–Ω–∏–∫–∞—î –ø–∏—Ç–∞–Ω–Ω—è:</p>

<p>‚Äú–ö—É–¥–∏ —ó—Ö –ø–æ–º—ñ—Å—Ç–∏—Ç–∏?‚Äù</p>

<p>–£ –±—ñ–ª—å—à–æ—Å—Ç—ñ –∫–æ–º–∞–Ω–¥ –±—É–¥–µ —Ç—Ä–∏ –∞–±–æ —á–æ—Ç–∏—Ä–∏ —Ä–æ–∑—Ä–æ–±–Ω–∏–∫–∏, —è–∫—ñ –Ω–∞–∑–∏–≤–∞—é—Ç—å —Ç–∞ –æ—Ä–≥–∞–Ω—ñ–∑–æ–≤—É—é—Ç—å —Ü—ñ —Ñ—É–Ω–∫—Ü—ñ—ó –ø–æ-—Ä—ñ–∑–Ω–æ–º—É, –∑–∞–±–µ–∑–ø–µ—á—É—é—á–∏, —â–æ–± –∫–æ–¥–æ–≤–∞ –±–∞–∑–∞ –ø–µ—Ä–µ—Ç–≤–æ—Ä–∏–ª–∞—Å—è –Ω–∞ –±–µ–∑–ª–∞–¥–Ω—É –º–∞–∫–∞—Ä–æ–Ω–∏–Ω–Ω—É —Å—É–º—ñ—à –≤ –Ω–∞–π–∫–æ—Ä–æ—Ç—à—ñ —Ç–µ—Ä–º—ñ–Ω–∏.</p>

<p>@dojo4 –º–∏ –∞–±—Å—Ç—Ä–∞–≥—É–≤–∞–ª–∏ —Ü–µ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é –Ω–µ–≤–µ–ª–∏–∫–æ–≥–æ —à–∞–±–ª–æ–Ω—É –ø—Ä–æ–µ–∫—Ç—É–≤–∞–Ω–Ω—è RPC: —Å–ø–æ—á–∞—Ç–∫—É –º–∏ –º–∞—î–º–æ –Ω–µ–≤–µ–ª–∏–∫–∏–π DSL –∫–æ–Ω—Ç—Ä–æ–ª–µ—Ä–∞, —è–∫–∏–π –≤–∫–ª—é—á–µ–Ω–∏–π –¥–æ –Ω–∞—à–æ–≥–æ ApplicationController, —â–æ –¥–æ–∑–≤–æ–ª—è—î –¥–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω—ñ –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è –¥–æ–ø–æ–º—ñ–∂–Ω–∏–∫—ñ–≤ JS 'rpc' –Ω–∞ –æ—Å–Ω–æ–≤—ñ –∫–æ–∂–Ω–æ–≥–æ –∫–æ–Ω—Ç—Ä–æ–ª–µ—Ä–∞.</p>

<div class="language-ruby highlighter-rouge"><code class='code' style='white-space:pre;'><div class='code-line code-line-1'>
</div><div class='code-line code-line-2'><span style="color: #cf222e">class</span>&nbsp;<span style="color: #953800">ApplicationController</span>&nbsp;<span style="color: #0550ae">&lt;</span>&nbsp;<span style="color: #953800">ActionController</span><span style="color: #0550ae">::</span><span style="color: #953800">Base</span>
</div><div class='code-line code-line-3'>
</div><div class='code-line code-line-4'>&nbsp;&nbsp;<span style="color: #cf222e">include</span><span style="color: #24292f;background-color: #f6f8fa">(</span><span style="color: #953800">RPC</span><span style="color: #24292f;background-color: #f6f8fa">)</span>
</div><div class='code-line code-line-5'>
</div><div class='code-line code-line-6'><span style="color: #cf222e">end</span>
</div><div class='code-line code-line-7'>
</div><div class='code-line code-line-8'>
</div></code></div>

<p>–æ–∑–Ω–∞–π–æ–º—Ç–µ—Å—å –∑ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—î—é —Ç—É—Ç: https://gist.github.com/ahoward/7320900</p>

<p>–ø—Ä–æ—Å—Ç–æ—é –∞–Ω–≥–ª—ñ–π—Å—å–∫–æ—é –º–æ–≤–æ—é —Ü–µ–π dsl –ø—Ä–æ—Å—Ç–æ –≤–∏–∑–Ω–∞—á–∏–≤ –æ–¥–Ω—É –¥—ñ—é –Ω–∞ –∫–æ–Ω—Ç—Ä–æ–ª–µ—Ä—ñ, —è–∫–∞ –º—É–ª—å—Ç–∏–ø–ª–µ–∫—Å—É—î, —è–∫–∏–π –º–µ—Ç–æ–¥ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –Ω–∞ –æ—Å–Ω–æ–≤—ñ –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤, —ñ –ª–µ–≥–∫–∏–π —Å–ø–æ—Å—ñ–± –≤–∏–∑–Ω–∞—á–∏—Ç–∏ —ó—Ö. –≤—ñ–Ω –æ—á—ñ–∫—É—î, —â–æ –≤—Å—ñ –¥—ñ—ó rpc –ø–æ–≤–µ—Ä–Ω—É—Ç—å —Ö–µ—à —ñ –ø–æ–≤–µ—Ä–Ω—É—Ç—å json.</p>

<p>–π–æ–≥–æ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è –∑–≤–æ–¥–∏—Ç—å—Å—è –¥–æ</p>

<div class="language-ruby highlighter-rouge"><code class='code' style='white-space:pre;'><div class='code-line code-line-1'>
</div><div class='code-line code-line-2'>&nbsp;&nbsp;<span style="color: #cf222e">def</span>&nbsp;<span style="color: #8250df">rpc</span>
</div><div class='code-line code-line-3'>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #24292f;background-color: #f6f8fa">which</span>&nbsp;<span style="color: #0550ae">=</span>&nbsp;<span style="color: #24292f;background-color: #f6f8fa">params</span><span style="color: #24292f;background-color: #f6f8fa">[</span><span style="color: #0a3069">'method'</span><span style="color: #24292f;background-color: #f6f8fa">]</span>
</div><div class='code-line code-line-4'>&nbsp;&nbsp;&nbsp;&nbsp;
</div><div class='code-line code-line-5'>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #24292f;background-color: #f6f8fa">action</span>&nbsp;<span style="color: #0550ae">=</span>&nbsp;<span style="color: #0550ae">@rpc</span><span style="color: #24292f;background-color: #f6f8fa">[</span><span style="color: #24292f;background-color: #f6f8fa">which</span><span style="color: #24292f;background-color: #f6f8fa">]</span>
</div><div class='code-line code-line-6'>&nbsp;&nbsp;&nbsp;&nbsp;
</div><div class='code-line code-line-7'>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #24292f;background-color: #f6f8fa">result</span>&nbsp;<span style="color: #0550ae">=</span>&nbsp;<span style="color: #24292f;background-color: #f6f8fa">action</span><span style="color: #24292f;background-color: #f6f8fa">.</span><span style="color: #8250df">call</span><span style="color: #24292f;background-color: #f6f8fa">(</span><span style="color: #24292f;background-color: #f6f8fa">params</span><span style="color: #24292f;background-color: #f6f8fa">)</span>
</div><div class='code-line code-line-8'>&nbsp;&nbsp;&nbsp;&nbsp;
</div><div class='code-line code-line-9'>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #24292f;background-color: #f6f8fa">render</span>&nbsp;<span style="color: #0a3069">:json</span>&nbsp;<span style="color: #0550ae">=&gt;</span>&nbsp;<span style="color: #24292f;background-color: #f6f8fa">result</span><span style="color: #24292f;background-color: #f6f8fa">.</span><span style="color: #8250df">to_json</span>
</div><div class='code-line code-line-10'>&nbsp;&nbsp;<span style="color: #cf222e">end</span>
</div><div class='code-line code-line-11'>
</div><div class='code-line code-line-12'>
</div></code></div>

<p>–π–æ–≥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –º–∞—î –±—É—Ç–∏ –æ—á–µ–≤–∏–¥–Ω–∏–º –∑ –∫–æ–¥—É</p>

<div class="language-ruby highlighter-rouge"><code class='code' style='white-space:pre;'><div class='code-line code-line-1'>
</div><div class='code-line code-line-2'><span style="color: #cf222e">class</span>&nbsp;<span style="color: #953800">GeoLocationController</span>&nbsp;<span style="color: #0550ae">&lt;</span>&nbsp;<span style="color: #953800">ApplicationController</span>
</div><div class='code-line code-line-3'>
</div><div class='code-line code-line-4'>&nbsp;&nbsp;<span style="color: #24292f;background-color: #f6f8fa">rpc</span><span style="color: #24292f;background-color: #f6f8fa">(</span><span style="color: #0a3069">:geo_location</span><span style="color: #24292f;background-color: #f6f8fa">)</span>&nbsp;<span style="color: #cf222e">do</span>&nbsp;<span style="color: #0550ae">|</span><span style="color: #24292f;background-color: #f6f8fa">params</span><span style="color: #0550ae">|</span>
</div><div class='code-line code-line-5'>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #24292f;background-color: #f6f8fa">geo_location</span>&nbsp;<span style="color: #0550ae">=</span>&nbsp;<span style="color: #953800">GeoLocation</span><span style="color: #24292f;background-color: #f6f8fa">.</span><span style="color: #8250df">geo_locate</span><span style="color: #24292f;background-color: #f6f8fa">(</span>&nbsp;<span style="color: #24292f;background-color: #f6f8fa">params</span><span style="color: #24292f;background-color: #f6f8fa">[</span><span style="color: #0a3069">'address'</span><span style="color: #24292f;background-color: #f6f8fa">]</span>&nbsp;<span style="color: #24292f;background-color: #f6f8fa">)</span>
</div><div class='code-line code-line-6'>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #24292f;background-color: #f6f8fa">geo_location</span><span style="color: #24292f;background-color: #f6f8fa">.</span><span style="color: #8250df">attributes</span>
</div><div class='code-line code-line-7'>&nbsp;&nbsp;<span style="color: #cf222e">end</span>
</div><div class='code-line code-line-8'>&nbsp;&nbsp;
</div><div class='code-line code-line-9'>&nbsp;&nbsp;<span style="color: #24292f;background-color: #f6f8fa">rpc</span><span style="color: #24292f;background-color: #f6f8fa">(</span><span style="color: #0a3069">:lat_lng</span><span style="color: #24292f;background-color: #f6f8fa">)</span>&nbsp;<span style="color: #cf222e">do</span>&nbsp;<span style="color: #0550ae">|</span><span style="color: #24292f;background-color: #f6f8fa">params</span><span style="color: #0550ae">|</span>
</div><div class='code-line code-line-10'>&nbsp;&nbsp;&nbsp;<span style="color: #24292f;background-color: #f6f8fa">geo_location</span>&nbsp;<span style="color: #0550ae">=</span>&nbsp;<span style="color: #953800">GeoLocation</span><span style="color: #24292f;background-color: #f6f8fa">.</span><span style="color: #8250df">geo_locate</span><span style="color: #24292f;background-color: #f6f8fa">(</span>&nbsp;<span style="color: #24292f;background-color: #f6f8fa">params</span><span style="color: #24292f;background-color: #f6f8fa">[</span><span style="color: #0a3069">'address'</span><span style="color: #24292f;background-color: #f6f8fa">]</span>&nbsp;<span style="color: #24292f;background-color: #f6f8fa">)</span>
</div><div class='code-line code-line-11'>&nbsp;&nbsp;&nbsp;<span style="color: #24292f;background-color: #f6f8fa">{</span>&nbsp;<span style="color: #0a3069">'lat'</span>&nbsp;<span style="color: #0550ae">=&gt;</span>&nbsp;<span style="color: #24292f;background-color: #f6f8fa">geo_location</span><span style="color: #24292f;background-color: #f6f8fa">.</span><span style="color: #8250df">lat</span><span style="color: #24292f;background-color: #f6f8fa">,</span>&nbsp;<span style="color: #0a3069">'lng'</span>&nbsp;<span style="color: #0550ae">=&gt;</span>&nbsp;<span style="color: #24292f;background-color: #f6f8fa">geo_location</span><span style="color: #24292f;background-color: #f6f8fa">.</span><span style="color: #8250df">lng</span>&nbsp;<span style="color: #24292f;background-color: #f6f8fa">}</span>
</div><div class='code-line code-line-12'>&nbsp;&nbsp;<span style="color: #cf222e">end</span>
</div><div class='code-line code-line-13'><span style="color: #cf222e">end</span>
</div><div class='code-line code-line-14'>
</div><div class='code-line code-line-15'>
</div></code></div>

<p>–≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –∑ JS –≤–∏–º–∞–≥–∞—î –¥–≤–æ—Ö —Ä–µ—á–µ–π: –º–∞—Ä—à—Ä—É—Ç—É —Ç–∞ –Ω–µ–≤–µ–ª–∏–∫–æ–≥–æ –∫–ª–∞—Å—É JS. —Å–ø–æ—á–∞—Ç–∫—É –º–∞—Ä—à—Ä—É—Ç:</p>

<div class="language-ruby highlighter-rouge"><code class='code' style='white-space:pre;'><div class='code-line code-line-1'>
</div><div class='code-line code-line-2'>&nbsp;&nbsp;<span style="color: #24292f;background-color: #f6f8fa">match</span>&nbsp;<span style="color: #0a3069">':controller#rpc'</span><span style="color: #24292f;background-color: #f6f8fa">,</span>&nbsp;<span style="color: #0a3069">:action</span>&nbsp;<span style="color: #0550ae">=&gt;</span>&nbsp;<span style="color: #0a3069">'rpc'</span>
</div><div class='code-line code-line-3'>&nbsp;&nbsp;
</div><div class='code-line code-line-4'>
</div></code></div>

<p>–¥–∞–ª—ñ, JS, —Ç–∞–∫–æ–∂ —Ç—É—Ç -&gt; https://gist.github.com/ahoward/7320900</p>

<p>–ø–µ—Ä–µ–≥–ª—è–¥–∞—é—á–∏ —Ü–µ, –≤–∏ –ø–æ–±–∞—á–∏—Ç–µ, —â–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –±–µ–∫–µ–Ω–¥-–¥—ñ–π rpc –∑ JS —Ç–∞–∫–µ –∂ –ø—Ä–æ—Å—Ç–µ, —è–∫</p>

<pre><code>
  var rpc = new RPC(url);

  rpc.call('geo_location', params, callback);


</code></pre>

<p>–∑–∞–∑–≤–∏—á–∞–π, –≤–Ω–∏–∑—É –ø–µ—Ä–µ–≥–ª—è–¥—É –º–∏ –ø—Ä–æ—Å—Ç–æ —Å—Ç–≤–æ—Ä—é—î–º–æ –æ–±'—î–∫—Ç rpc –¥–ª—è —Å—Ç–æ—Ä—ñ–Ω–∫–∏ –∑ –≤—ñ–¥–Ω–æ—Å–Ω–∏–º URL</p>

<div class="language-erb highlighter-rouge"><code class='code' style='white-space:pre;'><div class='code-line code-line-1'><span style="color: #116329">&lt;script&gt;</span>
</div><div class='code-line code-line-2'>&nbsp;&nbsp;<span style="color: #8250df">jQuery</span><span style="color: #24292f;background-color: #f6f8fa">(</span><span style="color: #cf222e">function</span><span style="color: #24292f;background-color: #f6f8fa">(){</span>
</div><div class='code-line code-line-3'>&nbsp;
</div><div class='code-line code-line-4'>
</div><div class='code-line code-line-5'>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #cf222e">var</span>&nbsp;<span style="color: #24292f;background-color: #f6f8fa">rpc</span>&nbsp;<span style="color: #0550ae">=</span>&nbsp;<span style="color: #cf222e">new</span>&nbsp;<span style="color: #24292f;background-color: #f6f8fa">RPC</span><span style="color: #24292f;background-color: #f6f8fa">(</span><span style="color: #6e7781">&lt;%=</span>&nbsp;<span style="color: #24292f;background-color: #f6f8fa">raw</span>&nbsp;<span style="color: #24292f;background-color: #f6f8fa">url_for</span><span style="color: #24292f;background-color: #f6f8fa">(</span><span style="color: #0a3069">:action</span>&nbsp;<span style="color: #0550ae">=&gt;</span>&nbsp;<span style="color: #0a3069">:rpc</span><span style="color: #24292f;background-color: #f6f8fa">).</span><span style="color: #8250df">to_json</span>&nbsp;<span style="color: #6e7781">%&gt;</span><span style="color: #24292f;background-color: #f6f8fa">);</span>
</div><div class='code-line code-line-6'>&nbsp;&nbsp;&nbsp;&nbsp;
</div><div class='code-line code-line-7'>&nbsp;&nbsp;
</div><div class='code-line code-line-8'>&nbsp;&nbsp;<span style="color: #24292f;background-color: #f6f8fa">});</span>
</div><div class='code-line code-line-9'>&nbsp;&nbsp;
</div><div class='code-line code-line-10'><span style="color: #116329">&lt;/script&gt;</span>
</div><div class='code-line code-line-11'>
</div></code></div>

<p>—ñ –º–∏ —Ä–æ–∑–ø–æ—á–∏–Ω–∞—î–º–æ.</p>

<p>–æ—Ç–∂–µ, –æ—Å—å –≤–æ–Ω–æ - –ø—Ä–æ—Å—Ç–∏–π —Å–ø–æ—Å—ñ–± —É—Ç—Ä–∏–º–∞—Ç–∏ –≤–∞—à—ñ –¥–æ–ø–æ–º—ñ–∂–Ω–∏–∫–∏ JS rpc –≤—ñ–¥ –∑–∞–±—Ä—É–¥–Ω–µ–Ω–Ω—è –≤–∞—à–∏—Ö –∫–æ–Ω—Ç—Ä–æ–ª–µ—Ä—ñ–≤ —Ç–∞ –ø–µ—Ä–µ–≥–ª—è–¥—ñ–≤ —Ä—ñ–∑–Ω–∏–º–∏ —Å—Ç—Ä–∞—Ç–µ–≥—ñ—è–º–∏, —ñ —â–µ –æ–¥–∏–Ω –ø—Ä–∏–∫–ª–∞–¥ —Ç–æ–≥–æ, —è–∫ –Ω–∞—è–≤–Ω—ñ—Å—Ç—å <em>–±—Ä—É—Ç–∞–ª—å–Ω–æ –ø–æ—Å–ª—ñ–¥–æ–≤–Ω–∏—Ö</em> —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ñ–≤ —Ä–æ–±–∏—Ç—å –∞–±—Å—Ç—Ä–∞–∫—Ü—ñ—é –º–æ–∂–ª–∏–≤–æ—é —Ç–∞ –ø—Ä–æ—Å—Ç–æ—é.</p>

<p>–æ–Ω–æ–≤–ª–µ–Ω–Ω—è: –≤–µ—Å—å –ø—ñ–¥—Ö—ñ–¥ –º–æ–∂–Ω–∞ —É–∑–∞–≥–∞–ª—å–Ω–∏—Ç–∏ —Ç–∞–∫</p>

<div class="language-ruby highlighter-rouge"><code class='code' style='white-space:pre;'><div class='code-line code-line-1'>
</div><div class='code-line code-line-2'><span style="color: #cf222e">class</span>&nbsp;<span style="color: #953800">BaseController</span>
</div><div class='code-line code-line-3'>&nbsp;&nbsp;<span style="color: #953800">RPC</span>&nbsp;<span style="color: #0550ae">=</span>&nbsp;<span style="color: #953800">Hash</span><span style="color: #24292f;background-color: #f6f8fa">.</span><span style="color: #8250df">new</span>
</div><div class='code-line code-line-4'>
</div><div class='code-line code-line-5'>&nbsp;&nbsp;<span style="color: #cf222e">def</span>&nbsp;<span style="color: #953800">self</span><span style="color: #0550ae">.</span><span style="color: #8250df">rpc</span><span style="color: #24292f;background-color: #f6f8fa">(</span><span style="color: #24292f;background-color: #f6f8fa">method_name</span><span style="color: #24292f;background-color: #f6f8fa">,</span>&nbsp;<span style="color: #0550ae">&amp;</span><span style="color: #24292f;background-color: #f6f8fa">block</span><span style="color: #24292f;background-color: #f6f8fa">)</span>
</div><div class='code-line code-line-6'>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #953800">RPC</span><span style="color: #24292f;background-color: #f6f8fa">[</span><span style="color: #24292f;background-color: #f6f8fa">method_name</span><span style="color: #24292f;background-color: