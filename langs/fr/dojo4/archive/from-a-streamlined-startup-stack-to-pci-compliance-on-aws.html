<html color-mode="user" lang="fr">
  <head>
  <!-- ga -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-DQVD9T27V4"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-DQVD9T27V4');
</script>

  <!-- deps -->
    <script type="module" src="/assets/js/turbo.es2017-esm.js" defer></script>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.fluid.classless.fuchsia.min.css"
    >

  <!-- langs -->
  <!--
    https://developers.google.com/search/docs/specialty/international/localized-versions#html
  -->
   <link rel="alternate" hreflang="en" href="/" />
   <link rel="alternate" hreflang="uk" href="https://drawohara.io/langs/uk" />
   <link rel="alternate" hreflang="sv" href="https://drawohara.io/langs/sv" />
   <link rel="alternate" hreflang="fr" href="https://drawohara.io/langs/fr" />
   <link rel="alternate" hreflang="es" href="https://drawohara.io/langs/es" />
   <link rel="alternate" hreflang="it" href="https://drawohara.io/langs/it" />

  <!-- defaults -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="color-scheme" content="light dark" />

  <!-- favicon -->
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">

  <!-- meta -->
    <title>rien √† voir ici.</title>

<meta property="og:title" content="rien √† voir ici."/>
<meta property="og:description" content="circulez." />
<meta property="og:image" content="https://drawohara.io/media/mick.jpg" />

<meta property="og:image:type" content="image/jpeg" />

    <meta property="site:route" content=""/dojo4/archive/:id"">
    <meta property="site:params" content="{"ext":null,"id":"from-a-streamlined-startup-stack-to-pci-compliance-on-aws"}">
    <meta property="site:path_info" content=""/from-a-streamlined-startup-stack-to-pci-compliance-on-aws"">

    <style>
      /* anti pico */
      a {text-decoration: none !important; }

      /* anti turbo */
      html { transition: none !important; }
      .turbo-progress-bar { visibility: hidden; }

      /* anti progressive */
      html { margin: 1em; }
      img { display: block; text-align: center; }
    </style>

    <script>
      document.addEventListener("turbo:load", function() {
        const progressBar = document.querySelector('.turbo-progress-bar');
        if (progressBar) { progressBar.remove(); }
      });
    </script>
    <base href='/langs/fr' />
  </head>

  <body>
    <header>
      <a href="/home">@drawohara</a> &mdash;
<a href="mailto:i-love-this@drawohara.io?subject=/from-a-streamlined-startup-stack-to-pci-compliance-on-aws">j'‚ù§Ô∏è √ßa !</a>
<small>
  <small>
    <small>
      <span title='bois-moi'>&lt;&lt; cliquez ici üêõ ü´ñ üßö</a>
    </small>
  </small>
</small>
<hr>
<strong>/from-a-streamlined-startup-stack-to-pci-compliance-on-aws</strong>
    </header>

    <main>
      <em>publi√© le: 2012-09-10</em>
<br>
<br>
<div class="ro markdown">
  <h2 id="intro">Intro</h2>

<p>En travaillant sur des projets chez <a href="http://dojo4.com">Dojo4</a>, je suis souvent surpris de voir comment de petites augmentations de complexit√© technique <a href="http://fr.wikipedia.org/wiki/Explosion_combinatoire">s'accumulent</a> en des gouffres significatifs d'attention et de ressources. Par cons√©quent, lorsque les projets d√©marrent, nous avons tendance √† favoriser une pile d'h√©bergement et d'application simplifi√©e qui partage de nombreuses fonctionnalit√©s couramment vues dans les services d'h√©bergement partag√©. Cela inclut des choix comme l'h√©bergement de l'application et de la base de donn√©es ensemble, l'utilisation d'un seul utilisateur de d√©ploiement sur le syst√®me d'h√©bergement, et une simple <a href="http://uptimerobot.com">surveillance du temps de fonctionnement</a>.</p>

<p>R√©cemment, notre client de longue date, <a href="http://www.inspirecommerce.com/">Inspire Commerce</a>, a d√©velopp√© un nouveau plan d'affaires n√©cessitant que leur application r√©ponde aux exigences strictes de <a href="https://www.pcisecuritystandards.org/">l'industrie des cartes de paiement</a> (PCI) de niveau 1 en mati√®re de s√©curit√© pour le traitement, la transmission et le stockage des informations de carte de cr√©dit. De nombreuses exigences de s√©curit√© d√©taill√©es dans la norme de s√©curit√© des donn√©es PCI (DSS) motivent un changement significatif de la pile centr√©e sur la simplification mentionn√©e ci-dessus. Cet article √©num√©rera bri√®vement certains de ces d√©tails et d√©crira nos solutions.</p>

<p>La norme PCI DSS est divis√©e en 12 sections couvrant tout, des configurations de pare-feu aux politiques de s√©curit√© du personnel. Je vais passer en revue quelques-unes des sections pertinentes pour la pile d'h√©bergement.</p>

<h2 id="1-installer-et-maintenir-une-configuration-de-pare-feu-pour-prot√©ger-les-donn√©es-des-titulaires-de-carte">1. Installer et maintenir une configuration de pare-feu pour prot√©ger les donn√©es des titulaires de carte</h2>

<p>Cette section d√©taill√©e de la DSS impose l'installation et la configuration des services de <a href="http://fr.wikipedia.org/wiki/Pare-feu_%28informatique%29">pare-feu</a> sur tous les appareils de mise en r√©seau, des postes de travail aux routeurs en passant par les serveurs. En utilisant les services <a href="http://aws.amazon.com/">Amazon Web Services</a> (AWS) <a href="http://aws.amazon.com/ec2/">Elastic Compute Cloud</a> (EC2) comme base de notre pile d'h√©bergement, de nombreux appareils de mise en r√©seau sont abstraits de notre vue ou contr√¥le. Heureusement, <a href="http://aws.amazon.com/security/#certifications">AWS est lui-m√™me conforme au niveau 1 de la norme PCI</a>, laissant de nombreux d√©tails aux ing√©nieurs d'Amazon.</p>

<p>Cependant, les pare-feu pour les n≈ìuds EC2 n√©cessitent une certaine consid√©ration. Les n≈ìuds EC2 sont prot√©g√©s par un pare-feu impl√©ment√© au niveau de l'<a href="www.xen.org/products/xenhyp.html">hyperviseur</a> et configur√© par les <a href="http://docs.amazonwebservices.com/AWSEC2/latest/UserGuide/using-network-security.html">Groupes de s√©curit√© AWS</a>. Notre groupe de s√©curit√© de base refuse tous les paquets pour tous les ports, sauf les ports 22, 80 et 443 acceptant des sources. Nous utilisons <a href="www.ubuntu.com/">Ubuntu Linux</a> sur nos n≈ìuds et, par d√©faut, le <a href="www.netfilter.org/projects/iptables/">pare-feu IP Tables</a> est configur√© avec une politique ouverte.</p>

<p>La norme PCI DSS met l'accent sur l'utilisation des pare-feu pour cr√©er des r√©seaux priv√©s s√©curis√©s, ou des <a href="http://fr.wikipedia.org/wiki/Zone_d√©militaris√©e_%28informatique%29">Zones D√©militaris√©es</a> (DMZ) pour les syst√®mes h√©bergeant des applications qui traitent les donn√©es de carte de paiement. Les Groupes de s√©curit√© AWS fournissent un m√©canisme utile pour cr√©er des r√©seaux priv√©s s√©curis√©s entre les diff√©rents composants de la pile d'application. Par exemple, en cr√©ant un groupe de s√©curit√© WEB et un groupe de s√©curit√© DB, et en ouvrant le port de la base de donn√©es dans le groupe de s√©curit√© DB uniquement aux sources du groupe de s√©curit√© WEB, le pare-feu de l'hyperviseur EC2 ex√©cut√© sur un serveur de base de donn√©es n'autorisera l'acc√®s √† la base de donn√©es qu'√† partir des serveurs web se connectant sur l'interface du r√©seau priv√© interne.</p>

<p>Pour la redondance, nous dupliquons la configuration des Groupes de s√©curit√© AWS pour le pare-feu de l'hyperviseur EC2 avec le service <a href="http://www.cloudpassage.com/">CloudPassage</a> qui est capable de g√©rer le pare-feu IP Tables au niveau du syst√®me d'exploitation des syst√®mes h√©bergeant les composants de l'application de traitement de carte. CloudPassage organise les politiques de pare-feu en <a href="http://www.cloudpassage.com/features/halo-firewall.html">Groupes de serveurs</a> qui sont quelque peu analogues aux Groupes de s√©curit√© AWS. Une autre fonctionnalit√© int√©ressante de CloudPassage est le service <a href="http://www.cloudpassage.com/features/multifactor-authentication.html">GhostPorts</a>. Nous configurons la politique de port ssh dans CloudPassage pour accepter les connexions des sources GhostPort. Pour qu'une machine client devienne une source GhostPort, un utilisateur de cette machine doit s'authentifier aupr√®s du portail CloudPassage, √™tre autoris√© √† ouvrir des GhostPorts pour un groupe de serveurs, et s'authentifier avec un dongle Yubikey enregistr√©, ou r√©pondre √† un d√©fi SMS avec un t√©l√©phone portable enregistr√©. Apr√®s une authentification et une autorisation r√©ussies, CloudPassage configure IP Tables pour accepter les connexions depuis l'adresse IP source de la machine client. C'est un moyen pratique, s√©curis√©, temporaire et auditable de g√©rer l'acc√®s aux h√¥tes sensibles.</p>

<h2 id="2-ne-pas-utiliser-les-param√®tres-par-d√©faut-du-fournisseur-pour-les-mots-de-passe-du-syst√®me-et-autres-param√®tres-de-s√©curit√©">2. Ne pas utiliser les param√®tres par d√©faut du fournisseur pour les mots de passe du syst√®me et autres param√®tres de s√©curit√©</h2>

<p>Cette section semble assez √©vidente. Un bon exemple de l'importance de changer le mot de passe par d√©faut fourni par le fournisseur est le mot de passe par d√©faut <a href="http://www.splunk.com/">Splunk</a> <a href="http://docs.splunk.com/Documentation/Splunk/latest/Deploy/Introducingtheuniversalforwarder">Universal Forwarder</a> de changeme.</p>

<p>Cependant, enfouie dans cette section se trouve une exigence d'h√©bergement quelque peu sans rapport avec le titre de la section. ¬´ 2.2.1 Impl√©mentez une seule fonction principale par serveur pour emp√™cher les fonctions n√©cessitant diff√©rents niveaux de s√©curit√© de coexister sur le m√™me serveur. (Par exemple, les serveurs web, les serveurs de bases de donn√©es et le DNS doivent √™tre impl√©ment√©s sur des serveurs s√©par√©s). ¬ª</p>

<p>Comme mentionn√© ci-dessus, les groupes de s√©curit√© AWS facilitent la t√¢che de s√©parer de mani√®re s√©curis√©e les services tels que les serveurs web et les serveurs de bases de donn√©es sur des h√¥tes distincts.</p>

<h2 id="5-utiliser-et-mettre-√†-jour-r√©guli√®rement-un-logiciel-ou-des-programmes-antivirus">5. Utiliser et mettre √† jour r√©guli√®rement un logiciel ou des programmes antivirus</h2>

<p><a href="http://clamav.com">ClamAV</a> facilite cette exigence sur Ubuntu Linux.</p>

<h2 id="8-attribuer-un-identifiant-unique-√†-chaque-personne-ayant-acc√®s-√†-un-ordinateur">8. Attribuer un identifiant unique √† chaque personne ayant acc√®s √† un ordinateur</h2>

<p>L'objectif de cette section est de faciliter l'auditabilit√© et la responsabilit√© en supprimant les comptes d'utilisateurs partag√©s. Puisque nous utilisons un m√©canisme d'authentification bas√© sur des <a href="http://fr.wikipedia.org/wiki/Ssh-keygen">cl√©s</a> pour l'acc√®s <a href="http://fr.wikipedia.org/wiki/Secure_Shell">secure shell</a>, il y a trois pr√©occupations principales pour savoir qui a fait quoi. Premi√®rement, il est n√©cessaire d'emp√™cher les utilisateurs de pouvoir passer √† un autre compte utilisateur avec la commande <a href="http://fr.wikipedia.org/wiki/Su_%28Unix%29">su</a>. Cela se fait facilement en supprimant la <a href="http://fr.wikipedia.org/wiki/Permissions_des_fichiers_syst√®mes#Permissions_traditionnelles_Unix">permission d'ex√©cution</a> sur le binaire su et de modifier <a href="http://aplawrence.com/Basics/understandingpam.html">/etc/pam.d</a> pour emp√™cher toute autorisation su. Deuxi√®mement, assurez-vous que les fichiers <a href="http://www.eng.cam.ac.uk/help/jpmg/ssh/authorized_keys_howto.html">authorized_keys</a> pour tous les comptes utilisateur ne contiennent qu'une seule entr√©e. Enfin, assurez-vous que toutes les cl√©s utilis√©es pour l'acc√®s secure shell sont prot√©g√©es par mot de passe et qu'une politique est en place pour interdire le partage des cl√©s entre les utilisateurs.</p>

<p>Maintenant, le <a href="http://www.cyberciti.biz/tips/linux-audit-files-to-see-who-made-changes-to-a-file.html">D√©mon d'audit Linux</a> (AuditD) peut √™tre utilis√© pour suivre l'activit√© du syst√®me vers des utilisateurs sp√©cifiques.</p>

<h2 id="9-restreindre-l'acc√®s-physique-aux-donn√©es-des-titulaires-de-carte">9. Restreindre l'acc√®s physique aux donn√©es des titulaires de carte</h2>

<p>Le titre de cette section est assez explicite. Essentiellement, cette section couvre les sujets de restriction de l'acc√®s physique au centre de donn√©es aux personnes autoris√©es. Similaire √† la discussion sur la configuration des pare-feu des appareils r√©seau ci-dessus, cela est couvert par la certification PCI de niveau 1 d'AWS et les d√©tails peuvent √™tre laiss√©s √† Amazon.</p>

<h2 id="10-suivre-et-surveiller-tous-les-acc√®s-aux-ressources-r√©seau-et-aux-donn√©es-des-titulaires-de-carte">10. suivre et surveiller tous les acc√®s aux ressources r√©seau et aux donn√©es des titulaires de carte</h2>

<p>La motivation de cette section est ¬´ pr√©venir, d√©tecter ou minimiser l'impact d'une compromission de donn√©es ¬ª. Cela implique des sujets tels que la journalisation, la gestion de l'int√©grit√© des fichiers et la d√©tection d'intrusion. Notre strat√©gie commence par l'utilisation d'un service de journalisation pour prendre en charge l'agr√©gation des journaux, la r√©tention des journaux, ainsi que la recherche des enregistrements de journaux. Nous utilisons l'application <a href="http://splunk.com">Splunk</a> pour cette fonctionnalit√©. Nous avons configur√© une instance EC2 pour un serveur de journalisation et install√© Splunk. Nous avons configur√© les Groupes de s√©curit√© AWS et les Groupes de serveurs CloudPassage pour le nouveau serveur qui a le port d'√©coute Splunk acceptant les connexions des sources des serveurs web et de la base de donn√©es sur l'interface du r√©seau priv√©. Ensuite, nous avons configur√© le Splunk Universal Forwarder sur les serveurs web et de la base de donn√©es et configur√© les transmetteurs pour surveiller les journaux de l'application, apache, mongodb, sys, audit et auth.</p>

<p>Pour la surveillance de l'int√©grit√© des fichiers et la d√©tection d'intrusion, nous avons install√© l'application <a href="http://www.ossec.net/?page_id=165">OSSEC</a> sur tous nos serveurs et ajout√© tous les journaux qu'OSSEC √©crit aux transmetteurs Splunk.</p>

</div>
    </main>

    <footer>
      <hr>
<a href="/goto" name="goto">&mdash;&gt; goto</a>
<blockquote>
<ul>
  <li>
    <a href="mailto:i-hate-this@drawohara.io?subject=/from-a-streamlined-startup-stack-to-pci-compliance-on-aws">üò©, j'üñ§ ^√ßa!<a>
  </li>
  <li>
    <a href="/now">/now<a>
  </li>
  <li>
    <a href="/about">/about<a>
  </li>
  <li>
    <a href="/contact">/contact<a>
  </li>
</ul>
</blockquote>
<a href="/">&lt;&mdash; eject</a>
    </footer>
  </body>
</html>