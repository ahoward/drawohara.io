<html color-mode="user" lang="fr">
  <head>
    <base href='/langs/fr' />
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-DQVD9T27V4"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-DQVD9T27V4');
    </script>

    <script type="module" src="/assets/js/turbo.es2017-esm.js" defer></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.fluid.classless.fuchsia.min.css">

    <link rel="alternate" hreflang="en" href="/" />
    <link rel="alternate" hreflang="uk" href="https://drawohara.io/langs/uk" />
    <link rel="alternate" hreflang="sv" href="https://drawohara.io/langs/sv" />
    <link rel="alternate" hreflang="fr" href="https://drawohara.io/langs/fr" />
    <link rel="alternate" hreflang="es" href="https://drawohara.io/langs/es" />
    <link rel="alternate" hreflang="it" href="https://drawohara.io/langs/it" />

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="color-scheme" content="light dark" />

    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">

    <title>Rien √† voir ici.</title>

    <meta property="og:title" content="Rien √† voir ici."/>
    <meta property="og:description" content="Passez votre chemin." />
    <meta property="og:image" content="https://drawohara.io/media/mick.jpg" />

    <meta property="og:image:type" content="image/jpeg" />

    <meta property="site:route" content=""/dojo4/archive/:id"">
    <meta property="site:params" content="{"ext":null,"id":"writing-hygienic-mixins-in-ruby"}">
    <meta property="site:path_info" content=""/writing-hygienic-mixins-in-ruby"">

    <style>
      /* anti pico */
      a {text-decoration: none !important; }

      /* anti turbo */
      html { transition: none !important; }
      .turbo-progress-bar { visibility: hidden; }

      /* anti progressive */
      html { margin: 1em; }
      img { display: block; text-align: center; }
    </style>

    <script>
      document.addEventListener("turbo:load", function() {
        const progressBar = document.querySelector('.turbo-progress-bar');
        if (progressBar) { progressBar.remove(); }
      });
    </script>
  </head>

  <body>
    <header>
      <a href="/home">@drawohara</a> &mdash;
      <a href="mailto:i-love-this@drawohara.io?subject=/writing-hygienic-mixins-in-ruby">j' ‚ù§Ô∏è  ceci !</a>
      <small>
        <small>
          <small>
            <span title='bois-moi'>&lt;&lt; cliquez-moi üêõ ü´ñ üßö</a>
          </small>
        </small>
      </small>
      <hr>
      <strong>/writing-hygienic-mixins-in-ruby</strong>
    </header>

    <main>
      <em>publi√© le : 2014-07-24</em>
      <br>
      <br>
      <div class="ro markdown">
        <div class="language-ruby highlighter-rouge">
          <code class='code' style='white-space:pre;'>
            <div class='code-line code-line-1'>
            </div>
            <div class='code-line code-line-2'>
            </div>
            <div class='code-line code-line-3'><span style="color: #6e7781">=begin</span>
            </div>
            <div class='code-line code-line-4'>
            </div>
            <div class='code-line code-line-5'><span style="color: #6e7781">  il est assez courant, en ruby, que les modules fournissent des fonctionnalit√©s via des mixins.</span>
            </div>
            <div class='code-line code-line-6'>
            </div>
            <div class='code-line code-line-7'>
            </div>
            <div class='code-line code-line-8'><span style="color: #6e7781">  par exemple :</span>
            </div>
            <div class='code-line code-line-9'><span style="color: #6e7781">  </span>
            </div>
            <div class='code-line code-line-10'>
            </div>
            <div class='code-line code-line-11'><span style="color: #6e7781">=end</span>
            </div>
            <div class='code-line code-line-12'>
            </div>
            <div class='code-line code-line-13'>  <span style="color: #cf222e">module</span> <span style="color: #953800">Mixin</span>
            </div>
            <div class='code-line code-line-14'>    <span style="color: #cf222e">def</span> <span style="color: #8250df">foo</span>
            </div>
            <div class='code-line code-line-15'>      <span style="color: #0550ae">42</span>
            </div>
            <div class='code-line code-line-16'>    <span style="color: #cf222e">end</span>
            </div>
            <div class='code-line code-line-17'>  <span style="color: #cf222e">end</span>
            </div>
            <div class='code-line code-line-18'>
            </div>
            <div class='code-line code-line-19'>  <span style="color: #cf222e">class</span> <span style="color: #953800">C</span>
            </div>
            <div class='code-line code-line-20'>    <span style="color: #cf222e">include</span> <span style="color: #953800">Mixin</span>
            </div>
            <div class='code-line code-line-21'>  <span style="color: #cf222e">end</span>
            </div>
            <div class='code-line code-line-22'>
            </div>
            <div class='code-line code-line-23'>  <span style="color: #953800">p</span> <span style="color: #953800">C</span><span style="color: #24292f;background-color: #f6f8fa">.</span><span style="color: #8250df">new</span><span style="color: #24292f;background-color: #f6f8fa">.</span><span style="color: #8250df">foo</span> <span style="color: #6e7781">#=&gt; 42</span>
            </div>
            <div class='code-line code-line-24'>
            </div>
            <div class='code-line code-line-25'><span style="color: #6e7781">=begin</span>
            </div>
            <div class='code-line code-line-26'>
            </div>
            <div class='code-line code-line-27'><span style="color: #6e7781">  bien que pratique, les entrailles du mixin, en particulier les modules, peuvent facilement fuir</span>
            </div>
            <div class='code-line code-line-28'><span style="color: #6e7781">  de mani√®re non intentionnelle dans la cible.</span>
            </div>
            <div class='code-line code-line-29'><span style="color: #6e7781">  </span>
            </div>
            <div class='code-line code-line-30'><span style="color: #6e7781">  Ici, le module 'Util' est int√©gr√© entre Mixin et C :</span>
            </div>
            <div class='code-line code-line-31'>
            </div>
            <div class='code-line code-line-32'>
            </div>
            <div class='code-line code-line-33'><span style="color: #6e7781">=end</span>
            </div>
            <div class='code-line code-line-34'>
            </div>
            <div class='code-line code-line-35'>  <span style="color: #24292f;background-color: #f6f8fa">reset!</span>
            </div>
            <div class='code-line code-line-36'>
            </div>
            <div class='code-line code-line-37'>  <span style="color: #cf222e">module</span> <span style="color: #953800">Mixin</span>
            </div>
            <div class='code-line code-line-38'>    <span style="color: #cf222e">module</span> <span style="color: #953800">Util</span>
            </div>
            <div class='code-line code-line-39'>      <span style="color: #cf222e">def</span> <span style="color: #953800">Util</span><span style="color: #0550ae">.</span><span style="color: #8250df">foo</span>
            </div>
            <div class='code-line code-line-40'>        <span style="color: #0550ae">42</span>
            </div>
            <div class='code-line code-line-41'>      <span style="color: #cf222e">end</span>
            </div>
            <div class='code-line code-line-42'>    <span style="color: #cf222e">end</span>
            </div>
            <div class='code-line code-line-43'>  <span style="color: #cf222e">end</span>
            </div>
            <div class='code-line code-line-44'>
            </div>
            <div class='code-line code-line-45'>  <span style="color: #cf222e">class</span> <span style="color: #953800">C</span>
            </div>
            <div class='code-line code-line-46'>    <span style="color: #cf222e">include</span> <span style="color: #953800">Mixin</span>
            </div>
            <div class='code-line code-line-47'>
            </div>
            <div class='code-line code-line-48'>    <span style="color: #953800">p</span> <span style="color: #953800">Util</span><span style="color: #24292f;background-color: #f6f8fa">.</span><span style="color: #8250df">foo</span> <span style="color: #6e7781">#=&gt; 42</span>
            </div>
            <div class='code-line code-line-49'>
            </div>
            <div class='code-line code-line-50'>    <span style="color: #cf222e">module</span> <span style="color: #953800">Util</span>
            </div>
            <div class='code-line code-line-51'>      <span style="color: #cf222e">def</span> <span style="color: #953800">Util</span><span style="color: #0550ae">.</span><span style="color: #8250df">bar</span>
            </div>
            <div class='code-line code-line-52'>        <span style="color: #0550ae">42.0</span>
            </div>
            <div class='code-line code-line-53'>      <span style="color: #cf222e">end</span>
            </div>
            <div class='code-line code-line-54'>    <span style="color: #cf222e">end</span>
            </div>
            <div class='code-line code-line-55'>
            </div>
            <div class='code-line code-line-56'>    <span style="color: #953800">p</span> <span style="color: #953800">Util</span><span style="color: #24292f;background-color: #f6f8fa">.</span><span style="color: #8250df">bar</span> <span style="color: #6e7781">#=&gt; 42.0</span>
            </div>
            <div class='code-line code-line-57'>  <span style="color: #cf222e">end</span>
            </div>
            <div class='code-line code-line-58'>
            </div>
            <div class='code-line code-line-59'>
            </div>
            <div class='code-line code-line-60'>
            </div>
            <div class='code-line code-line-61'><span style="color: #6e7781">=begin</span>
            </div>
            <div class='code-line code-line-62'>
            </div>
            <div class='code-line code-line-63'><span style="color: #6e7781">  cela pose un d√©fi pour les auteurs de mixins : comment garder le code</span>
            </div>
            <div class='code-line code-line-64'><span style="color: #6e7781">  organis√© *et* fournir un module qui est s√ªr √† mixer dans n'importe quelle cible.</span>
            </div>
            <div class='code-line code-line-65'>
            </div>
            <div class='code-line code-line-66'>
            </div>
            <div class='code-line code-line-67'><span style="color: #6e7781">  deux approches principales existent :</span>
            </div>
            <div class='code-line code-line-68'>
            </div>
            <div class='code-line code-line-69'>
            </div>
            <div class='code-line code-line-70'><span style="color: #6e7781">  1) d√©couper le mixin s√©par√©ment de l'espace de noms de premier niveau</span>
            </div>
            <div class='code-line code-line-71'>
            </div>
            <div class='code-line code-line-72'><span style="color: #6e7781">=end</span>
            </div>
            <div class='code-line code-line-73'>
            </div>
            <div class='code-line code-line-74'>  <span style="color: #24292f;background-color: #f6f8fa">reset!</span>
            </div>
            <div class='code-line code-line-75'>
            </div>
            <div class='code-line code-line-76'>  <span style="color: #cf222e">module</span> <span style="color: #953800">M</span>
            </div>
            <div class='code-line code-line-77'>    <span style="color: #cf222e">module</span> <span style="color: #953800">Mixin</span>
            </div>
            <div class='code-line code-line-78'>      <span style="color: #cf222e">def</span> <span style="color: #8250df">foo</span>
            </div>
            <div class='code-line code-line-79'>        <span style="color: #0550ae">42</span>
            </div>
            <div class='code-line code-line-80'>      <span style="color: #cf222e">end</span>
            </div>
            <div class='code-line code-line-81'>    <span style="color: #cf222e">end</span>
            </div>
            <div class='code-line code-line-82'>
            </div>
            <div class='code-line code-line-83'>    <span style="color: #cf222e">module</span> <span style="color: #953800">Util</span>
            </div>
            <div class='code-line code-line-84'>    <span style="color: #cf222e">end</span>
            </div>
            <div class='code-line code-line-85'>  <span style="color: #cf222e">end</span>
            </div>
            <div class='code-line code-line-86'>
            </div>
            <div class='code-line code-line-87'>  <span style="color: #cf222e">class</span> <span style="color: #953800">C</span>
            </div>
            <div class='code-line code-line-88'>    <span style="color: #cf222e">include</span> <span style="color: #953800">M</span><span style="color: #0550ae">::</span><span style="color: #953800">Mixin</span>
            </div>
            <div class='code-line code-line-89'>  <span style="color: #cf222e">end</span>
            </div>
            <div class='code-line code-line-90'>
            </div>
            <div class='code-line code-line-91'>  <span style="color: #953800">p</span> <span style="color: #953800">C</span><span style="color: #24292f;background-color: #f6f8fa">.</span><span style="color: #8250df">new</span><span style="color: #24292f;background-color: #f6f8fa">.</span><span style="color: #8250df">foo</span> <span style="color: #6e7781">#=&gt; 42</span>
            </div>
            <div class='code-line code-line-92'>  <span style="color: #953800">p</span> <span style="color: #953800">C</span><span style="color: #24292f;background-color: #f6f8fa">.</span><span style="color: #8250df">const_defined?</span><span style="color: #24292f;background-color: #f6f8fa">(</span><span style="color: #0a3069">:Util</span><span style="color: #24292f;background-color: #f6f8fa">)</span> <span style="color: #6e7781">#=&gt; false</span>
            </div>
            <div class='code-line code-line-93'>
            </div>
            <div class='code-line code-line-94'>
            </div>
            <div class='code-line code-line-95'><span style="color: #6e7781">=begin</span>
            </div>
            <div class='code-line code-line-96'>
            </div>
            <div class='code-line code-line-97'><span style="color: #6e7781">  ou</span>
            </div>
            <div class='code-line code-line-98'>
            </div>
            <div class='code-line code-line-99'><span style="color: #6e7781">  2) utiliser const_missing pour permettre des alias de const simples dans un espace de noms priv√©</span>
            </div>
            <div class='code-line code-line-100'>
            </div>
            <div class='code-line code-line-101'>
            </div>
            <div class='code-line code-line-102'><span style="color: #6e7781">=end</span>
            </div>
            <div class='code-line code-line-103'>
            </div>
            <div class='code-line code-line-104'>  <span style="color: #24292f;background-color: #f6f8fa">reset!</span>
            </div>
            <div class='code-line code-line-105'>
            </div>
            <div class='code-line code-line-106'>  <span style="color: #cf222e">module</span> <span style="color: #953800">M</span>
            </div>
            <div class='code-line code-line-107'>    <span style="color: #cf222e">module</span> <span style="color: #953800">Namespace</span>
            </div>
            <div class='code-line code-line-108'>      <span style="color: #cf222e">module</span> <span style="color: #953800">Util</span>
            </div>
            <div class='code-line code-line-109'>        <span style="color: #cf222e">def</span> <span style="color: #8250df">foo</span>
            </div>
            <div class='code-line code-line-110'>          <span style="color: #0550ae">42</span>
            </div>
            <div class='code-line code-line-111'>        <span style="color: #cf222e">end</span>
            </div>
            <div class='code-line code-line-112'>      <span style="color: #cf222e">end</span>
            </div>
            <div class='code-line code-line-113'>    <span style="color: #cf222e">end</span>
            </div>
            <div class='code-line code-line-114'>
            </div>
            <div class='code-line code-line-115'>    <span style="color: #cf222e">def</span> <span style="color: #953800">Mixin</span><span style="color: #0550ae">.</span><span style="color: #8250df">const_missing</span><span style="color: #24292f;background-color: #f6f8fa">(</span><span style="color: #24292f;background-color: #f6f8fa">const</span><span style="color: #24292f;background-color: #f6f8fa">)</span>
            </div>
            <div class='code-line code-line-116'>      <span style="color: #cf222e">begin</span>
            </div>
            <div class='code-line code-line-117'>        <span style="color: #953800">Namespace</span><span style="color: #24292f;background-color: #f6f8fa">.</span><span style="color: #8250df">const_get</span><span style="color: #24292f;background-color: #f6f8fa">(</span><span style="color: #24292f;background-color: #f6f8fa">const</span><span style="color: #24292f;background-color: #f6f8fa">)</span>
            </div>
            <div class='code-line code-line-118'>      <span style="color: #cf222e">rescue</span> <span style="color: #953800">Object</span>
            </div>
            <div class='code-line code-line-119'>        <span style="color: #cf222e">raise</span>
            </div>
            <div class='code-line code-line-120'>      <span style="color: #cf222e">end</span>
            </div>
            <div class='code-line code-line-121'>    <span style="color: #cf222e">end</span>
            </div>
            <div class='code-line code-line-122'>
            </div>
            <div class='code-line code-line-123'>    <span style="color: #cf222e">def</span> <span style="color: #8250df">foo</span>
            </div>
            <div class='code-line code-line-124'>      <span style="color: #953800">Util</span><span style="color: #24292f;background-color: #f6f8fa">.</span><span style="color: #8250df">foo</span>
            </div>
            <div class='code-line code-line-125'>    <span style="color: #cf222e">end</span>
            </div>
            <div class='code-line code-line-126'>  <span style="color: #cf222e">end</span>
            </div>
            <div class='code-line code-line-127'>
            </div>
            <div class='code-line code-line-128'>  <span style="color: #cf222e">class</span> <span style="color: #953800">C</span>
            </div>
            <div class='code-line code-line-129'>    <span style="color: #cf222e">include</span> <span style="color: #953800">M</span><span style="color: #0550ae">::</span><span style="color: #953800">Mixin</span>
            </div>
            <div class='code-line code-line-130'>  <span style="color: #cf222e">end</span>
            </div>
            <div class='code-line code-line-131'>
            </div>
            <div class='code-line code-line-132'>  <span style="color: #953800">p</span> <span style="color: #953800">C</span><span style="color: #24292f;background-color: #f6f8fa">.</span><span style="color: #8250df">new</span><span style="color: #24292f;background-color: #f6f8fa">.</span><span style="color: #8250df">foo</span> <span style="color: #6e7781">#=&gt; 42</span>
            </div>
            <div class='code-line code-line-133'>  <span style="color: #953800">p</span> <span style="color: #953800">C</span><span style="color: #24292f;background-color: #f6f8fa">.</span><span style="color: #8250df">const_defined?</span><span style="color: #24292f;background-color: #f6f8fa">(</span><span style="color: #0a3069">:Util</span><span style="color: #24292f;background-color: #f6f8fa">)</span> <span style="color: #6e7781">#=&gt; false </span>
            </div>
            <div class='code-line code-line-134'>
            </div>
            <div class='code-line code-line-135'>
            </div>
            <div class='code-line code-line-136'>
            </div>
            <div class='code-line code-line-137'><span style="color: #6e7781">=begin</span>
            </div>
            <div class='code-line code-line-138'>
            </div>
            <div class='code-line code-line-139'>
            </div>
            <div class='code-line code-line-140'><span style="color: #6e7781">  donc, voil√† :