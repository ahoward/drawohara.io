<html color-mode="user" lang="sv">
  <head>
  <!-- ga -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-DQVD9T27V4"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-DQVD9T27V4');
</script>

  <!-- deps -->
    <script type="module" src="/assets/js/turbo.es2017-esm.js" defer></script>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.fluid.classless.fuchsia.min.css"
    >

  <!-- langs -->
  <!--
    https://developers.google.com/search/docs/specialty/international/localized-versions#html
  -->
   <link rel="alternate" hreflang="en" href="/" />
   <link rel="alternate" hreflang="uk" href="https://drawohara.io/langs/uk" />
   <link rel="alternate" hreflang="sv" href="https://drawohara.io/langs/sv" />
   <link rel="alternate" hreflang="fr" href="https://drawohara.io/langs/fr" />
   <link rel="alternate" hreflang="es" href="https://drawohara.io/langs/es" />
   <link rel="alternate" hreflang="it" href="https://drawohara.io/langs/it" />

  <!-- defaults -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="color-scheme" content="light dark" />

  <!-- favicon -->
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">

  <!-- meta -->
    <title>Inget att se h√§r.</title>

<meta property="og:title" content="Inget att se h√§r."/>
<meta property="og:description" content="G√• vidare." />
<meta property="og:image" content="https://drawohara.io/media/mick.jpg" />




  <meta property="og:image:type" content="image/jpeg" />

    <meta property="site:route" content=""/dojo4/archive/:id"">
    <meta property="site:params" content="{"ext":null,"id":"patching-between-git-repos"}">
    <meta property="site:path_info" content=""/patching-between-git-repos"">

    <style>
      /* anti pico */
      a {text-decoration: none !important; }

      /* anti turbo */
      html { transition: none !important; }
      .turbo-progress-bar { visibility: hidden; }

      /* anti progressive */
      html { margin: 1em; }
      img { display: block; text-align: center; }
    </style>

    <script>
      document.addEventListener("turbo:load", function() {
        const progressBar = document.querySelector('.turbo-progress-bar');
        if (progressBar) { progressBar.remove(); }
      });
    </script>
    <base href='/langs/sv' />
  </head>

  <body>
    <header>
      <a href="/home">@drawohara</a> &mdash;
<a href="mailto:i-love-this@drawohara.io?subject=/patching-between-git-repos">jag ‚ù§Ô∏è det h√§r!</a>
<small>
  <small>
    <small>
      <span title='drick mig'>&lt;&lt; klicka p√• mig üêõ ü´ñ üßö</a>
    </small>
  </small>
</small>
<hr>
<strong>/patching-between-git-repos</strong>
    </header>

    <main>
      <em>publicerad den: 2015-03-30</em>
<br>
<br>
<div class="ro markdown">
  <p>(Det h√§r inl√§gget finns ursprungligen p√• Spike‚Äôs <a href="http://stuff-things.net/">Saker‚Ä¶ Och Grejer‚Ä¶ blogg</a>)</p>

<p>√Ñven om ber√∂mmelsen och gratis bilar √§r trevligt, s√• √§r anledningen till att jag bloggar f√∂r att l√§ra, eller, som i det h√§r fallet, f√∂r att hj√§lpa mig att komma ih√•g saker.</p>

<p>Jag arbetar √∂ver ett antal distinkta Rails-projekt som delar ett gemensamt ursprung. Ofta m√•ste en buggfix eller en ny funktion i ett portas till (n√•gra av) de andra.</p>

<p>Eftersom projekten alla finns i sina egna repos, s√• kan √§ndringarna inte sammanfogas med Git. Nej, det h√§r √§r ett jobb f√∂r patchar. Och n√§r det g√§ller att patcha med Git, s√• finns det tv√• inl√§gg om processen som jag inte kan leva utan.</p>

<p>N√§r man patchar, s√• kommer tre Git-kommandon in i bilden, <a href="http://git-scm.com/docs/git-format-patch">git format-patch</a>, <a href="http://git-scm.com/docs/git-apply]">git apply</a>, och det n√•got obskura <a href="http://git-scm.com/docs/git-am">git am</a>.</p>

<p><code>git patch</code> √§r ganska rakt p√• sak, ge en lista med commits, den genererar en diff i <a href="http://en.wikipedia.org/wiki/Patch_%28Unix%29">patchformat</a> som sedan kan appliceras av Git eller av patch-kommandot. Det som jag alltid m√•ste sl√• upp √§r genv√§gen f√∂r att f√• en patch fr√•n den senaste committen.</p>

<p>Den icke-genv√§gsmetoden √§r att f√• SHA:n fr√•n den n√§st sista committen och skicka den till format-patch. Varf√∂r den n√§st sista? SHA:n representerar tillst√•ndet i repo efter committen, allts√• √§r den slutgiltiga SHA:n d√§r vi √§r nu, och den n√§st sista d√§r vi var innan v√•ra √§ndringar.</p>

<p>Vi genererar patchen p√• f√∂ljande s√§tt:</p>

<pre><code>git log --oneline
975d4dc Auto-generated CHANGELOG.md
ca1216d Bump for validation fix
git format-patch ca1216d
0001-Auto-generated-CHANGELOG.md.patch
</code></pre>

<p>(Du kan ocks√• skapa flera patchar genom att anv√§nda en SHA l√§ngre bak i historien.)</p>

<p>Dock finns det en genv√§g f√∂r att f√• den n√§st sista committen som jag hittade f√∂r l√§nge sedan i det h√§r inl√§gget:</p>

<p><a href="http://stackoverflow.com/questions/9396240/how-do-i-simply-create-a-patch-from-my-latest-git-commit">http://stackoverflow.com/questions/9396240/how-do-i-simply-create-a-patch-from-my-latest-git-commit</a> och den √§r:</p>

<pre><code>git format-patch HEAD^
0001-Auto-generated-CHANGELOG.md.patch
</code></pre>

<p><code>HEAD^</code> √§r en f√∂rkortning f√∂r <code>HEAD^1</code>, <em>^1</em> betyder den f√∂rsta f√∂r√§ldern till committen, i det h√§r fallet committen f√∂re <em>HEAD</em>, som naturligtvis √§r den n√§st sista committen.</p>

<p>Nu n√§r du har din patch m√•ste du applicera den. F√∂r det s√∂ker jag r√•d fr√•n <a href="https://ariejan.net/2009/10/26/how-to-create-and-apply-a-patch-with-git/">https://ariejan.net/2009/10/26/how-to-create-and-apply-a-patch-with-git/</a></p>

<p>F√∂rst kan du anv√§nda:</p>

<pre><code>git apply --stat patch-file
</code></pre>

<p>f√∂r att se vilka √§ndringar som egentligen finns i patchen. Sedan kan du anv√§nda</p>

<pre><code>git apply --check patch-file
</code></pre>

<p>f√∂r att se om den kommer att fungera.</p>

<p>Dock, enligt Ariejans artikel, anv√§nder jag egentligen inte <code>git apply</code> f√∂r att applicera patchen. Varf√∂r inte? Attribution.</p>

<p>Alternativet till <em>apply</em> √§r <code>git am</code>, som √§r utformat f√∂r att applicera patchar fr√•n e-post(er). Vad som skiljer det √§r att committer p√• committen tas fr√•n <em>Fr√•n</em> adressen i patchen. F√∂r patchar som skapats av <code>git format-patch</code> √§r det committer av den ursprungliga koden. Med <code>git apply</code> √§r du committer. S√• om du anv√§nder <code>git am</code> f√•r du en rapport √∂ver vem som skrev koden och med <code>git apply</code> en rapport √∂ver vem som applicerade patchen.</p>

<p>Som bringar oss till <code>--signoff</code> alternativet. Skickat till <code>git am</code> l√§gger det till <em>Signed-off-by</em> som inneh√•ller namnet p√• personen som applicerade patchen till <code>git log</code>.</p>

<pre><code>git am --signoff &lt; patch file
</code></pre>

<p>Med det f√•r vi b√•da, en commit som visar vem som skrev koden och vem som applicerade den till det h√§r repo.</p>

<p>Och nu kanske jag kommer ih√•g det!</p>

</div>
    </main>

    <footer>
      <hr>
<a href="/goto" name="goto">&mdash;&gt; g√• till</a>
<blockquote>
<ul>
  <li>
    <a href="mailto:i-hate-this@drawohara.io?subject=/patching-between-git-repos">üò©, jag üñ§ ^det h√§r!<a>
  </li>
  <li>
    <a href="/now">/nu<a>
  </li>
  <li>
    <a href="/about">/om<a>
  </li>
  <li>
    <a href="/contact">/kontakt<a>
  </li>
</ul>
</blockquote>
<a href="/">&lt;&mdash; avbryt</a>
    </footer>
  </body>
</html>