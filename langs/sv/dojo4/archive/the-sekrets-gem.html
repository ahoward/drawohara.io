<html color-mode="user" lang="sv">
  <head>
  <base href='/langs/sv' />
  <!-- ga -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-DQVD9T27V4"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-DQVD9T27V4');
</script>

  <!-- deps -->
    <script type="module" src="/assets/js/turbo.es2017-esm.js" defer></script>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.fluid.classless.fuchsia.min.css"
    >

  <!-- langs -->
  <!--
    https://developers.google.com/search/docs/specialty/international/localized-versions#html
  -->
   <link rel="alternate" hreflang="en" href="/" />
   <link rel="alternate" hreflang="uk" href="https://drawohara.io/langs/uk" />
   <link rel="alternate" hreflang="sv" href="https://drawohara.io/langs/sv" />
   <link rel="alternate" hreflang="fr" href="https://drawohara.io/langs/fr" />
   <link rel="alternate" hreflang="es" href="https://drawohara.io/langs/es" />
   <link rel="alternate" hreflang="it" href="https://drawohara.io/langs/it" />

  <!-- defaults -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="color-scheme" content="light dark" />

  <!-- favicon -->
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">

  <!-- meta -->
    <title>Inget att se h√§r.</title>

<meta property="og:title" content="Inget att se h√§r."/>
<meta property="og:description" content="Forts√§tt." />
<meta property="og:image" content="https://drawohara.io/media/mick.jpg" />




  <meta property="og:image:type" content="image/jpeg" />

    <meta property="site:route" content=""/dojo4/archive/:id"">
    <meta property="site:params" content="{"ext":null,"id":"the-sekrets-gem"}">
    <meta property="site:path_info" content=""/the-sekrets-gem"">

    <style>
      /* anti pico */
      a {text-decoration: none !important; }

      /* anti turbo */
      html { transition: none !important; }
      .turbo-progress-bar { visibility: hidden; }

      /* anti progressive */
      html { margin: 1em; }
      img { display: block; text-align: center; }
    </style>

    <script>
      document.addEventListener("turbo:load", function() {
        const progressBar = document.querySelector('.turbo-progress-bar');
        if (progressBar) { progressBar.remove(); }
      });
    </script>
  </head>

  <body>
    <header>
      <a href="/home">@drawohara</a> &mdash;
<a href="mailto:i-love-this@drawohara.io?subject=/the-sekrets-gem">jag ‚ù§Ô∏è det h√§r!</a>
<small>
  <small>
    <small>
      <span title='drick mig'>&lt;&lt; klicka p√• mig üêõ ü´ñ üßö</a>
    </small>
  </small>
</small>
<hr>
<strong>/the-sekrets-gem</strong>
    </header>

    <main>
      <em>publicerad: 2016-01-29</em>
<br>
<br>
<div class="ro markdown">
  <p>(Det h√§r inl√§gget f√∂rekommer ursprungligen p√• Spike‚Äôs <a href="http://stuff-things.net/">Saker‚Ä¶ Och ting‚Ä¶ blogg</a>)</p>

<p>Jag skriver ibland om kryptering i Ruby, men p√• n√•got s√§tt har jag inte lyckats t√§cka Dojo‚Äôs egna <a href="https://github.com/ahoward">Ara‚Äôs</a> <a href="https://github.com/ahoward/sekrets">Sekrets</a> gem.</p>

<p>Sekrets tillhandah√•ller ett enkelt gr√§nssnitt f√∂r att skapa och hantera krypterade filer i Ruby. Dess orsak till vara √§r att g√∂ra det relativt sm√§rtfritt att lagra k√§nslig data, API-nycklar och s√• vidare, i Git-repoar och sedan komma √•t den data inifr√•n din Rails-app, b√•de i utveckling och produktion.  <!-- mer --> Som alla bra gem, beh√∂ver den bara l√§ggas till i din Gemfile:</p>

<div class="language-ruby highlighter-rouge"><code class='code' style='white-space:pre;'><div class='code-line code-line-1'><span style="color: #24292f;background-color: #f6f8fa">gem</span>&nbsp;<span style="color: #0a3069">'sekrets'</span>
</div></code></div>

<p>Och f√∂ljs upp med <code>bundle install</code>. Detta l√§gger till ett par <em>rake</em> uppgifter, b√∂rja med:</p>

<pre><code>rake sekrets:generate:key
</code></pre>

<p>Detta skapar en <code>.sekrets.key</code> fil i programmets rotkatalog. Den inneh√•ller ett slumpm√§ssigt genererat l√∂senord och √§r vad som kommer att till√•ta oss att automatiskt dekryptera den krypterade konfigurationsfilen. Om du arbetar med ett team kan du vill ers√§tta det l√∂senordet med n√•got som √§r l√§ttare att kommunicera, g√∂r det bara innan du k√∂r n√§sta steg.</p>

<p>Vi vill att den h√§r filen ska finnas i utveckling, och vara tillg√§nglig f√∂r v√•r distribution, men att l√§gga den i Git-repo skulle g√• emot syftet, s√• det h√§r steget l√§gger √§ven till <code>.sekrets.key</code> till din <code>.gitignore</code>.</p>

<p>F√∂r att upprepa, <code>.sekrets.key</code> b√∂r inte committas till din repo.</p>

<p>K√∂r sedan:</p>

<pre><code>rake sekrets:generate:config
</code></pre>

<p>Detta skapar <code>config/sekrets.yml.enc</code>, krypterad med nyckeln i <code>.sekrets.key</code> och st√§ller in <code>config/initializers/sekrets.rb</code>.</p>

<p><code>config/sekrets.yml.enc</code> √§r en krypterad YAML-fil. Det √§r h√§r du lagrar alla data du vill h√•lla hemlig:</p>

<div class="language-yaml highlighter-rouge"><code class='code' style='white-space:pre;'><div class='code-line code-line-1'><span style="color: #953800">---</span>
</div><div class='code-line code-line-2'><span style="color: #116329">api_key</span><span style="color: #24292f;background-color: #f6f8fa">:</span>&nbsp;<span style="color: #0550ae">42</span>
</div><div class='code-line code-line-3'><span style="color: #116329">aws</span><span style="color: #24292f;background-color: #f6f8fa">:</span>
</div><div class='code-line code-line-4'>&nbsp;&nbsp;<span style="color: #116329">access_key_id</span><span style="color: #24292f;background-color: #f6f8fa">:</span>&nbsp;<span style="color: #0a3069">XXXXXXXXXXXXXXXXXXXX</span>
</div><div class='code-line code-line-5'>&nbsp;&nbsp;<span style="color: #116329">secret_access_key</span><span style="color: #24292f;background-color: #f6f8fa">:</span>&nbsp;<span style="color: #0a3069">YYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYY</span>
</div><div class='code-line code-line-6'><span style="color: #116329">the_list_of_my_enemies</span><span style="color: #24292f;background-color: #f6f8fa">:</span>&nbsp;<span style="color: #24292f;background-color: #f6f8fa">[</span><span style="color: #0a3069">'</span><span style="color: #0a3069">Bob'</span><span style="color: #24292f;background-color: #f6f8fa">,</span><span style="color: #0a3069">'</span><span style="color: #0a3069">Kevin'</span><span style="color: #24292f;background-color: #f6f8fa">,</span><span style="color: #0a3069">'</span><span style="color: #0a3069">Stuart'</span><span style="color: #24292f;background-color: #f6f8fa">]</span>
</div><div class='code-line code-line-7'><span style="color: #116329">winter_is_coming</span><span style="color: #24292f;background-color: #f6f8fa">:</span>&nbsp;<span style="color: #0550ae">true</span>
</div></code></div>

<p>Du kan redigera filen med:</p>

<pre><code>sekrets edit config/sekrets.yml.enc
</code></pre>

<p>Eller visa den med:</p>

<pre><code>sekrets read config/sekrets.yml.enc
</code></pre>

<p>Initialiseringen st√§ller in en global konstant <code>SEKRETS</code>. Om <code>.sekrets.key</code> filen finns, fylls den med v√§rden fr√•n <code>config/sekrets.yml.enc</code>:</p>

<div class="language-ruby highlighter-rouge"><code class='code' style='white-space:pre;'><div class='code-line code-line-1'><span style="color: #953800">SEKRETS</span><span style="color: #24292f;background-color: #f6f8fa">[</span><span style="color: #0a3069">:aws</span><span style="color: #24292f;background-color: #f6f8fa">]</span>
</div><div class='code-line code-line-2'><span style="color: #0550ae">=&gt;</span>&nbsp;<span style="color: #24292f;background-color: #f6f8fa">{</span><span style="color: #0a3069">"access_key_id"</span><span style="color: #0550ae">=&gt;</span><span style="color: #0a3069">"XXXXXXXXXXXXXXXXXXXX"</span><span style="color: #24292f;background-color: #f6f8fa">,</span>
</div><div class='code-line code-line-3'>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #0a3069">"secret_access_key"</span><span style="color: #0550ae">=&gt;</span><span style="color: #0a3069">"YYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYY"</span><span style="color: #24292f;background-color: #f6f8fa">}</span>
</div></code></div>

<p>(SEKRETS √§r faktiskt en <a href="https://github.com/ahoward/map">Map</a>, en sorts smart Hash, s√• du kan √§ven f√• v√§rden genom metod <code>SEKRETS.aws</code> eller <code>SEKRETS.winter_is_coming?</code>)</p>

<p>Nu √§r all den k√§nsliga data din app beh√∂ver i repo och flyttar runt med den. Dock, om n√•gon f√•r √•tkomst till repo, utan nyckeln, har de fortfarande inget tillg√•ng till dina hemligheter. Allt du beh√∂ver g√∂ra n√§r du tar in en ny utvecklare √§r att f√• dem att l√§gga nyckeln i <code>.sekrets.key</code> filen p√• deras lokala maskin.</p>

<p>Det tar hand om utveckling, vad g√§ller produktion? Sekrets ger dig tv√• alternativ. F√∂rst, du kan st√§lla in <code>SEKRETS_KEY</code> i din webbservers milj√∂, p√• samma s√§tt som m√§nniskor vanligtvis g√∂r k√§nslig information tillg√§nglig utanf√∂r sin kodbas. Alternativt, om du anv√§nder Capistrano, kan du l√§gga till <code>require 'sekrets/capistrano'</code> till din <code>Capfile</code>. Det h√§r l√§gger till en uppgift som kopierar <code>.sekrets.key</code> till servern vid distribution.</p>

<p>Med b√•da metoderna, n√§r Appen startar, kommer Sekrets att hitta sin nyckel, dekryptera konfigurationsfilen och st√§lla in <code>SEKRETS</code> konstanten.</p>

<p>Det b√∂r vara uppenbart att dina sekrets, urs√§kt, hemligheter bara √§r s√• s√§kra som din server. N√•gon med √•tkomst till servern kan √•terst√§lla <code>SEKRETS_KEY</code> milj√∂variabeln eller <code>.sekrets.key</code> filen och anv√§nda den f√∂r att dekryptera sekrets.</p>

<p>Dock √§r detta inte annorlunda √§n den vanliga metoden att l√§gga k√§nsliga saker, som API-nycklar, i webbserversmilj√∂n och komma √•t dem via <code>ENV</code> i appen. Faktum √§r att att st√§lla in <code>SEKRETS_KEY</code> i milj√∂n √§r exakt samma metod.</p>

<p>Slutligen, om k√§nslig data finns p√• servern och i en form som kan n√•s av din mjukvara, √§r den bara s√• s√§ker som servern. Sekrets l√∂ser inte det problemet. Vad det g√∂r √§r att f√• den data under versionskontroll p√• ett s√§kert s√§tt och f√∂renkla delningen av den data mellan utvecklare. Och det √§r en stor vinst.</p>

</div>
    </main>

    <footer>
      <hr>
<a href="/goto" name="goto">&mdash;&gt; goto</a>
<blockquote>
<ul>
  <li>
    <a href="mailto:i-hate-this@drawohara.io?subject=/the-sekrets-gem">üò©, jag üñ§ ^det h√§r!<a>
  </li>
  <li>
    <a href="/now">/nu<a>
  </li>
  <li>
    <a href="/about">/om<a>
  </li>
  <li>
    <a href="/contact">/kontakt<a>
  </li>
</ul>
</blockquote>
<a href="/">&lt;&mdash; eject</a>
    </footer>
  </body>
</html>