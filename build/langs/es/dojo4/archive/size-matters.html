<html color-mode="user" lang="es">
  <head>
    <base href='/es' />
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-DQVD9T27V4"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-DQVD9T27V4');
    </script>

    <script type="module" src="/assets/js/turbo.es2017-esm.js" defer></script>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.fluid.classless.fuchsia.min.css"
    >

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="color-scheme" content="light dark" />

    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">

    <title>el tamaño importa</title>

    <meta property="og:title" content="el tamaño importa"/>
    <meta property="og:description" content="sigue adelante." />
    <meta property="og:image" content="https://drawohara.io/media/mick.jpg" />
    <meta property="og:image:type" content="image/jpeg" />
    <meta property="site:route" content="/dojo4/archive/:id">
    <meta property="site:params" content='{"ext":null,"id":"size-matters"}'>
    <meta property="site:path_info" content="/size-matters">

    <style>
      a {text-decoration: none !important; }
      html { transition: none !important; }
      .turbo-progress-bar { visibility: hidden; }
      html { margin: 1em; }
      img { display: block; text-align: center; }
    </style>

    <script>
      document.addEventListener("turbo:load", function() {
        const progressBar = document.querySelector('.turbo-progress-bar');
        if (progressBar) {
          progressBar.remove();
        }
      });
    </script>
  </head>

  <body>
    <header>
      <a href="/home">@drawohara</a>
      <hr>
    </header>

    <main>
      <div class="ro markdown">
        <p>Multiplexar qué imágenes enviar a qué dispositivos es un problema complejo.</p>

        <p>Algunas personas usan la detección de dispositivos (agentes de usuario) para determinar quién quiere imágenes grandes.<br />
        A veces se utilizan consultas de medios/ancho de pantalla como proxy.</p>

        <p>Ambas son malas opciones.</p>

        <p>Hoy en día, uno puede desear fácilmente que se muestren imágenes de alta resolución en una tablet con pantalla retina en wifi local. Con los enfoques "normales" de mejora de imágenes<br />
        algunos dispositivos, con buenas conexiones y una densidad de píxeles increíble, recibirán<br />
        imágenes de baja calidad.</p>

        <p>Una tablet en una conexión lenta en orientación horizontal podría tener una pantalla<br />
        con un umbral arbitrario (768px) y recibir imágenes masivas<br />
        diseñadas para máquinas de escritorio conectadas a banda ancha.</p>

        <p>El problema se agrava al considerar que la detección de dispositivos y/o el ancho de pantalla pueden<br />
        resultar fácilmente en el envío de una imagen pequeña a un dispositivo con una pantalla de alta densidad<br />
        que causa problemas reales de diseño: una imagen de 320px podría ocupar toda la pantalla en<br />
        algunos iPhones, mientras que en otros ocupará 1/2 de la pantalla o se estirará para llenar 640 y verse mal.</p>

        <p>¿Y si, en cambio, simplemente intentáramos entregar las imágenes de mayor calidad<br />
        a todos los dispositivos y proporcionáramos las de menor calidad si determinamos que esto es un<br />
        mal plan en tiempo de ejecución?</p>

        <p>El enfoque de jquery.bires es exactamente este.</p>

        <p>El contenido inicial llega con imágenes de baja calidad, haciendo que el tiempo de carga de la página<br />
        sea lo más rápido posible y dando al usuario el contenido completo. Después de que todas las<br />
        imágenes de baja calidad se hayan cargado, jquery.bires comienza a reemplazar imágenes de baja calidad<br />
        con imágenes de alta calidad <em>en serie</em>, cronometrando la velocidad de cada reemplazo. Si algún<br />
        reemplazo parece llevar demasiado tiempo, la mejora simplemente se detiene. Porque<br />
        jquery.bires carga las imágenes más grandes una a la vez, la interfaz de usuario permanece<br />
        receptiva a los clics y las interacciones del usuario.</p>

        <p>La clave aquí es que, con las pantallas móviles de alta densidad de hoy, es realmente<br />
        <em>el ancho de banda</em> y <em>no el tamaño de la pantalla</em> lo que debe determinar quién recibe imágenes de alta calidad.</p>

        <p>Este enfoque hace que la tablet elegante en wifi local obtenga la mejor<br />
        experiencia posible mientras, al mismo tiempo, mantiene las páginas vistas en un escritorio<br />
        conectado a través de una conexión 3G sin matar un plan de datos y cargando muy<br />
        lentamente.</p>

        <p>Lo mejor de todo es que, en lugar de gestionar listas de agentes de usuario, adivinar sobre varios<br />
        puntos de interrupción, etc., el código simplemente siempre usa la misma estrategia de intentar<br />
        hacer que las páginas se carguen rápidamente y se vuelvan lo mejor posible más tarde.</p>

        <p>refs:</p>

        <ul>
          <li>https://github.com/bjankord/Categorizr</li>
          <li>http://www.brettjankord.com/2013/01/10/active-development-on-categorizr-has-come-to-an-end/</li>
          <li>https://gist.github.com/paulirish/268257</li>
          <li>https://github.com/desandro/imagesloaded</li>
          <li>http://www.youtube.com/watch?v=Tj0lmwg27EY</li>
          <li>http://dojo4.com</li>
        </ul>

        <p>nota:</p>

        <ul>
          <li>jquery.bires <em>depende de</em> https://github.com/desandro/imagesloaded</li>
        </ul>

        <p>repo:</p>

        <ul>
          <li>https://github.com/ahoward/jquery.bires</li>
        </ul>

        <p><br /><br />
        uso:</p>

        <div class="language-html highlighter-rouge"><code class='code' style='white-space:pre;'><div class='code-line code-line-1'>
        </div><div class='code-line code-line-2'><span style="color: #116329">&lt;li&gt;</span>
        </div><div class='code-line code-line-3'>
        </div><div class='code-line code-line-4'>&nbsp;&nbsp;<span style="color: #116329">&lt;a</span>&nbsp;<span style="color: #116329">href=</span><span style="color: #0a3069">"#!scott-jurek"</span>&nbsp;<span style="color: #116329">title=</span><span style="color: #0a3069">"Scott Jurek"</span><span style="color: #116329">&gt;</span>
        </div><div class='code-line code-line-5'>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #116329">&lt;img</span>&nbsp;<span style="color: #116329">class=</span><span style="color: #0a3069">"bires"</span>&nbsp;
        </div><div class='code-line code-line-6'>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #116329">data-hires=</span><span style="color: #0a3069">"assets/banner.png"</span>
        </div><div class='code-line code-line-7'>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #116329">src=</span><span style="color: #0a3069">"assets/banner.png"</span>&nbsp;<span style="color: #116329">/&gt;</span>
        </div><div class='code-line code-line-8'>&nbsp;&nbsp;<span style="color: #116329">&lt;/a&gt;</span>
        </div><div class='code-line code-line-9'>&nbsp;&nbsp;
        </div><div class='code-line code-line-10'><span style="color: #116329">&lt;/li&gt;</span>
        </div><div class='code-line code-line-11'>
        </div><div class='code-line code-line-12'>
        </div><div class='code-line code-line-13'><span style="color: #116329">&lt;li&gt;</span>
        </div><div class='code-line code-line-14'>
        </div><div class='code-line code-line-15'>&nbsp;&nbsp;<span style="color: #116329">&lt;a</span>&nbsp;<span style="color: #116329">href=</span><span style="color: #0a3069">"#!robert-sinskey-vinyards"</span>&nbsp;<span style="color: #116329">name=</span><span style="color: #0a3069">"42"</span>&nbsp;<span style="color: #116329">title=</span><span style="color: #0a3069">"Robert Sinskey Vinyards"</span><span style="color: #116329">&gt;</span>
        </div><div class='code-line code-line-16'>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #116329">&lt;img</span>&nbsp;<span style="color: #116329">class=</span><span style="color: #0a3069">"bires"</span>&nbsp;
        </div><div class='code-line code-line-17'>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #116329">data-hires=</span><span style="color: #0a3069">"assets/banner.png"</span>
        </div><div class='code-line code-line-18'>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #116329">src=</span><span style="color: #0a3069">"assets/banner.png"</span>&nbsp;<span style="color: #116329">/&gt;</span>
        </div><div class='code-line code-line-19'>&nbsp;&nbsp;<span style="color: #116329">&lt;/a&gt;</span>
        </div><div class='code-line code-line-20'><span style="color: #116329">&lt;/li&gt;</span>
        </div><div class='code-line code-line-21'>
        </div><div class='code-line code-line-22'>
        </div></code></div>

        <p><br /></p>

        <div class="language-javascript highlighter-rouge"><code class='code' style='white-space:pre;'><div class='code-line code-line-1'>
        </div><div class='code-line code-line-2'>&nbsp;&nbsp;<span style="color: #8250df">jQuery</span><span style="color: #24292f;background-color: #f6f8fa">(</span><span style="color: #cf222e">function</span><span style="color: #24292f;background-color: #f6f8fa">(){</span>
        </div><div class='code-line code-line-3'>&nbsp;&nbsp;
        </div><div class='code-line code-line-4'>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #24292f;background-color: #f6f8fa">bires</span><span style="color: #24292f;background-color: #f6f8fa">.</span><span style="color: #8250df">download</span><span style="color: #24292f;background-color: #f6f8fa">({</span><span style="color: #0a3069">'</span><span style="color: #0a3069">selector</span><span style="color: #0a3069">'</span>&nbsp;<span style="color: #24292f;background-color: #f6f8fa">:</span>&nbsp;<span style="color: #0a3069">'</span><span style="color: #0a3069">img.bires</span><span style="color: #0a3069">'</span><span style="color: #24292f;background-color: #f6f8fa">});</span>
        </div><div class='code-line code-line-5'>&nbsp;&nbsp;
        </div><div class='code-line code-line-6'>&nbsp;&nbsp;<span style="color: #24292f;background-color: #f6f8fa">});</span>
        </div><div class='code-line code-line-7'>
        </div></code></div>

        <p><br /><br />
        fuente:</p>

        <div class="language-javascript highlighter-rouge"><code class='code' style='white-space:pre;'><div class='code-line code-line-1'>
        </div><div class='code-line code-line-2'><span style="color: #24292f;background-color: #f6f8fa">(</span><span style="color: #cf222e">function</span><span style="color: #24292f;background-color: #f6f8fa">(</span><span style="color: #24292f;background-color: #f6f8fa">namespace</span><span style="color: #24292f;background-color: #f6f8fa">){</span>
        </div><div class='code-line code-line-3'>
        </div><div class='code-line code-line-4'>
        </div><div class='code-line code-line-5'>&nbsp;&nbsp;<span style="color: #6e7781">// el objeto de descarga de imágenes de alta resolución</span>
        </div><div class='code-line code-line-6'>&nbsp;&nbsp;<span style="color: #6e7781">//</span>
        </div><div class='code-line code-line-7'>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #cf222e">var</span>&nbsp;<span style="color: #24292f;background-color: #f6f8fa">bires</span>&nbsp;<span style="color: #0550ae">=</span>&nbsp;<span style="color: #24292f;background-color: #f6f8fa">{};</span>
        </div><div class='code-line code-line-8'>
        </div><div class='code-line code-line-9'>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #24292f;background-color: #f6f8fa">bires</span><span style="color: #24292f;background-color: #f6f8fa">.</span><span style="color: #24292f;background-color: #f6f8fa">selector</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #0550ae">=</span>&nbsp;<span style="color: #0a3069">'</span><span style="color: #0a3069">img.bires</span><span style="color: #0a3069">'</span><span style="color: #24292f;background-color: #f6f8fa">;</span>
        </div><div class='code-line code-line-10'>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #24292f;background-color: #f6f8fa">bires</span><span style="color: #24292f;background-color: #f6f8fa">.</span><span style="color: #24292f;background-color: #f6f8fa">too_damn_slow</span>&nbsp;<span style="color: #0550ae">=</span>&nbsp;<span style="color: #0550ae">420</span><span style="color: #24292f;background-color: #f6f8fa">;</span>
        </div><div class='code-line code-line-11'>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #24292f;background-color: #f6f8fa">bires</span><span style="color: #24292f;background-color: #f6f8fa">.</span><span style="color: #24292f;background-color: #f6f8fa">debug</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #0550ae">=</span>&nbsp;<span style="color: #0550ae">false</span><span style="color: #24292f;background-color: #f6f8fa">;</span>
        </div><div class='code-line code-line-12'>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #24292f;background-color: #f6f8fa">bires</span><span style="color: #24292f;background-color: #f6f8fa">.</span><span style="color: #24292f;background-color: #f6f8fa">debug_delay</span>&nbsp;&nbsp;&nbsp;<span style="color: #0550ae">=</span>&nbsp;<span style="color: #0550ae">420</span><span style="color: #24292f;background-color: #f6f8fa">;</span>
        </div><div class='code-line code-line-13'>
        </div><div class='code-line code-line-14'>
        </div><div class='code-line code-line-15'>&nbsp;&nbsp;<span style="color: #6e7781">// clase y método de fábrica de descarga</span>
        </div><div class='code-line code-line-16'>&nbsp;&nbsp;<span style="color: #6e7781">//</span>
        </div><div class='code-line code-line-17'>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #24292f;background-color: #f6f8fa">bires</span><span style="color: #24292f;background-color: #f6f8fa">.</span><span style="color: #24292f;background-color: #f6f8fa">downloader</span>&nbsp;<span style="color: #0550ae">=</span>&nbsp;<span style="color: #cf222e">new</span>&nbsp;<span style="color: #953800">Function</span><span style="color: #24292f;background-color: #f6f8fa">();</span>
        </div><div class='code-line code-line-18'>
        </div><div class='code-line code-line-19'>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #24292f;background-color: #f6f8fa">bires</span><span style="color: #24292f;background-color: #f6f8fa">.</span><span style="color: #24292f;background-color: #f6f8fa">download</span>&nbsp;<span style="color: #0550ae">=</span>&nbsp;<span style="color: #cf222e">function</span><span style="color: #24292f;background-color: #f6f8fa">(){</span>
        </div><div class='code-line code-line-20'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #cf222e">var</span>&nbsp;<span style="color: #24292f;background-color: #f6f8fa">args</span>&nbsp;<span style="color: #0550ae">=</span>&nbsp;<span style="color: #953800">Array</span><span style="color: #24292f;background-color: #f6f8fa">.</span><span style="color: #24292f;background-color: #f6f8fa">prototype</span><span style="color: #24292f;background-color: #f6f8fa">.</span><span style="color: #24292f;background-color: #f6f8fa">slice</span><span style="color: #24292f;background-color: #f6f8fa">.</span><span style="color: #8250df">apply</span><span style="color: #24292f;background-color: #f6f8fa">(</span><span style="color: #24292f;background-color: #f6f8fa">arguments</span><span style="color: #24292f;background-color: #f6f8fa">);</span>
        </div><div class='code-line code-line-21'>
        </div><div class='code-line code-line-22'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #cf222e">var</span>&nbsp;<span style="color: #24292f;background-color: #f6f8fa">downloader</span>&nbsp;<span style="color: #0550ae">=</span>&nbsp;<span style="color: #cf222e">new</span>&nbsp;<span style="color: #24292f;background-color: #f6f8fa">bires</span><span style="color: #24292f;background-color: #f6f8fa">.</span><span style="color: #24292f;background-color: #f6f8fa">downloader</span><span style="color: #24292f;background-color: #f6f8fa">;</span>
        </div><div class='code-line code-line-23'>
        </div><div class='code-line code-line-24'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #24292f;background-color: #f6f8fa">downloader</span><span style="color: #24292f;background-color: #f6f8fa">.</span><span style="color: #24292f;background-color: #f6f8fa">initialize</span><span style="color: #24292f;background-color: #f6f8fa">.</span><span style="color: #8250df">apply</span><span style="color: #24292f;background-color: #f6f8fa">(</span><span style="color: #24292f;background-color: #f6f8fa">downloader</span><span style="color: #24292f;background-color: #f6f8fa">,</span>&nbsp;<span style="color: #24292f;background-color: #f6f8fa">args</span><span style="color: #24292f;background-color: #f6f8fa">);</span>
        </div><div class='code-line code-line-25'>
        </div><div class='code-line code-line-26'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #8250df">jQuery</span><span style="color: #24292f;background-color: #f6f8fa">(</span><span style="color: #cf222e">function</span><span style="color: #24292f;background-color: #f6f8fa">(){</span>
        </div><div class='code-line code-line-27'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #8250df">jQuery</span><span style="color: #24292f;background-color: #f6f8fa">(</span><span style="color: #0a3069">'</span><span style="color: #0a3069">body</span><span style="color: #0a3069">'</span><span style="color: #24292f;background-color: #f6f8fa">).</span><span style="color: #8250df">imagesLoaded</span><span