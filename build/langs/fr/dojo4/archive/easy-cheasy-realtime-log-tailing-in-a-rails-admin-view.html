<html color-mode="user" lang="fr">
  <head>
  <!-- ga -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-DQVD9T27V4"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-DQVD9T27V4');
</script>

  <!-- deps -->
    <script type="module" src="/assets/js/turbo.es2017-esm.js" defer></script>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.fluid.classless.fuchsia.min.css"
    >

  <!-- langs -->
  <!--
    https://developers.google.com/search/docs/specialty/international/localized-versions#html
  -->
   <link rel="alternate" hreflang="en" href="/" />
   <link rel="alternate" hreflang="uk" href="https://drawohara.io/langs/uk" />
   <link rel="alternate" hreflang="sv" href="https://drawohara.io/langs/sv" />
   <link rel="alternate" hreflang="fr" href="https://drawohara.io/langs/fr" />
   <link rel="alternate" hreflang="es" href="https://drawohara.io/langs/es" />
   <link rel="alternate" hreflang="it" href="https://drawohara.io/langs/it" />

  <!-- defaults -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="color-scheme" content="light dark" />

  <!-- favicon -->
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">

  <!-- meta -->
    <title>Rien à voir ici.</title>

<meta property="og:title" content="Rien à voir ici."/>
<meta property="og:description" content="Circulez." />
<meta property="og:image" content="https://drawohara.io/media/mick.jpg" />

  <meta property="og:image:type" content="image/jpeg" />

    <meta property="site:route" content=""/dojo4/archive/:id"">
    <meta property="site:params" content="{"ext":null,"id":"easy-cheasy-realtime-log-tailing-in-a-rails-admin-view"}">
    <meta property="site:path_info" content=""/easy-cheasy-realtime-log-tailing-in-a-rails-admin-view"">

    <style>
      /* anti pico */
      a {text-decoration: none !important; }

      /* anti turbo */
      html { transition: none !important; }
      .turbo-progress-bar { visibility: hidden; }

      /* anti progressive */
      html { margin: 1em; }
      img { display: block; text-align: center; }
    </style>

    <script>
      document.addEventListener("turbo:load", function() {
        const progressBar = document.querySelector('.turbo-progress-bar');
        if (progressBar) { progressBar.remove(); }
      });
    </script>
    <base href='/langs/fr' />
  </head>

  <body>
    <header>
      <a href="/home">@drawohara</a> &mdash;
<a href="mailto:j-adore-ca@drawohara.io?subject=/easy-cheasy-realtime-log-tailing-in-a-rails-admin-view">j'adore ça !</a>
<small>
  <small>
    <small>
      <span title='bois moi'>&lt;&lt; cliquez-moi 🐛 🫖 🧚</a>
    </small>
  </small>
</small>
<hr>
<strong>/easy-cheasy-realtime-log-tailing-in-a-rails-admin-view</strong>
    </header>

    <main>
      <em>publié le : 2012-03-07</em>
<br>
<br>
<div class="ro markdown">
  <p>Dans nos applications Rails, nous avons toujours une section '/su' ou 'super utilisateur'. Nous y déposons des choses comme des rapports dans ce backend. Récemment, j'ai eu besoin de permettre aux super utilisateurs de voir les logs en temps réel depuis le navigateur (pour aider au débogage des problèmes de pare-feu pour un serveur de licences que nous avons construit). J'ai envisagé de faire quelque chose de malin comme les websockets et puis je suis devenu sain d'esprit et j'ai décidé de faire la chose la plus simple qui pourrait fonctionner - rappelez-vous, c'est pour les super utilisateurs seulement, donc l'approche de sondage suivante est <em>juuuust parfaite</em>…<br />
<br /><br />
<br /></p>

<p>La première étape était de configurer une action et une vue qui pouvaient suivre un log, le montrer, et ensuite mettre à jour par ajax polling. La cerise sur le gâteau était d'ajouter une interface utilisateur élégante (aka <em>lien</em>) qui pouvait démarrer et arrêter le sondage<br />
<br /><br />
<br /></p>

<p>Voici la majorité du code pertinent<br />
<br /><br />
<br /></p>

<script src="https://gist.github.com/1994292.js?file=tail-f.rb"></script>

<p><br /><br />
<br /></p>

<p>La deuxième étape, montrée dans ce gist, était de calmer la fonction de logger récursif que j'ai ajoutée par inadvertance : aka - le sondage ajax lui-même a créé des tonnes de sorties de logger.<br />
<br /></p>

<p>Donc, voilà. Basique. Facile. k.i.s.s. suivi de logs pour les admins.<br />
<br /><br />
<br /></p>

</div>
    </main>

    <footer>
      <hr>
<a href="/goto" name="goto">&mdash;&gt; aller à</a>
<blockquote>
<ul>
  <li>
    <a href="mailto:j-deteste-ca@drawohara.io?subject=/easy-cheasy-realtime-log-tailing-in-a-rails-admin-view">😩, j'❤️ ^ça!<a>
  </li>
  <li>
    <a href="/now">/now<a>
  </li>
  <li>
    <a href="/about">/about<a>
  </li>
  <li>
    <a href="/contact">/contact<a>
  </li>
</ul>
</blockquote>
<a href="/">&lt;&mdash; éjecter</a>
    </footer>
  </body>
</html>