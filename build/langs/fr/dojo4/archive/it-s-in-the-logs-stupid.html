<html color-mode="user" lang="fr">
  <head>
  <base href='/fr' />
  <!-- ga -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-DQVD9T27V4"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-DQVD9T27V4');
</script>

  <!-- deps -->
    <script type="module" src="/assets/js/turbo.es2017-esm.js" defer></script>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.fluid.classless.fuchsia.min.css"
    >

  <!-- defaults -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="color-scheme" content="light dark" />

  <!-- favicon -->
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">

  <!-- meta -->
    <title>C'est dans les Logs, Idiot...</title>

<meta property="og:title" content="C'est dans les Logs, Idiot..."/>
<meta property="og:description" content="passez votre chemin." />
<meta property="og:image" content="https://drawohara.io/media/mick.jpg" />

  <meta property="og:image:type" content="image/jpeg" />

    <meta property="site:route" content=""/dojo4/archive/:id"">
    <meta property="site:params" content="{"ext":null,"id":"it-s-in-the-logs-stupid"}">
    <meta property="site:path_info" content=""/it-s-in-the-logs-stupid"">

    <style>
      /* anti pico */
      a {text-decoration: none !important; }

      /* anti turbo */
      html { transition: none !important; }
      .turbo-progress-bar { visibility: hidden; }

      /* anti progressive */
      html { margin: 1em; }
      img { display: block; text-align: center; }
    </style>

    <script>
      document.addEventListener("turbo:load", function() {
        const progressBar = document.querySelector('.turbo-progress-bar');
        if (progressBar) {
          progressBar.remove();
        }
      });
    </script>
  </head>

  <body>
    <header>
      <a href="/home">@drawohara</a>
<hr>
    </header>

    <main>
      <div class="ro markdown">
  <p>(Ce poste est initialement apparu sur le blog <a href="http://www.stuff-things.net/">Stuff… Et Choses…</a> de Spike)</p>

<p>Hier, j'ai été impliqué dans un exercice d'urgence autour du lancement d'un nouveau site Rails dans un délai très serré. Le site fonctionnait bien en développement/préproduction, mais l'index prenait plus de 10 secondes à se rendre en production.</p>

<p>Comme cela fonctionnait en dehors de la production, nous avons conclu que cela était lié à l'infrastructure d'hébergement. Nous avons vérifié Apache, Passenger, la charge du serveur, la configuration du réseau, et ainsi de suite. Rien.</p>

<p>Finalement, j'ai pensé à vérifier <code>log/production.log</code>, et c'était là:</p>

<pre><code>Processing by BlahController#index as */*
  Rendered blah/_carousel.html.erb (5795.2ms)
  Rendered blah/index.html.erb within layouts/site (5801.5ms)
</code></pre>

<p>Nous avons rapidement retracé cela à un traitement d'image qui n'était pas mis en cache. Cela n'apparaissait pas en dehors de la production car les actifs d'image étaient différents. Je ne vais pas vous ennuyer avec les détails.</p>

<p>Cependant, je vais <del>vous ennuyer</del> vous éclairer sur mon point. Lors du débogage d'un problème, commencez par les choses simples. Les journaux Rails ne sont pas très détaillés, mais ils fournissent plus qu'assez d'informations pour rapidement cibler les problèmes dans votre code.</p>

</div>
    </main>

    <footer>
      <hr>
<a href="/goto" name="goto">&mdash;&gt; goto</a>
<blockquote>
<ul>
  <li>
    <a href="/about">à propos<a>
  </li>
  <li>
    <a href="mailto:i-hate-this@drawohara.io?subject=/it-s-in-the-logs-stupid">i-hate-this<a>
  </li>
  <li>
    <a href="mailto:i-love-this@drawohara.io?subject=/it-s-in-the-logs-stupid">i-love-this<a>
  </li>
  <li>
    <a href="/contact">contact<a>
  </li>
</ul>
</blockquote>
<a href="/">&lt;&mdash; eject</a>
    </footer>
  </body>
</html>