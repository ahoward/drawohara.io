<html color-mode="user" lang="sv">
  <head>
  <!-- ga -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-DQVD9T27V4"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-DQVD9T27V4');
</script>

  <!-- deps -->
    <script type="module" src="/assets/js/turbo.es2017-esm.js" defer></script>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.fluid.classless.fuchsia.min.css"
    >

  <!-- langs -->
  <!--
    https://developers.google.com/search/docs/specialty/international/localized-versions#html
  -->
   <link rel="alternate" hreflang="en" href="/" />
   <link rel="alternate" hreflang="uk" href="https://drawohara.io/langs/uk" />
   <link rel="alternate" hreflang="sv" href="https://drawohara.io/langs/sv" />
   <link rel="alternate" hreflang="fr" href="https://drawohara.io/langs/fr" />
   <link rel="alternate" hreflang="es" href="https://drawohara.io/langs/es" />
   <link rel="alternate" hreflang="it" href="https://drawohara.io/langs/it" />

  <!-- defaults -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="color-scheme" content="light dark" />

  <!-- favicon -->
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">

  <!-- meta -->
    <title>Inget att se h칛r.</title>

<meta property="og:title" content="Inget att se h칛r."/>
<meta property="og:description" content="Forts칛tt." />
<meta property="og:image" content="https://drawohara.io/media/mick.jpg" />




  <meta property="og:image:type" content="image/jpeg" />

    <meta property="site:route" content=""/dojo4/archive/:id"">
    <meta property="site:params" content="{"ext":null,"id":"resque-best-practices"}">
    <meta property="site:path_info" content=""/resque-best-practices"">

  <base href='/langs/sv' />

    <style>
      /* anti pico */
      a {text-decoration: none !important; }

      /* anti turbo */
      html { transition: none !important; }
      .turbo-progress-bar { visibility: hidden; }

      /* anti progressive */
      html { margin: 1em; }
      img { display: block; text-align: center; }
    </style>

    <script>
      document.addEventListener("turbo:load", function() {
        const progressBar = document.querySelector('.turbo-progress-bar');
        if (progressBar) { progressBar.remove(); }
      });
    </script>
  </head>

  <body>
    <header>
      <a href="/home">@drawohara</a> &mdash;
<a href="mailto:i-love-this@drawohara.io?subject=/resque-best-practices">Jag 仇벒잺 det h칛r!</a>
<small>
  <small>
    <small>
      <span title='drick mig'>&lt;&lt; klicka p친 mig 游냍 游삈 游빀</a>
    </small>
  </small>
</small>
<hr>
<strong>/resque-best-practices</strong>
    </header>

    <main>
      <em>publicerad den: 2012-07-16</em>
<br>
<br>
<div class="ro markdown">

<h2 id="introduction">Introduktion</h2>

<p>Resque ( https://github.com/defunkt/resque ) 칛r ett mycket fint, robust och<br />
produktionsklart bakgrundsjobbsystem f칬r rails. Det l칛mnar dock mycket<br />
t칛nkande 친t utvecklaren f칬r att implementera b칛sta praxis f칬r att modellera dina jobb, hantera<br />
distributioner och hantera arbetsprocesser. F칬ljande 칛r en upps칛ttning b칛sta<br />
praxis f칬r att anv칛nda resque/redis som ditt bakgrundsjobbsystem.</p>

<h2 id="managing-the-background-processes">Hantera Bakgrundsprocesserna</h2>

<p>Resque har vissa funktioner f칬r att hantera bakgrundsprocesser, men de 칛r<br />
klumpiga och felaktiga. Vi anv칛nder det h칛r enkla wrapper-skriptet f칬r att hantera en enskild<br />
instans av bakgrundsjobbdaemonen:</p>

<p><br /><br />
<br /></p>

<script src="https://gist.github.com/3123756.js?file=jobs.rb"></script>

<p><br /><br />
<br /></p>

<h2 id="modeling-your-jobs">Modellera Dina Jobb</h2>

<p>En av de f칬rsta sakerna att g칬ra 칛r att best칛mma hur du ska modellera dina jobb. Resque<br />
g칬r det ganska enkelt att skicka in godtyckliga metoder p친 moduler, men vi f칬redrar<br />
att g칬ra n친got lite mer hygieniskt. S칛rskilt tycker vi om att ha id:n p친<br />
jobb, kunna s칬ka efter dem l칛tt och g칬ra dem 칬verdrivet h친llbara i<br />
ansiktet av system- eller processfel. Genom att enbart konsolidera all jobblogik<br />
i en enda modell som skuggar resque-jobbet 칛r detta helt m칬jligt. H칛r<br />
칛r v친r basjobbklass.</p>

<p><br /><br />
<br /></p>

<script src="https://gist.github.com/3123839.js?file=job.rb"></script>

<p><br /><br />
<br /></p>

<p>Som du sannolikt ser, g칬r denna klass (som l칛tt kan porteras till ActiveRecord) det m칬jligt att skicka in godtyckliga jobb,<br />
mailer eller annat, och varje jobb l칛mnar en b칬na i huvuddatabasen som binder<br />
den till resque/redis-posten. Det g칬r det extremt naturligt att arbeta med jobbobjekt - t.ex. att ha en pollingloop som kontrollerar statusen p친 ett visst jobb efter id, eller att snabbt f친 en r칛kning av hur m친nga jobb som har lyckats under den senaste veckan. Det h친ller 칛ven v친r resque-installation super vanilj - vi anv칛nder inga plugin - och g칬r det m칬jligt att byta ut ett annat bakgrundsprocesssystem p친 n친gra minuter.<br />
Det enda underh친ll den beh칬ver 칛r en periodisk uppgift f칬r att rensa jobbsamlingen/tabellen. Vi anv칛nder whenever( https://github.com/javan/whenever/ ) plus en rake<br />
uppgift f칬r att uppn친 detta:</p>

<p><br /><br />
<br /></p>

<script src="https://gist.github.com/3123860.js?file=jobs.rake"></script>

<p><br /><br />
<br /></p>

<script src="https://gist.github.com/3123860.js?file=schedule.rb"></script>

<p><br /><br />
<br /></p>

<h2 id="deployment">Distribution</h2>

<p>Slutligen m친ste din distribution h친lla ig친ng saker:</p>

<p><br /><br />
<br /></p>

<script src="https://gist.github.com/3123860.js?file=Capfile.rb"></script>

<p><br /></p>

</div>
    </main>

    <footer>
      <hr>
<a href="/goto" name="goto">&mdash;&gt; goto</a>
<blockquote>
<ul>
  <li>
    <a href="mailto:i-hate-this@drawohara.io?subject=/resque-best-practices">游땰, jag 游둯 ^det h칛r!<a>
  </li>
  <li>
    <a href="/now">/nu<a>
  </li>
  <li>
    <a href="/about">/om<a>
  </li>
  <li>
    <a href="/contact">/kontakt<a>
  </li>
</ul>
</blockquote>
<a href="/">&lt;&mdash; avbryt</a>
    </footer>
  </body>
</html>