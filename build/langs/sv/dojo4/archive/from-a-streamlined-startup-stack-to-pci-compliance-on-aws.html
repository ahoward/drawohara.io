<html color-mode="user" lang="sv">
  <head>
    <base href='/langs/sv' />
    <!-- ga -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-DQVD9T27V4"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-DQVD9T27V4');
    </script>

    <!-- deps -->
    <script type="module" src="/assets/js/turbo.es2017-esm.js" defer></script>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.fluid.classless.fuchsia.min.css"
    >

    <!-- langs -->
    <!--
      https://developers.google.com/search/docs/specialty/international/localized-versions#html
    -->
    <link rel="alternate" hreflang="en" href="/" />
    <link rel="alternate" hreflang="uk" href="https://drawohara.io/langs/uk" />
    <link rel="alternate" hreflang="sv" href="https://drawohara.io/langs/sv" />
    <link rel="alternate" hreflang="fr" href="https://drawohara.io/langs/fr" />
    <link rel="alternate" hreflang="es" href="https://drawohara.io/langs/es" />
    <link rel="alternate" hreflang="it" href="https://drawohara.io/langs/it" />

    <!-- defaults -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="color-scheme" content="light dark" />

    <!-- favicon -->
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">

    <!-- meta -->
    <title>Inget att se h√§r.</title>

    <meta property="og:title" content="Inget att se h√§r."/>
    <meta property="og:description" content="Forts√§tt." />
    <meta property="og:image" content="https://drawohara.io/media/mick.jpg" />

    <meta property="og:image:type" content="image/jpeg" />

    <meta property="site:route" content=""/dojo4/archive/:id"">
    <meta property="site:params" content="{"ext":null,"id":"from-a-streamlined-startup-stack-to-pci-compliance-on-aws"}">
    <meta property="site:path_info" content=""/from-a-streamlined-startup-stack-to-pci-compliance-on-aws"">

    <style>
      /* anti pico */
      a {text-decoration: none !important; }

      /* anti turbo */
      html { transition: none !important; }
      .turbo-progress-bar { visibility: hidden; }

      /* anti progressive */
      html { margin: 1em; }
      img { display: block; text-align: center; }
    </style>

    <script>
      document.addEventListener("turbo:load", function() {
        const progressBar = document.querySelector('.turbo-progress-bar');
        if (progressBar) { progressBar.remove(); }
      });
    </script>
  </head>

  <body>
    <header>
      <a href="/home">@drawohara</a> &mdash;
      <a href="mailto:i-love-this@drawohara.io?subject=/from-a-streamlined-startup-stack-to-pci-compliance-on-aws">Jag ‚ù§Ô∏è det h√§r!</a>
      <small>
        <small>
          <small>
            <span title='drick me'>&lt;&lt; klicka p√• mig üêõ ü´ñ üßö</a>
          </small>
        </small>
      </small>
      <hr>
      <strong>/from-a-streamlined-startup-stack-to-pci-compliance-on-aws</strong>
    </header>

    <main>
      <em>publicerad den: 2012-09-10</em>
      <br>
      <br>
      <div class="ro markdown">
        <h2 id="intro">Intro</h2>

        <p>N√§r jag arbetar med projekt p√• <a href="http://dojo4.com">Dojo4</a> √∂verraskas jag ofta av hur sm√• √∂kningar i tekniska komplexitet <a href="http://en.wikipedia.org/wiki/Combinatorial_explosion">f√∂rst√§rker</a> till betydande uppm√§rksamhets- och resurs√•tagande. D√§rf√∂r tenderar vi att f√∂redra en f√∂renklad v√§rd- och applikationsstack n√§r projekt initialt startar, vilket delar m√•nga funktioner som ofta ses i delade v√§rdtj√§nster. Detta inkluderar val som att v√§rda appen och databasen tillsammans, anv√§nda en enda distributionsanv√§ndare p√• v√§rdsystemet, och enkel <a href="http://uptimerobot.com">upp tid √∂vervakning</a>.</p>

        <p>Nyligen utvecklade v√•r l√•ngvariga kund, <a href="http://www.inspirecommerce.com/">Inspire Commerce</a>, en ny aff√§rsplan som kr√§ver att deras applikation uppfyller de strikta <a href="https://www.pcisecuritystandards.org/">Payment Card Industry</a> (PCI) Niv√• 1 s√§kerhetskraven f√∂r bearbetning, √∂verf√∂ring och lagring av kreditkortsinformation. M√•nga av s√§kerhetskraven som beskrivs i PCI <a href="https://www.pcisecuritystandards.org/security_standards/">Data Security Standard</a> (DSS) motiverar en betydande f√∂r√§ndring i t√§nkandet fr√•n den str√∂mlinjeformade fokuserade stacken ovan. Den h√§r posten kommer kortfatta n√•gra av dessa detaljer och redovisa v√•ra l√∂sningar.</p>

        <p>PCI DSS √§r uppdelat i 12 avsnitt som t√§cker allt fr√•n brandv√§ggskonfiguration till personalsekretesspolicyer. Jag kommer att g√• igenom n√•gra avsnitt som √§r relevanta f√∂r v√§rdstacken.</p>

        <h2 id="1-install-and-maintain-a-firewall-configuration-to-protect-cardholder-data">1. Installera och underh√•lla en brandv√§ggskonfiguration f√∂r att skydda kortinnehavardata</h2>

        <p>Det h√§r √§r en ganska detaljerad sektion av DSS som kr√§ver installation och konfiguration av <a href="http://en.wikipedia.org/wiki/Firewall_%28computing%29">brandv√§ggs</a>tj√§nster p√• alla n√§tverksenheter, fr√•n arbetsstationer, till routrar, till servrar. Med <a href="http://aws.amazon.com/">Amazon Web Services</a> (AWS) <a href="http://aws.amazon.com/ec2/">Elastic Compute Cloud</a> (EC2) som grunden f√∂r v√•r v√§rdstack, abstraheras m√•nga av dessa n√§tverksenheter bort fr√•n v√•r syn eller kontroll. Lyckligtvis √§r <a href="http://aws.amazon.com/security/#certifications">AWS sj√§lv PCI Niv√• 1-kompatibel</a> och l√§mna m√•nga av dessa detaljer till ingenj√∂rerna p√• Amazon.</p>

        <p>Dock kr√§ver brandv√§ggar f√∂r EC2-noderna n√•gon √∂verv√§gande. EC2-noderna skyddas av en brandv√§gg som implementeras p√• <a href="www.xen.org/products/xenhyp.html">hypervisor</a>-niv√•n och konfigureras av AWS <a href="http://docs.amazonwebservices.com/AWSEC2/latest/UserGuide/using-network-security.html">S√§kerhetsgrupper</a>. V√•r grundl√§ggande s√§kerhetsgrupp har alla portar som nekar paket med undantag f√∂r 22, 80 och 443 som accepterar fr√•n alla k√§llor. Vi k√∂r <a href="www.ubuntu.com/">Ubuntu Linux</a> p√• v√•ra noder och ur l√•dan har vi <a href="www.netfilter.org/projects/iptables/">IP Tables</a> brandv√§gg konfigurerad med en √∂ppen princip.</p>

        <p>PCI DSS fokuserar p√• att anv√§nda brandv√§ggar f√∂r att skapa s√§kra privata n√§tverk, eller <a href="http://en.wikipedia.org/wiki/DMZ_%28computing%29">Demilitarized Zones</a> (DMZ) f√∂r system som v√§rdar appar som bearbetar betalkortdata. AWS S√§kerhetsgrupper erbjuder ett anv√§ndbart s√§tt att skapa s√§kra privata n√§tverk mellan olika komponenter i applikationsstacken. Till exempel genom att skapa en WEB-s√§kerhetsgrupp och en DB-s√§kerhetsgrupp, och √∂ppna databasporten i DB-s√§kerhetsgruppen endast f√∂r WEB-s√§kerhetsgruppk√§llor, kommer EC2-hypervisorbrandv√§ggen som k√∂rs p√• en databasserver endast att till√•ta √•tkomst till databasen fr√•n webbservrar som ansluter p√• det interna privata n√§tverksgr√§nssnittet.</p>

        <p>F√∂r redundans, speglar vi AWS S√§kerhetsgruppkonfigurationen f√∂r EC2-hypervisorbrandv√§ggen med <a href="http://www.cloudpassage.com/">CloudPassage</a>-tj√§nsten som kan hantera IP Tables-brandv√§ggen p√• operativsystemsniv√•n f√∂r system som v√§rdar komponenter av kortbearbetningsprogrammet. CloudPassage organiserar brandv√§ggsprinciper i <a href="http://www.cloudpassage.com/features/halo-firewall.html">Servergrupper</a> som √§r n√•got analogt med AWS S√§kerhetsgrupper. En annan bra funktion hos CloudPassage √§r <a href="http://www.cloudpassage.com/features/multifactor-authentication.html">GhostPorts</a>-tj√§nsten. Vi konfigurerar SSH-portprincipen i CloudPassage f√∂r att acceptera anslutningar fr√•n GhostPort-k√§llor. F√∂r att en klientdator ska bli en GhostPort-k√§lla, m√•ste en anv√§ndare p√• den datorn autentisera sig till CloudPassage-portalen, vara beh√∂rig att √∂ppna GhostPorts f√∂r en servergrupp, och autentisera med en registrerad Yubikey-dongel, eller svara p√• en SMS-utmaning med en registrerad mobiltelefon. Vid framg√•ngsrik autentisering och auktorisering konfigurerar CloudPassage IP Tables f√∂r att acceptera anslutningar fr√•n klientdatorns k√§ll-IP. Detta √§r ett bekv√§mt, s√§kert, tillf√§lligt och granskbart s√§tt att hantera √•tkomst till k√§nsliga v√§rdar.</p>

        <h2 id="2-do-not-use-vendor-supplied-defaults-for-system-passwords-and-other-security-parameters">2. Anv√§nd inte leverant√∂rstillhandah√•llna standardv√§rden f√∂r systeml√∂senord och andra s√§kerhetsparametrar</h2>

        <p>Det h√§r avsnittet skulle verka vara ganska uppenbart. Ett bra exempel p√• vikten av att √§ndra leverant√∂rstillhandah√•llna standardl√∂senord √§r <a href="http://www.splunk.com/">Splunk</a> <a href="http://docs.splunk.com/Documentation/Splunk/latest/Deploy/Introducingtheuniversalforwarder">Universal Forwarder</a> standardl√∂senordet changeme.</p>

        <p>Dock g√∂ms en viktig v√§rdkrav i det h√§r avsnittet som √§r n√•got orelaterat till avsnittets titel. ‚Äú2.2.1 Implementera endast en prim√§r funktion per server f√∂r att f√∂rhindra funktioner som kr√§ver olika s√§kerhetsniv√•er fr√•n att samsas p√• samma server. (Till exempel ska webbservrar, databasservrar och DNS implementeras p√• separata servrar)‚Äù.</p>

        <p>Som n√§mnts ovan, g√∂r AWS-s√§kerhetsgrupper uppgiften att s√§kert separera tj√§nster som webb- och databasservrar p√• separata v√§rdar ganska enkelt.</p>

        <h2 id="5-use-and-regularly-update-anti-virus-software-or-programs">5. Anv√§nd och uppdatera regelbundet antivirusprogramvara eller program</h2>

        <p><a href="http://clamav.com">ClamAV</a> g√∂r snabbt klart det h√§r kravet p√• Ubuntu Linux.</p>

        <h2 id="8-assign-a-unique-id-to-each-person-with-computer-access">8. Tilldela ett unikt ID till varje person med datortillg√•ng</h2>

        <p>Syftet med det h√§r avsnittet √§r att underl√§tta granskbarhet och ansvarsg√§llande genom att ta bort delade anv√§ndarkonton. Eftersom vi anv√§nder en <a href="http://en.wikipedia.org/wiki/Ssh-keygen">nyckelbaserad</a> autentiseringsmekanism f√∂r <a href="http://en.wikipedia.org/wiki/Secure_Shell">s√§ker skal</a>√•tkomst, finns det tre prim√§ra oro f√∂r att veta vem som gjorde vad. F√∂rst √§r det n√∂dv√§ndigt att f√∂rhindra anv√§ndare fr√•n att kunna byta till ett annat anv√§ndarkonto med <a href="http://en.wikipedia.org/wiki/Su_%28Unix%29">su-kommandot</a>. Detta √•stadkomms enkelt genom att ta bort <a href="http://en.wikipedia.org/wiki/Filesystem_permissions#Traditional_Unix_permissions">k√∂rbeh√∂righeten</a> p√• su-bin√§rfilen och √§ndra <a href="http://aplawrence.com/Basics/understandingpam.html">/etc/pam.d</a> f√∂r att f√∂rhindra all su-auktorisering. Andra, se till att <a href="http://www.eng.cam.ac.uk/help/jpmg/ssh/authorized_keys_howto.html">authorized_keys</a>-filerna f√∂r alla anv√§ndarkonton endast inneh√•ller en enda post. Slutligen, se till att alla nycklar som anv√§nds f√∂r s√§ker skal√•tkomst √§r l√∂senordsskyddade och att en princip finns p√• plats f√∂r att f√∂rbjuda delning av nycklar mellan anv√§ndare.</p>

        <p>Nu kan <a href="http://www.cyberciti.biz/tips/linux-audit-files-to-see-who-made-changes-to-a-file.html">Linux Audit Daemon</a> (AuditD) anv√§ndas f√∂r att sp√•ra systemaktivitet till specifika anv√§ndare.</p>

        <h2 id="9-restrict-physical-access-to-cardholder-data">9. Begr√§nsa fysisk √•tkomst till kortinnehavardata</h2>

        <p>Titeln p√• det h√§r avsnittet √§r ganska sj√§lvf√∂rklarande. Grundl√§ggande sett t√§cker det h√§r avsnittet √§mnen som begr√§nsar fysisk datacenter√•tkomst till auktoriserad personal. Liksom diskussionen om n√§tverksenhetsbrandv√§ggskonfiguration ovan, t√§cks det h√§r av AWS PCI Niv√• 1-certifiering och detaljerna kan l√§mnas till Amazon.</p>

        <h2 id="10-track-and-monitor-all-access-to-network-resources-and-cardholder-data">10. sp√•ra och √∂vervaka all √•tkomst till n√§tverksresurser och kortinnehavardata</h2>

        <p>Motivationen f√∂r det h√§r avsnittet √§r ‚Äúatt f√∂rhindra, uppt√§cka eller minimera effekten av en datakompromiss‚Äù. Detta innefattar √§mnen som loggning, filintegritetsmanagement och intr√•ngsdetektering. V√•r strategi b√∂rjar med att anv√§nda en loggningsservice f√∂r att st√∂dja aggregering av loggar, kvarh√•llning av loggar, samt s√∂kning av loggposter. Vi anv√§nder <a href="http://splunk.com">Splunk</a>-applikationen f√∂r den h√§r funktionaliteten. Vi st√§ller in en EC2-instans f√∂r en loggningsserver och installerade Splunk. Vi st√§llde in AWS S√§kerhetsgrupper och CloudPassage ServerGroups f√∂r den nya servern som har Splunk-lyssnarporten som accepterar anslutningar fr√•n webbserver- och db-serverk√§llor p√• det privata n√§tverksgr√§nssnittet. N√§sta st√§ller vi in Splunk Universal Forwarder p√• webb- och db-servrar och konfigurerade forwardrarna att √∂vervaka applikation, apache, mongodb, sys, audit och auth-loggar.</p>

        <p>F√∂r filintegritets√∂vervakning och intr√•ngsdetektering installerade vi <a href="http://www.ossec.net/?page_id=165">OSSEC</a>-applikationen p√• alla v√•ra servrar och lade till alla loggar som OSSEC skriver till Splunk-forwardrarna.</p>

      </div>
    </main>

    <footer>
      <hr>
      <a href="/goto" name="goto">&mdash;&gt; g√• till</a>
      <blockquote>
        <ul>
          <li>
            <a href="mailto:i-hate-this@drawohara.io?subject=/from-a-streamlined-startup-stack-to-pci-compliance-on-aws">üò©, jag üñ§ ^det h√§r!<a>
          </li>
          <li>
            <a href="/now">/nu<a>
          </li>
          <li>
            <a href="/about">/om<a>
          </li>
          <li>
            <a href="/contact">/kontakt<a>
          </li>
        </ul>
      </blockquote>
      <a href="/">&lt;&mdash; avbryt</a>
    </footer>
  </body>
</html>