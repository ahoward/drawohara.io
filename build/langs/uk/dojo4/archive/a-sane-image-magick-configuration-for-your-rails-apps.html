<html color-mode="user" lang="uk">
  <head>
    <base href='/langs/uk' />
  <!-- ga -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-DQVD9T27V4"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-DQVD9T27V4');
</script>

  <!-- deps -->
    <script type="module" src="/assets/js/turbo.es2017-esm.js" defer></script>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.fluid.classless.fuchsia.min.css"
    >

  <!-- langs -->
  <!--
    https://developers.google.com/search/docs/specialty/international/localized-versions#html
  -->
   <link rel="alternate" hreflang="en" href="/" />
   <link rel="alternate" hreflang="uk" href="https://drawohara.io/langs/uk" />
   <link rel="alternate" hreflang="sv" href="https://drawohara.io/langs/sv" />
   <link rel="alternate" hreflang="fr" href="https://drawohara.io/langs/fr" />
   <link rel="alternate" hreflang="es" href="https://drawohara.io/langs/es" />
   <link rel="alternate" hreflang="it" href="https://drawohara.io/langs/it" />

  <!-- defaults -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="color-scheme" content="light dark" />

  <!-- favicon -->
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">

  <!-- meta -->
    <title>—Ç—É—Ç –Ω—ñ—á–æ–≥–æ –Ω–µ–º–∞—î.</title>

<meta property="og:title" content="—Ç—É—Ç –Ω—ñ—á–æ–≥–æ –Ω–µ–º–∞—î."/>
<meta property="og:description" content="–ø–µ—Ä–µ—Ö–æ–¥—å—Ç–µ –¥–∞–ª—ñ." />
<meta property="og:image" content="https://drawohara.io/media/mick.jpg" />




  <meta property="og:image:type" content="image/jpeg" />

    <meta property="site:route" content=""/dojo4/archive/:id"">
    <meta property="site:params" content="{"ext":null,"id":"a-sane-image-magick-configuration-for-your-rails-apps"}">
    <meta property="site:path_info" content=""/a-sane-image-magick-configuration-for-your-rails-apps"">

    <style>
      /* anti pico */
      a {text-decoration: none !important; }

      /* anti turbo */
      html { transition: none !important; }
      .turbo-progress-bar { visibility: hidden; }

      /* anti progressive */
      html { margin: 1em; }
      img { display: block; text-align: center; }
    </style>

    <script>
      document.addEventListener("turbo:load", function() {
        const progressBar = document.querySelector('.turbo-progress-bar');
        if (progressBar) { progressBar.remove(); }
      });
    </script>
  </head>

  <body>
    <header>
      <a href="/home">@drawohara</a> &mdash;
<a href="mailto:i-love-this@drawohara.io?subject=/a-sane-image-magick-configuration-for-your-rails-apps">—è ‚ù§Ô∏è —Ü–µ!</a>
<small>
  <small>
    <small>
      <span title='–Ω–∞–ø–∏–π –º–µ–Ω–µ'>&lt;&lt; –Ω–∞—Ç–∏—Å–Ω–∏ –º–µ–Ω–µ üêõ ü´ñ üßö</a>
    </small>
  </small>
</small>
<hr>
<strong>/a-sane-image-magick-configuration-for-your-rails-apps</strong>
    </header>

    <main>
      <em>–æ–ø—É–±–ª—ñ–∫–æ–≤–∞–Ω–æ: 2013-03-19</em>
<br>
<br>
<div class="ro markdown">
  <p>—è —á–∞—Å—Ç–æ –∫–∞–∑–∞–≤, —â–æ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Ñ–∞–π–ª—ñ–≤ - —Ü–µ —Å–∞–º–æ–Ω–∞–≤'—è–∑–∞–Ω–∞ DOS-–∞—Ç–∞–∫–∞. –ó–≤–∏—á–∞–π–Ω–æ, –Ω–µ —Ç—Ä–µ–±–∞ –¥–∞–ª–µ–∫–æ —à—É–∫–∞—Ç–∏ –ø—Ä–∏–∫–ª–∞–¥–∏, –∫–æ–ª–∏, –∑–¥–∞–≤–∞–ª–æ—Å—è –±, –Ω–µ–≤–µ–ª–∏–∫–∞ —Ñ—É–Ω–∫—Ü—ñ—è –ø—Ä–æ–≥—Ä–∞–º–∏ —Å–ø—Ä–∏—á–∏–Ω—è—î —Ö–∞–æ—Å –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É: https://www.google.com/search?q=heroku+image+magick+timed+out</p>

<p>@dojo4 –º–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ –º–æ–∂–ª–∏–≤—ñ—Å—Ç—å Image Magick –≤—Å—Ç–∞–Ω–æ–≤–ª—é–≤–∞—Ç–∏ –æ–±–º–µ–∂–µ–Ω–Ω—è —á–µ—Ä–µ–∑ –∑–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞ —è–∫ –ø–µ—Ä—à–∏–π —Ä—ñ–≤–µ–Ω—å –∑–∞—Ö–∏—Å—Ç—É, —â–æ–± –ø—Ä–æ—Ü–µ—Å–∏ Magick –ø—Ä–∞—Ü—é–≤–∞–ª–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ.</p>

<p>—Å–ø–æ—á–∞—Ç–∫—É —Ç—Ä–æ—Ö–∏ –ø—ñ–¥–≥–æ—Ç–æ–≤–∫–∏/—ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó: –º–∏ —á–∞—Å—Ç–æ —Ä–æ–∑–≥–æ—Ä—Ç–∞—î–º–æ –ø–∞—Ä—É —Ñ–∞–π–ª—ñ–≤ RAILS_ROOT/env.yml —Ç–∞ RAILS_ROOT/env.rb, —è–∫—ñ –ø—Ä–æ–≥—Ä–∞–º–∞ Rails –∑–∞–≤–∞–Ω—Ç–∞–∂—É—î –ø—ñ–¥ —á–∞—Å –∑–∞–ø—É—Å–∫—É. –í–æ–Ω–∏ –Ω–µ –º—ñ—Å—Ç—è—Ç—å –∂–æ–¥–Ω–∏—Ö –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π Rails —ñ –º–æ–∂—É—Ç—å –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏—Å—è —É —Ñ–æ–Ω–æ–≤–∏—Ö —Å–∫—Ä–∏–ø—Ç–∞—Ö –¥–ª—è —à–≤–∏–¥–∫–æ–≥–æ —Ä–æ–∑—É–º—ñ–Ω–Ω—è –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó —Ä–æ–∑–≥–æ—Ä–Ω—É—Ç–æ–≥–æ –¥–æ–¥–∞—Ç–∫—É Rails –±–µ–∑ –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ—Å—Ç—ñ –∑–∞–≤–∞–Ω—Ç–∞–∂—É–≤–∞—Ç–∏ –≤–µ—Å—å –¥–æ–¥–∞—Ç–æ–∫ Rails.</p>

<p>–ø–µ—Ä—à–∏–π —Ñ–∞–π–ª - —Ü–µ –ø—Ä–æ—Å—Ç–∏–π —Ñ–∞–π–ª YAML –∑ –ø–∞—Ä–∞–º–∏ –∫–ª—é—á=–∑–Ω–∞—á–µ–Ω–Ω—è –∑–º—ñ–Ω–Ω–∏—Ö —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞.</p>

<div class="language-ruby highlighter-rouge"><code class='code' style='white-space:pre;'><div class='code-line code-line-1'>
</div><div class='code-line code-line-2'>
</div><div class='code-line code-line-3'><span style="color: #6e7781"># file: RAILS_ROOT/config/env.yml</span>
</div><div class='code-line code-line-4'>
</div><div class='code-line code-line-5'>
</div><div class='code-line code-line-6'><span style="color: #6e7781"># RAILS_ENV      : production</span>
</div><div class='code-line code-line-7'>
</div><div class='code-line code-line-8'><span style="color: #6e7781"># RAILS_STAGE : stage</span>
</div><div class='code-line code-line-9'>
</div><div class='code-line code-line-10'><span style="color: #6e7781"># APP_RUBY   : /usr/local/rbenv/versions/1.9.3-p0/bin/ruby</span>
</div><div class='code-line code-line-11'>
</div><div class='code-line code-line-12'><span style="color: #953800">APP_RUBY_VERSION</span>&nbsp;<span style="color: #24292f;background-color: #f6f8fa">:</span>&nbsp;<span style="color: #0550ae">1.9</span><span style="color: #0550ae">.</span><span style="color: #0550ae">3</span>
</div><div class='code-line code-line-13'>
</div><div class='code-line code-line-14'><span style="color: #6e7781"># APP_PORT   : 4201</span>
</div><div class='code-line code-line-15'>
</div><div class='code-line code-line-16'><span style="color: #6e7781"># APP_USER   : dojo4</span>
</div><div class='code-line code-line-17'>
</div><div class='code-line code-line-18'><span style="color: #6e7781"># APP_GROUP  : dojo4</span>
</div><div class='code-line code-line-19'>
</div><div class='code-line code-line-20'>
</div></code></div>

<p>–¥—Ä—É–≥–∏–π —Ñ–∞–π–ª –Ω–∞—Å–ø—Ä–∞–≤–¥—ñ —î —Ç–∏–º, —â–æ –∑–∞–≤–∞–Ω—Ç–∞–∂—É—î—Ç—å—Å—è. –í—ñ–Ω –∑–∞–≤–∞–Ω—Ç–∞–∂—É—î —Ü–µ–π —Ñ–∞–π–ª —ñ –¥–∏–Ω–∞–º—ñ—á–Ω–æ –≤—Å—Ç–∞–Ω–æ–≤–ª—é—î –¥–æ–¥–∞—Ç–∫–æ–≤—ñ –∑–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞</p>

<div class="language-ruby highlighter-rouge"><code class='code' style='white-space:pre;'><div class='code-line code-line-1'>
</div><div class='code-line code-line-2'><span style="color: #6e7781"># file: RAILS_ROOT/env.rb</span>
</div><div class='code-line code-line-3'><span style="color: #6e7781">#</span>
</div><div class='code-line code-line-4'><span style="color: #6e7781"># first, we fold in any environment settings found in </span>
</div><div class='code-line code-line-5'><span style="color: #6e7781">#</span>
</div><div class='code-line code-line-6'><span style="color: #6e7781">#   RAILS_ROOT/env.yml</span>
</div><div class='code-line code-line-7'><span style="color: #6e7781">#</span>
</div><div class='code-line code-line-8'><span style="color: #6e7781"># being careful not to clobber any manually set ENV vars. the env.yml file is</span>
</div><div class='code-line code-line-9'><span style="color: #6e7781"># normally created during a cap deployment.</span>
</div><div class='code-line code-line-10'><span style="color: #6e7781"># </span>
</div><div class='code-line code-line-11'>&nbsp;&nbsp;<span style="color: #953800">require</span>&nbsp;<span style="color: #0a3069">'erb'</span>
</div><div class='code-line code-line-12'>&nbsp;&nbsp;<span style="color: #953800">require</span>&nbsp;<span style="color: #0a3069">'yaml'</span>
</div><div class='code-line code-line-13'>&nbsp;&nbsp;<span style="color: #953800">require</span>&nbsp;<span style="color: #0a3069">'rbconfig'</span>
</div><div class='code-line code-line-14'>&nbsp;&nbsp;
</div><div class='code-line code-line-15'>&nbsp;&nbsp;<span style="color: #24292f;background-color: #f6f8fa">env_yml</span>&nbsp;<span style="color: #0550ae">=</span>&nbsp;<span style="color: #953800">File</span><span style="color: #24292f;background-color: #f6f8fa">.</span><span style="color: #8250df">expand_path</span><span style="color: #24292f;background-color: #f6f8fa">(</span><span style="color: #0a3069">'../env.yml'</span><span style="color: #24292f;background-color: #f6f8fa">,</span>&nbsp;<span style="color: #cf222e">__FILE__</span><span style="color: #24292f;background-color: #f6f8fa">)</span>
</div><div class='code-line code-line-16'>&nbsp;&nbsp;
</div><div class='code-line code-line-17'>&nbsp;&nbsp;<span style="color: #cf222e">if</span>&nbsp;<span style="color: #953800">test</span><span style="color: #24292f;background-color: #f6f8fa">(</span><span style="color: #0a3069">?s</span><span style="color: #24292f;background-color: #f6f8fa">,</span>&nbsp;<span style="color: #24292f;background-color: #f6f8fa">env_yml</span><span style="color: #24292f;background-color: #f6f8fa">)</span>
</div><div class='code-line code-line-18'>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #24292f;background-color: #f6f8fa">buf</span>&nbsp;<span style="color: #0550ae">=</span>&nbsp;<span style="color: #953800">IO</span><span style="color: #24292f;background-color: #f6f8fa">.</span><span style="color: #8250df">read</span><span style="color: #24292f;background-color: #f6f8fa">(</span><span style="color: #24292f;background-color: #f6f8fa">env_yml</span><span style="color: #24292f;background-color: #f6f8fa">)</span>
</div><div class='code-line code-line-19'>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #24292f;background-color: #f6f8fa">expanded</span>&nbsp;<span style="color: #0550ae">=</span>&nbsp;<span style="color: #953800">ERB</span><span style="color: #24292f;background-color: #f6f8fa">.</span><span style="color: #8250df">new</span><span style="color: #24292f;background-color: #f6f8fa">(</span><span style="color: #24292f;background-color: #f6f8fa">buf</span><span style="color: #24292f;background-color: #f6f8fa">).</span><span style="color: #8250df">result</span><span style="color: #24292f;background-color: #f6f8fa">(</span><span style="color: #953800">binding</span><span style="color: #24292f;background-color: #f6f8fa">)</span>
</div><div class='code-line code-line-20'>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #24292f;background-color: #f6f8fa">config</span>&nbsp;<span style="color: #0550ae">=</span>&nbsp;<span style="color: #953800">YAML</span><span style="color: #24292f;background-color: #f6f8fa">.</span><span style="color: #8250df">load</span><span style="color: #24292f;background-color: #f6f8fa">(</span><span style="color: #24292f;background-color: #f6f8fa">expanded</span><span style="color: #24292f;background-color: #f6f8fa">)</span>
</div><div class='code-line code-line-21'>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #24292f;background-color: #f6f8fa">config</span><span style="color: #24292f;background-color: #f6f8fa">.</span><span style="color: #8250df">each</span><span style="color: #24292f;background-color: #f6f8fa">{</span><span style="color: #0550ae">|</span><span style="color: #24292f;background-color: #f6f8fa">key</span><span style="color: #24292f;background-color: #f6f8fa">,</span>&nbsp;<span style="color: #24292f;background-color: #f6f8fa">val</span><span style="color: #0550ae">|</span>&nbsp;<span style="color: #953800">ENV</span><span style="color: #24292f;background-color: #f6f8fa">[</span><span style="color: #24292f;background-color: #f6f8fa">key</span><span style="color: #24292f;background-color: #f6f8fa">.</span><span style="color: #8250df">to_s</span><span style="color: #24292f;background-color: #f6f8fa">]</span>&nbsp;<span style="color: #0550ae">||=</span>&nbsp;<span style="color: #24292f;background-color: #f6f8fa">val</span><span style="color: #24292f;background-color: #f6f8fa">.</span><span style="color: #8250df">to_s</span><span style="color: #24292f;background-color: #f6f8fa">}</span>&nbsp;<span style="color: #cf222e">if</span>&nbsp;<span style="color: #24292f;background-color: #f6f8fa">config</span><span style="color: #24292f;background-color: #f6f8fa">.</span><span style="color: #8250df">is_a?</span><span style="color: #24292f;background-color: #f6f8fa">(</span><span style="color: #953800">Hash</span><span style="color: #24292f;background-color: #f6f8fa">)</span>
</div><div class='code-line code-line-22'>&nbsp;&nbsp;<span style="color: #cf222e">end</span>
</div><div class='code-line code-line-23'>
</div><div class='code-line code-line-24'>
</div></code></div>

<p>—Ç–µ, —â–æ –Ω–∞—Å —Ü—ñ–∫–∞–≤–∏—Ç—å —Ç—É—Ç, - —Ü–µ —Ä–æ–∑–¥—ñ–ª, –≤ —è–∫–æ–º—É –Ω–∞–ª–∞—à—Ç–æ–≤—É—î—Ç—å—Å—è —Å–µ—Ä–µ–¥–æ–≤–∏—â–µ ImageMagick.</p>

<p>–æ—Å—å –≤—ñ–Ω —É –≤—Å—ñ–π —Å–≤–æ—ó–π –∫—Ä–∞—Å—ñ - –∫–æ–º–µ–Ω—Ç–∞—Ä—ñ –ø–æ–≤–∏–Ω–Ω—ñ –Ω–∞–¥–∞—Ç–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç —ñ –ø–æ—è—Å–Ω–µ–Ω–Ω—è:</p>

<div class="language-ruby highlighter-rouge"><code class='code' style='white-space:pre;'><div class='code-line code-line-1'><span style="color: #6e7781"># ensure RAILS_* are set</span>
</div><div class='code-line code-line-2'><span style="color: #6e7781">#</span>
</div><div class='code-line code-line-3'>&nbsp;&nbsp;<span style="color: #953800">ENV</span><span style="color: #24292f;background-color: #f6f8fa">[</span><span style="color: #0a3069">'RAILS_ENV'</span><span style="color: #24292f;background-color: #f6f8fa">]</span>&nbsp;<span style="color: #0550ae">||=</span>&nbsp;<span style="color: #0a3069">'development'</span>
</div><div class='code-line code-line-4'>&nbsp;&nbsp;<span style="color: #953800">ENV</span><span style="color: #24292f;background-color: #f6f8fa">[</span><span style="color: #0a3069">'RAILS_ROOT'</span><span style="color: #24292f;background-color: #f6f8fa">]</span>&nbsp;<span style="color: #0550ae">||=</span>&nbsp;<span style="color: #953800">File</span><span style="color: #24292f;background-color: #f6f8fa">.</span><span style="color: #8250df">dirname</span><span style="color: #24292f;background-color: #f6f8fa">(</span><span style="color: #953800">File</span><span style="color: #24292f;background-color: #f6f8fa">.</span><span style="color: #8250df">dirname</span><span style="color: #24292f;background-color: #f6f8fa">(</span><span style="color: #cf222e">__FILE__</span><span style="color: #24292f;background-color: #f6f8fa">))</span>
</div><div class='code-line code-line-5'>
</div><div class='code-line code-line-6'><span style="color: #6e7781"># set Imagick Magick environment</span>
</div><div class='code-line code-line-7'><span style="color: #6e7781">#</span>
</div><div class='code-line code-line-8'><span style="color: #6e7781"># ref: http://www.imagemagick.org/script/resources.php</span>
</div><div class='code-line code-line-9'><span style="color: #6e7781">#</span>
</div><div class='code-line code-line-10'><span style="color: #6e7781"># use system "convert -list resource" in the console to view</span>
</div><div class='code-line code-line-11'><span style="color: #6e7781">#</span>
</div><div class='code-line code-line-12'><span style="color: #6e7781"># realize that these settings are *per-process* so multiple times the number</span>
</div><div class='code-line code-line-13'><span style="color: #6e7781"># of app servers you have running!</span>
</div><div class='code-line code-line-14'><span style="color: #6e7781">#</span>
</div><div class='code-line code-line-15'>&nbsp;&nbsp;<span style="color: #24292f;background-color: #f6f8fa">tmp</span>&nbsp;<span style="color: #0550ae">=</span>&nbsp;<span style="color: #953800">File</span><span style="color: #24292f;background-color: #f6f8fa">.</span><span style="color: #8250df">join</span><span style="color: #24292f;background-color: #f6f8fa">(</span><span style="color: #953800">ENV</span><span style="color: #24292f;background-color: #f6f8fa">[</span><span style="color: #0a3069">'RAILS_ROOT'</span><span style="color: #24292f;background-color: #f6f8fa">],</span>&nbsp;<span style="color: #0a3069">'tmp'</span><span style="color: #24292f;background-color: #f6f8fa">)</span>
</div><div class='code-line code-line-16'>
</div><div class='code-line code-line-17'><span style="color: #6e7781"># keep your temp files out of system space, which on AWS is part of the root</span>
</div><div class='code-line code-line-18'><span style="color: #6e7781"># volume!</span>
</div><div class='code-line code-line-19'><span style="color: #6e7781">#</span>
</div><div class='code-line code-line-20'>&nbsp;&nbsp;<span style="color: #953800">ENV</span><span style="color: #24292f;background-color: #f6f8fa">[</span><span style="color: #0a3069">'TMPDIR'</span><span style="color: #24292f;background-color: #f6f8fa">]</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #0550ae">=