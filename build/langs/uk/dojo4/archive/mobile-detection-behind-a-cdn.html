<html color-mode="user" lang="uk">
  <head>
  <!-- ga -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-DQVD9T27V4"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-DQVD9T27V4');
</script>

  <!-- deps -->
    <script type="module" src="/assets/js/turbo.es2017-esm.js" defer></script>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.fluid.classless.fuchsia.min.css"
    >

  <!-- langs -->
  <!--
    https://developers.google.com/search/docs/specialty/international/localized-versions#html
  -->
   <link rel="alternate" hreflang="en" href="/" />
   <link rel="alternate" hreflang="uk" href="/langs/uk" />
   <link rel="alternate" hreflang="sv" href="https://drawohara.io/langs/sv" />
   <link rel="alternate" hreflang="fr" href="https://drawohara.io/langs/fr" />
   <link rel="alternate" hreflang="es" href="https://drawohara.io/langs/es" />
   <link rel="alternate" hreflang="it" href="https://drawohara.io/langs/it" />

  <!-- defaults -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="color-scheme" content="light dark" />

  <!-- favicon -->
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">

  <!-- meta -->
    <title>—Ç—É—Ç –Ω—ñ—á–æ–≥–æ –Ω–µ–º–∞—î.</title>

<meta property="og:title" content="—Ç—É—Ç –Ω—ñ—á–æ–≥–æ –Ω–µ–º–∞—î."/>
<meta property="og:description" content="—Ä—É—Ö–∞–π—Ç–µ—Å—å –¥–∞–ª—ñ." />
<meta property="og:image" content="https://drawohara.io/media/mick.jpg" />




  <meta property="og:image:type" content="image/jpeg" />

    <meta property="site:route" content=""/dojo4/archive/:id"">
    <meta property="site:params" content="{"ext":null,"id":"mobile-detection-behind-a-cdn"}">
    <meta property="site:path_info" content=""/mobile-detection-behind-a-cdn"">

    <style>
      /* anti pico */
      a {text-decoration: none !important; }

      /* anti turbo */
      html { transition: none !important; }
      .turbo-progress-bar { visibility: hidden; }

      /* anti progressive */
      html { margin: 1em; }
      img { display: block; text-align: center; }
    </style>

    <script>
      document.addEventListener("turbo:load", function() {
        const progressBar = document.querySelector('.turbo-progress-bar');
        if (progressBar) { progressBar.remove(); }
      });
    </script>
    <base href='/langs/uk' />
  </head>

  <body>
    <header>
      <a href="/home">@drawohara</a> &mdash;
<a href="mailto:i-love-this@drawohara.io?subject=/mobile-detection-behind-a-cdn">—è ‚ù§Ô∏è —Ü–µ!</a>
<small>
  <small>
    <small>
      <span title='–Ω–∞–ø–∏–π –º–µ–Ω–µ'>&lt;&lt; –Ω–∞—Ç–∏—Å–Ω—ñ—Ç—å –º–µ–Ω–µ üêõ ü´ñ üßö</a>
    </small>
  </small>
</small>
<hr>
<strong>/mobile-detection-behind-a-cdn</strong>
    </header>

    <main>
      <em>–æ–ø—É–±–ª—ñ–∫–æ–≤–∞–Ω–æ: 2014-07-23</em>
<br>
<br>
<div class="ro markdown">
  <p>–£ –Ω–µ–¥–∞–≤–Ω—å–æ–º—É –ø—Ä–æ—î–∫—Ç—ñ –º–∏ –ø–æ–≤–∏–Ω–Ω—ñ –±—É–ª–∏ —Å—Ç–≤–æ—Ä–∏—Ç–∏ –º–æ–±—ñ–ª—å–Ω—É –≤–µ—Ä—Å—ñ—é —ñ—Å–Ω—É—é—á–æ–≥–æ –≤–µ–±—Å–∞–π—Ç—É. –Ü—Å–Ω—É—é—á–∏–π –≤–µ–±—Å–∞–π—Ç –Ω–µ –±—É–≤ —Ö–æ—Ä–æ—à–∏–º –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–º –¥–ª—è –∞–¥–∞–ø—Ç–∏–≤–Ω–æ–≥–æ –¥–∏–∑–∞–π–Ω—É, —Ç–æ–º—É –º–∏ –≤–∏—Ä—ñ—à–∏–ª–∏ —Å—Ç–≤–æ—Ä–∏—Ç–∏ –ø–æ–≤–Ω—ñ—Å—Ç—é –Ω–æ–≤—É –≤–µ—Ä—Å—ñ—é —Å–∞–π—Ç—É –¥–ª—è –º–æ–±—ñ–ª—å–Ω–∏—Ö –ø—Ä–∏—Å—Ç—Ä–æ—ó–≤.</p>

<p>
<img src="assets/b.jpeg" alt="5547851770_3598506559_z.jpg" /><br />
_(—Ñ–æ—Ç–æ –≤—ñ–¥ <a href="https://www.flickr.com/photos/johanl/5547851770/in/photolist-9sfc3J-63nmeT-3BAAy-dWUBhB-pAZUn-ccjB1w-st5Gc-7B2UEE-bbLNKX-8yTj9M-9e6jeJ-72jTj6-8RU8QS-5TNHyH-8FkSqy-5r7dgL-5A6ymJ-atHdpQ-7BbKMK-8P8X2-7bD7t6-2ViX1A-5E6qqL-6NDF76-9hBh7m-4bSRnn-sZomP-6VbEE-buapa2-5Kw5si-85KrwR-5kpSzg-bjEUUE-bV9J19-5GXRmg-6zbLPt-8yWpiA-akq64F-5n4ciA-9hmSj5-msHvhK-hZpPt-bFe25b-Bjwzo-mFYCVT-d3v8y-6wRQrs-f1p7uv-f8rrUJ-ebxiKS">Johan Larsson</a>)
</p>

<p>–°–ø–æ—á–∞—Ç–∫—É –º–∏ —Ä–æ–∑–≥–ª—è–¥–∞–ª–∏ –º–æ–∂–ª–∏–≤—ñ—Å—Ç—å –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —à–∞–±–ª–æ–Ω—É m.example.com, –¥–µ —Å–∞–π—Ç–∏ —î –ø–æ–≤–Ω—ñ—Å—Ç—é –æ–∫—Ä–µ–º–∏–º–∏ –¥–æ–º–µ–Ω–∞–º–∏. –û–¥–Ω–∞–∫ –æ—Å–∫—ñ–ª—å–∫–∏ –º–∏ –Ω–µ –∫–µ—Ä—É—î–º–æ —ñ–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–æ—é –¥–ª—è —Ü—å–æ–≥–æ —Å–∞–π—Ç—É, –º–∏ —Ö–æ—Ç—ñ–ª–∏ –æ–±—ñ–π—Ç–∏—Å—è –º–µ—Ç–æ–¥–æ–º, —è–∫–∏–π –ø–æ—Ç—Ä–µ–±—É–≤–∞–≤ –±–∏ —è–∫–æ–º–æ–≥–∞ –º–µ–Ω—à–µ –∑–º—ñ–Ω —ñ–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∏. –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ —ñ–Ω—à–æ–≥–æ –¥–æ–º–µ–Ω—É –Ω–∞ —Ç–∏—Ö –∂–µ —Å–µ—Ä–≤–µ—Ä–∞—Ö –Ω–µ —î –Ω–∞–¥—Ç–æ —Å–∫–ª–∞–¥–Ω–æ—é, –∞–ª–µ —Ü–µ —â–µ –æ–¥–Ω–∞ –∑–∞–¥–∞—á–∞, —è–∫—É –ª–µ–≥–∫–æ –º–æ–∂–Ω–∞ –∑—ñ–ø—Å—É–≤–∞—Ç–∏ —ñ —è–∫–∞ –Ω–µ —î –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ—é —É –Ω–∞—à–æ–º—É –≤–∏–ø–∞–¥–∫—É.</p>

<p>–Ø —Ç–∞–∫–æ–∂ –≤–∏–ø—É—Å—Ç–∏–≤ —Ü—é —Ç–µ—Ö–Ω—ñ–∫—É –¥–ª—è –ª–µ–≥–∫–æ–≥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —É –¥–æ–¥–∞—Ç–∫—É –Ω–∞ Rails —á–µ—Ä–µ–∑ –¥–≤–∏–≥—É–Ω Rails:</p>

<ul>
  <li>https://github.com/milesmatthias/cdddn</li>
  <li>http://rubygems.org/gems/cdddn</li>
</ul>

<h2 id="–≤—Å—Ç—É–ø-–¥–æ-cloudfront">–í—Å—Ç—É–ø –¥–æ CloudFront</h2>

<p>–û–¥–Ω—ñ—î—é –∑ –≤–µ–ª–∏–∫–∏—Ö –ø–µ—Ä–µ–≤–∞–≥ —Ü—å–æ–≥–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –≤–µ–±—Å–∞–π—Ç—É —î —Ç–µ, —â–æ –≤—ñ–Ω –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î <a href="http://aws.amazon.com/cloudfront/">CloudFront</a>. CloudFront ‚Äî —Ü–µ –º–µ—Ä–µ–∂–∞ –ø–æ—Å—Ç–∞—á–∞–Ω–Ω—è –∫–æ–Ω—Ç–µ–Ω—Ç—É (CDN), –¥–µ —Å—Ç–∞—Ç–∏—á–Ω—ñ –≤–µ–±—Å—Ç–æ—Ä—ñ–Ω–∫–∏ —Ä–æ–∑–º—ñ—â–µ–Ω—ñ –Ω–∞ <a href="http://aws.amazon.com/cloudfront/details/">52 –¥–∞—Ç–∞-—Ü–µ–Ω—Ç—Ä–∞—Ö –ø–æ –≤—Å—å–æ–º—É —Å–≤—ñ—Ç—É</a>. –¶–µ –¥–æ–∑–≤–æ–ª—è—î —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ –Ω–∞–¥—Å–∏–ª–∞—Ç–∏—Å—è –≤ –±—Ä–∞—É–∑–µ—Ä —è–∫–æ–º–æ–≥–∞ —à–≤–∏–¥—à–µ, –æ—Å–∫—ñ–ª—å–∫–∏ –Ω–µ–∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ —Ç–æ–≥–æ, –¥–µ –≤–∏ –∑–Ω–∞—Ö–æ–¥–∏—Ç–µ—Å—å —É —Å–≤—ñ—Ç—ñ, –≤–∏ –Ω–µ –±—É–¥–µ—Ç–µ –¥–∞–ª–µ–∫–æ –≤—ñ–¥ –æ–¥–Ω–æ–≥–æ –∑ –≤—É–∑–ª—ñ–≤ CloudFront, —Ç–æ–º—É –∑–∞–π–º–µ –º–µ–Ω—à–µ —á–∞—Å—É –¥–ª—è –¥–æ—Å—Ç–∞–≤–∫–∏ –≤–µ–±—Å–∞–π—Ç—É –Ω–∞ –≤–∞—à–µ –ø—Ä–∏—Å—Ç—Ä—ñ–π. CloudFront —î —á–∞—Å—Ç–∏–Ω–æ—é –ø—Ä–æ–ø–æ–∑–∏—Ü—ñ—ó AWS –≤—ñ–¥ Amazon —ñ, –∫—Ä—ñ–º –≥–∞—Ä–∞–Ω—Ç—ñ—ó —à–≤–∏–¥–∫–æ—Å—Ç—ñ, –≥–∞—Ä–∞–Ω—Ç—É—î —á–∞—Å –±–µ–∑–ø–µ—Ä–µ—Ä–≤–Ω–æ—ó —Ä–æ–±–æ—Ç–∏. (–ù–∞ –≤—ñ–¥–º—ñ–Ω—É –≤—ñ–¥ <a href="http://aws.amazon.com/s3/">S3</a>, –¥–µ –≥–∞—Ä–∞–Ω—Ç—É—î—Ç—å—Å—è –ª–∏—à–µ —á–∞—Å –±–µ–∑–ø–µ—Ä–µ—Ä–≤–Ω–æ—ó —Ä–æ–±–æ—Ç–∏.)</p>

<p>–ö–æ–ª–∏ –≤–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç–µ CloudFront, –≤–∏ –ø–æ–≤—ñ–¥–æ–º–ª—è—î—Ç–µ –π–æ–º—É, –¥–µ –∑–Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –≤–∞—à –≤–µ–±—Å–µ—Ä–≤–µ—Ä, —â–æ–± CloudFront –º—ñ–≥ –æ—Ç—Ä–∏–º–∞—Ç–∏ –æ—Å—Ç–∞–Ω–Ω—é –≤–µ—Ä—Å—ñ—é –≤–µ–±—Å—Ç–æ—Ä—ñ–Ω–æ–∫, —è–∫—ñ –≤—ñ–Ω –æ–±—Å–ª—É–≥–æ–≤—É—î –¥–ª—è –≤–∞—Å. CloudFront —Ç–∞–∫–æ–∂ –∑–∞–ø–∏—Ç—É—î –≤–∞—à –≤–µ–±—Å–µ—Ä–≤–µ—Ä –ø—Ä–æ –Ω–æ–≤—ñ –≤–µ—Ä—Å—ñ—ó –≤–∞—à–∏—Ö –≤–µ–±—Å—Ç–æ—Ä—ñ–Ω–æ–∫ –∫–æ–∂–Ω—ñ –∫—ñ–ª—å–∫–∞ —Ö–≤–∏–ª–∏–Ω –∞–±–æ —á–µ—Ä–µ–∑ –±—É–¥—å-—è–∫–∏–π –∫–æ–Ω—Ñ—ñ–≥—É—Ä–æ–≤–∞–Ω–∏–π –≤–∞–º–∏ —ñ–Ω—Ç–µ—Ä–≤–∞–ª —á–∞—Å—É –≤ –ø–∞–Ω–µ–ª—ñ –∫–µ—Ä—É–≤–∞–Ω–Ω—è CloudFront. –ó–∞–∑–≤–∏—á–∞–π —Ü–µ –±–ª–∏–∑—å–∫–æ 24 –≥–æ–¥–∏–Ω. –¶–µ –¥–æ–∑–≤–æ–ª—è—î CloudFront –∑–æ—Å–µ—Ä–µ–¥–∏—Ç–∏—Å—è –Ω–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—ñ —Ç–∞ —à–≤–∏–¥–∫–æ—Å—Ç—ñ, –∑–Ω–∞—á–Ω–æ –∑–º–µ–Ω—à—É—é—á–∏ –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –Ω–∞ –≤–∞—à –≤–µ–±—Å–µ—Ä–≤–µ—Ä. (–¶–µ —Ç–∞–∫–æ–∂ –∑–∞–π–º–∞—î —á–∞—Å –¥–ª—è CloudFront, —â–æ–± –≤–∑—è—Ç–∏ –Ω–æ–≤—É –≤–µ—Ä—Å—ñ—é —Å—Ç–æ—Ä—ñ–Ω–∫–∏ —Ç–∞ –æ–Ω–æ–≤–∏—Ç–∏ –≤—Å—ñ 52 –¥–∞—Ç–∞-—Ü–µ–Ω—Ç—Ä–∏.)</p>

<p>–û–¥–Ω–∞–∫ —Ü–µ –≤–∏–∫–ª–∏–∫–∞—î –ø—Ä–æ–±–ª–µ–º—É –≤—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è —Å—Ç–∞–Ω—É. –ù–∞–ø—Ä–∏–∫–ª–∞–¥, —è–∫—â–æ –≤–∞—à —Å–∞–π—Ç –ø–æ–≤–Ω—ñ—Å—Ç—é –æ–±—Å–ª—É–≥–æ–≤—É—î—Ç—å—Å—è CloudFront, —è–∫ –≤–∏ –ø—ñ–¥—Ç—Ä–∏–º—É—î—Ç–µ –≤—Ö—ñ–¥ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ –Ω–∞ –≤–∞—à —Å–∞–π—Ç? –Ø–∫—â–æ —è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –Ω–∞ —ñ–º'—è –ë–æ–± —ñ —Å—Ç–æ—Ä—ñ–Ω–∫–∞ –Ω–∞ <code>/my/account</code> –∫–∞–∂–µ "–ü—Ä–∏–≤—ñ—Ç, –ë–æ–±!", CloudFront –≤–≤–∞–∂–∞—Ç–∏–º–µ, —â–æ –≤—Å—ñ, —Ö—Ç–æ –∑–∞–ø–∏—Ç—É—î —Å—Ç–æ—Ä—ñ–Ω–∫—É –Ω–∞ <code>/my/account</code>, –ø–æ–≤–∏–Ω–Ω—ñ –±–∞—á–∏—Ç–∏ –≤–µ—Ä—Å—ñ—é —Å—Ç–æ—Ä—ñ–Ω–∫–∏, —è–∫–∞ –∫–∞–∂–µ "–ü—Ä–∏–≤—ñ—Ç, –ë–æ–±!". –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ (–∑–∞ –≤–∏–Ω—è—Ç–∫–æ–º, –º–æ–∂–ª–∏–≤–æ, –ª—é–¥–µ–π –Ω–∞ —ñ–º'—è –ë–æ–±‚Ä¶) –±—É–¥—É—Ç—å –¥—É–∂–µ –ø–ª—É—Ç–∞–Ω–∏–º–∏. –ù–µ —Ç—ñ–ª—å–∫–∏ —Ü–µ, –∞–ª–µ —â–æ, —è–∫—â–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –æ–Ω–æ–≤–ª—é—î —è–∫–µ—Å—å –∑–Ω–∞—á–µ–Ω–Ω—è –≤ —Å–≤–æ—î–º—É –æ–±–ª—ñ–∫–æ–≤–æ–º—É –∑–∞–ø–∏—Å—ñ —Ç–∞ –æ—á—ñ–∫—É—î, —â–æ —Ü—è –∑–º—ñ–Ω–∞ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—Ç–∏–º–µ—Ç—å—Å—è –º–∏—Ç—Ç—î–≤–æ? CloudFront –Ω–µ –æ—Ç—Ä–∏–º—É—î –Ω–æ–≤—É –≤–µ—Ä—Å—ñ—é —Å—Ç–æ—Ä—ñ–Ω–∫–∏ –Ω–∞ –∫–æ–∂–µ–Ω –∑–∞–ø–∏—Ç (—Ü–µ –± —Ç—Ä–æ—Ö–∏ –ø–æ—Ä—É—à–∏–ª–æ –± –º–µ—Ç—É CloudFront), –≤—ñ–Ω —á–µ–∫–∞—î –∫–æ–∂–Ω—ñ –∫—ñ–ª—å–∫–∞ —Ö–≤–∏–ª–∏–Ω, —â–æ–± –æ—Ç—Ä–∏–º–∞—Ç–∏ –Ω–æ–≤—É –≤–µ—Ä—Å—ñ—é. CloudFront —Ä–æ–∑–≤'—è–∑–∞–≤ –¥–µ—è–∫—ñ –∑ —Ü–∏—Ö –ø–∏—Ç–∞–Ω—å –∑–∞–≤–¥—è–∫–∏ <a href="http://aws.amazon.com/cloudfront/dynamic-content/">–Ω–æ–≤–∏–º —Ñ—É–Ω–∫—Ü—ñ—è–º</a>, –∞–ª–µ –≤–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–æ –±—É—Ç–∏ –æ–±—ñ–∑–Ω–∞–Ω–∏–º –ø—Ä–æ —Ü—ñ –Ω–∞—Å–ª—ñ–¥–∫–∏ –ø—Ä–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—ñ CloudFront.</p>

<p>–£ –Ω–∞—à–æ–º—É –≤–∏–ø–∞–¥–∫—É —Å–∞–π—Ç, –Ω–∞–¥ —è–∫–∏–º –º–∏ –ø—Ä–∞—Ü—é—î–º–æ, –Ω–µ –º–∞—î –ø–æ–Ω—è—Ç—Ç—è "–∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤", —ñ –Ω—ñ—Ö—Ç–æ –Ω–µ –º–æ–∂–µ —É–≤—ñ–π—Ç–∏ –¥–æ —Å–∏—Å—Ç–µ–º–∏. –û–¥–Ω–∞–∫ –º–∏ –≤—Å–µ –æ–¥–Ω–æ —Ö–æ—á–µ–º–æ, —â–æ–± CloudFront –ø–æ–∫–∞–∑—É–≤–∞–≤ —Ä—ñ–∑–Ω—ñ –≤–µ—Ä—Å—ñ—ó —Å–∞–π—Ç—É –≤ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ –≤—ñ–¥ –ø—Ä–∏—Å—Ç—Ä–æ—é, –∑ —è–∫–æ–≥–æ –≤–∏ –∑–∞–ø–∏—Ç—É—î—Ç–µ —Å–∞–π—Ç (–º–æ–±—ñ–ª—å–Ω–∏–π —á–∏ –Ω–∞—Å—Ç—ñ–ª—å–Ω–∏–π).</p>

<p>CloudFront –º–æ–∂–µ –≤–∏–∫–æ–Ω—É–≤–∞—Ç–∏ –≤–∏—è–≤–ª–µ–Ω–Ω—è –ø—Ä–∏—Å—Ç—Ä–æ—é –¥–ª—è –≤–∞—Å, –∞ –ø–æ—Ç—ñ–º –Ω–∞–¥—Å–∏–ª–∞—Ç–∏ —Å–ø–µ—Ü—ñ–∞–ª—å–Ω–∏–π –∑–∞–≥–æ–ª–æ–≤–æ–∫ –¥–æ –≤–∞—à–æ–≥–æ –≤–µ–±—Å–µ—Ä–≤–µ—Ä–∞, —â–æ–± —Å–∫–∞–∑–∞—Ç–∏ "–ù–∞–¥–∞–π –º–µ–Ω—ñ –≤–µ—Ä—Å—ñ—é —Å—Ç–æ—Ä—ñ–Ω–∫–∏ –¥–ª—è —Ç–µ–ª–µ—Ñ–æ–Ω—É", –æ–¥–Ω–∞–∫ –º–∏ —Ö–æ—Ç—ñ–ª–∏ –∫–æ–Ω—Ç—Ä–æ–ª—é–≤–∞—Ç–∏ –º–µ—Ç–æ–¥ –≤–∏—è–≤–ª–µ–Ω–Ω—è –ø—Ä–∏—Å—Ç—Ä–æ—é (–≤—ñ–¥–ø–æ–≤—ñ–¥—å –Ω–∞ –ø–∏—Ç–∞–Ω–Ω—è - —á–∏ —Ü–µ —Ç–µ–ª–µ—Ñ–æ–Ω —á–∏ –Ω–∞—Å—Ç—ñ–ª—å–Ω–∏–π –ø—Ä–∏—Å—Ç—Ä—ñ–π?) —ñ —Ö–æ—Ç—ñ–ª–∏ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ –¥–ª—è –∫—ñ–Ω—Ü–µ–≤–∏—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ —Ç–∞ —Ä–æ–∑—Ä–æ–±–Ω–∏–∫—ñ–≤ –æ–±–∏—Ä–∞—Ç–∏ –ø—Ä–∏—Å—Ç—Ä—ñ–π, –æ–±—Ä–∞–Ω–∏–π –¥–ª—è –Ω–∏—Ö. –ù–∞–ø—Ä–∏–∫–ª–∞–¥, –∫—ñ–Ω—Ü–µ–≤—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ –Ω–∞ –ø–ª–∞–Ω—à–µ—Ç–∞—Ö –º–æ–∂—É—Ç—å –ø—Ä–æ—Å—Ç–æ –∑–∞—Ö–æ—Ç—ñ—Ç–∏ –ø–æ–±–∞—á–∏—Ç–∏ –Ω–∞—Å—Ç—ñ–ª—å–Ω—É –≤–µ—Ä—Å—ñ—é, –Ω–∞–≤—ñ—Ç—å —è–∫—â–æ –º–∏ —Å–ø–æ—á–∞—Ç–∫—É –ø–æ–∫–∞–∑—É—î–º–æ —ó–º –º–æ–±—ñ–ª—å–Ω—É –≤–µ—Ä—Å—ñ—é. –ù–∞—à–∏–º —Ä–æ–∑—Ä–æ–±–Ω–∏–∫–∞–º —Ç–∞–∫–æ–∂ –±—É–¥–µ –≤–∞–∂–∫–æ –ø–µ—Ä–µ–º–∏–∫–∞—Ç–∏ —Å–≤–æ—ó –ø—Ä–∏—Å—Ç—Ä–æ—ó –∫–æ–∂–Ω–æ–≥–æ —Ä–∞–∑—É, –∫–æ–ª–∏ –≤–æ–Ω–∏ —Ö–æ—á—É—Ç—å –ø–µ—Ä–µ–º–∏–∫–∞—Ç–∏—Å—è –º—ñ–∂ –≤–µ—Ä—Å—ñ—è–º–∏ –ø—ñ–¥ —á–∞—Å –ø–æ–±—É–¥–æ–≤–∏ —Å–∞–π—Ç—É.</p>

<h2 id="–Ω–∞—à–µ-—Ä—ñ—à–µ–Ω–Ω—è">–ù–∞—à–µ —Ä—ñ—à–µ–Ω–Ω—è</h2>

<p>–û—Å—å –º–µ—Ç–æ–¥, —è–∫–∏–π –º–∏ –ø—Ä–∏–¥—É–º–∞–ª–∏ –¥–ª—è —Ç–æ–≥–æ, —â–æ–± —è–∫ –Ω–∞—Å—Ç—ñ–ª—å–Ω–∞, —Ç–∞–∫ —ñ –º–æ–±—ñ–ª—å–Ω–∞ –≤–µ—Ä—Å—ñ—ó —Å–∞–π—Ç—É –∑–Ω–∞—Ö–æ–¥–∏–ª–∏—Å—è –Ω–∞ –æ–¥–Ω–æ–º—É –¥–æ–º–µ–Ω—ñ —Ç–∞ –æ–±—Å–ª—É–≥–æ–≤—É–≤–∞–ª–∏—Å—è CloudFront. –û–¥–Ω–µ –æ–±–æ–≤'—è–∑–∫–æ–≤–µ –∑–∞—É–≤–∞–∂–µ–Ω–Ω—è –ø–æ–ª—è–≥–∞—î –≤ —Ç–æ–º—É, —â–æ CloudFront –∑–∞–∑–≤–∏—á–∞–π –≤—ñ–¥–∫–ª—é—á–∞—î –≤—Å—ñ —Ñ–∞–π–ª–∏ cookie –¥–ª—è –≤–∞—à–æ–≥–æ –¥–æ–º–µ–Ω—É, –∞–ª–µ –≤–∏ –º–æ–∂–µ—Ç–µ –Ω–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ –π–æ–≥–æ –¥–ª—è –¥–æ–∑–≤–æ–ª—É —Ñ–∞–π–ª—ñ–≤ cookie, —è–∫—ñ –≤–∏ –Ω–∞–∑–∏–≤–∞—î—Ç–µ. –£ –Ω–∞—à–æ–º—É –≤–∏–ø–∞–¥–∫—É –º–∏ —Å–∫–∞–∑–∞–ª–∏ CloudFront –¥–æ–∑–≤–æ–ª–∏—Ç–∏ —Ñ–∞–π–ª cookie –ø—ñ–¥ –Ω–∞–∑–≤–æ—é 'device'. –¢–∞–∫–æ–∂ –≤–∞—Ä—Ç–æ –≤—ñ–¥–∑–Ω–∞—á–∏—Ç–∏, —â–æ –º–∏ –∑–Ω–∞—Ö–æ–¥–∏–º–æ—Å—è –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç—ñ –¥–æ–¥–∞—Ç–∫—É Rails 4, –∞–ª–µ —Ü—é –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä—É –º–æ–∂–Ω–∞ –≤—ñ–¥—Ç–≤–æ—Ä–∏—Ç–∏ –≤ –±—É–¥—å-—è–∫–æ–º—É —Å—Ç–µ–∫—É. –û—Å–Ω–æ–≤–Ω–∞ –¥—É–º–∫–∞ —Ç—É—Ç –ø–æ–ª—è–≥–∞—î –≤ —Ç–æ–º—É, —â–æ –∫–ª—ñ—î–Ω—Ç –ø–æ–≤–∏–Ω–µ–Ω –≤–∏–∑–Ω–∞—á–∏—Ç–∏, –Ω–∞ —è–∫–æ–º—É –ø—Ä–∏—Å—Ç—Ä–æ—ó –∑–Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á, –¥–æ–∑–≤–æ–ª–∏—Ç–∏ —ó–º —Ü–µ –∑–º—ñ–Ω–∏—Ç–∏ —Ç–∞ —Ç—Ä–∏–º–∞—Ç–∏ —Å–µ—Ä–≤–µ—Ä –≤ –∫—É—Ä—Å—ñ —Ç–∏–ø—É –ø—Ä–∏—Å—Ç—Ä–æ—é, —â–æ–± —Å–µ—Ä–≤–µ—Ä –º—ñ–≥ –æ–±—Å–ª—É–≥–æ–≤—É–≤–∞—Ç–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ñ —Å—Ç–æ—Ä—ñ–Ω–∫–∏ (—Ü–µ –∑–¥—ñ–π—Å–Ω—é—î—Ç—å—Å—è –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é —Ñ–∞–π–ª—ñ–≤ cookie).</p>

<h3 id="–Ω–∞-–∫–æ–∂–Ω—ñ–π-—Å—Ç–æ—Ä—ñ–Ω—Ü—ñ-–º–∏-–ø–æ–≤–∏–Ω–Ω—ñ-—Ä–æ–±–∏—Ç–∏-—â–æ—Å—å-—Å—Ö–æ–∂–µ-–Ω–∞-—Ü–µ-—É—Ä–∏–≤–æ–∫-–∑-appviewslayoutapplicationhtmlerb">–ù–∞ –∫–æ–∂–Ω—ñ–π —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ –º–∏ –ø–æ–≤–∏–Ω–Ω—ñ —Ä–æ–±–∏—Ç–∏ —â–æ—Å—å —Å—Ö–æ–∂–µ –Ω–∞ —Ü–µ (—É—Ä–∏–≤–æ–∫ –∑ app/views/layout/application.html.erb)</h3>

<pre><code class="language-html+erb">&lt;%= javascript_include_tag "mobile_detection" %&gt;

&lt;script&gt;

  if (!window.location.href.match(/get_device|set_device/)){
    console.log('logging the window.location.href = ' + window.location.href);
    localStorage.setItem('referrer_href', window.location.href);
  }

  var device_cookie  = cookie.get('device'),
      cookiesEnabled = cookie.enabled();

  if (cookiesEnabled &amp;&amp; device_cookie == undefined) {
    window.location = '/get_device.html'
  }

&lt;/script&gt;
</code></pre>

<p>–í–∏—â–µ–≤–∫–∞–∑–∞–Ω–∏–π –∫–æ–¥ –ø—Ä–æ—Å—Ç–æ –∑–∞–ø–∞–º'—è—Ç–æ–≤—É—î, –Ω–∞ —è–∫—É —Å—Ç–æ—Ä—ñ–Ω–∫—É –≤–∏ –ø–æ—Ç—Ä–∞–ø–∏–ª–∏ (–∑–∞–∑–≤–∏—á–∞–π —Ü–µ –≥–æ–ª–æ–≤–Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∞, –∞–ª–µ –º–∏ —Ö–æ—á–µ–º–æ, —â–æ–± –∫–ª—ñ—î–Ω—Ç –º—ñ–≥ –¥—ñ–ª–∏—Ç–∏—Å—è –ø–æ—Å–∏–ª–∞–Ω–Ω—è–º–∏ —Ç–∞ —â–æ–± —Ü–µ –ø—Ä–∞—Ü—é–≤–∞–ª–æ —ñ –Ω–∞ –º–æ–±—ñ–ª—å–Ω–æ–º—É –ø—Ä–∏—Å—Ç—Ä–æ—ó), –∞ –ø–æ—Ç—ñ–º –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è—î –≤–∞—Å –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫—É <code>/get_device</code>, —â–æ–± –≤–∏—è–≤–∏—Ç–∏ –≤–∞—à –ø—Ä–∏—Å—Ç—Ä—ñ–π, —è–∫—â–æ –º–∏ —â–µ –Ω–µ –∑—Ä–æ–±–∏–ª–∏ —Ü–µ. –ó–≤–µ—Ä–Ω—ñ—Ç—å —É–≤–∞–≥—É –Ω–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è <code>localStorage</code>, —â–æ –æ–∑–Ω–∞—á–∞—î, —â–æ —Ü–µ –ø—Ä–∞—Ü—é–≤–∞—Ç–∏–º–µ –ª–∏—à–µ –≤ IE8+ —ñ –Ω–µ –ø—Ä–∞—Ü—é–≤–∞—Ç–∏–º–µ –≤ Opera Mini.</p>

<p>–¢–∞–∫–æ–∂ –∑–≤–µ—Ä–Ω—ñ—Ç—å —É–≤–∞–≥—É, —â–æ –≤–∏—â–µ–≤–∫–∞–∑–∞–Ω–∏–π —Ñ—Ä–∞–≥–º–µ–Ω—Ç —Ä–æ–∑–º—ñ—â–µ–Ω–∏–π —É <code>&lt;head&gt;</code> –º–∞–∫–µ—Ç—É, —â–æ–± –π–æ–≥–æ –≤–∏–∫–æ–Ω—É–≤–∞–ª–æ—Å—è —è–∫–æ–º–æ–≥–∞ —à–≤–∏–¥—à–µ —Ç–∞ –¥–æ —Ç–æ–≥–æ, —è–∫ –±—É–¥—É—Ç—å –∑–∞–ø—É—â–µ–Ω—ñ –±—É–¥—å-—è–∫—ñ —Å–∫—Ä–∏–ø—Ç–∏ –Ω–∞—Å—Ç—ñ–ª—å–Ω–æ—ó –≤–µ—Ä—Å—ñ—ó. –£ —Ü—å–æ–º—É –≤–∏–ø–∞–¥–∫—É –Ω–∞—Å—Ç—ñ–ª—å–Ω–∞ –≤–µ—Ä—Å—ñ—è –∞–∫—Ç–∏–≤–Ω–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î JavaScript –¥–ª—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –≤–µ–ª–∏–∫–æ—ó –∫—ñ–ª—å–∫–æ—Å—Ç—ñ –∫–æ–Ω—Ç–µ–Ω—Ç—É, —Ç–æ–º—É –º–∏ –¥—ñ–π—Å–Ω–æ –Ω–µ —Ö–æ—Ç—ñ–ª–∏, —â–æ–± –≤—Å–µ —Ü–µ –≤—ñ–¥–±—É–≤–∞–ª–æ—Å—è –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω—ñ, –ø–µ—Ä—à –Ω—ñ–∂ —Å–∞–π—Ç –≤–∏–∑–Ω–∞—á–∏–≤, —â–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –ø–æ–≤–∏–Ω–µ–Ω –±–∞—á–∏—Ç–∏ –º–æ–±—ñ–ª—å–Ω—É –≤–µ—Ä—Å—ñ—é —Å–∞–π—Ç—É.</p>

<h3 id="–Ω–∞-–∫–æ–∂–Ω—ñ–π-–º–æ–±—ñ–ª—å–Ω—ñ–π-—Å—Ç–æ—Ä—ñ–Ω—Ü—ñ-–º–∏-–ø–æ–≤–∏–Ω–Ω—ñ-—Ä–æ–±–∏—Ç–∏-—Ü–µ-–∑-appviewslayoutapplicationmobileerb">–ù–∞ –∫–æ–∂–Ω—ñ–π –º–æ–±—ñ–ª—å–Ω—ñ–π —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ –º–∏ –ø–æ–≤–∏–Ω–Ω—ñ —Ä–æ–±–∏—Ç–∏ —Ü–µ (–∑ `app/views/layout/application.mobile.erb):</h3>

<div class="language-js highlighter-rouge"><code class='code' style='white-space:pre;'><div class='code-line code-line-1'>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #0550ae">&lt;</span><span style="color: #24292f;background-color: #f6f8fa">script</span><span style="color: #0550ae">&gt;</span>
</div><div class='code-line code-line-2'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #cf222e">var</span>&nbsp;<span style="color: #24292f;background-color: #f6f8fa">device_cookie</span>&nbsp;&nbsp;<span style="color: #0550ae">=</span>&nbsp;<span style="color: #24292f;background-color: #f6f8fa">cookie</span><span style="color: #24292f;background-color: #f6f8fa">.</span><span style="color: #8250df">get</span><span style="color: #24292f;background-color: #f6f8fa">(</span><span style="color: #0a3069">'</span><span style="color: #0a3069">device</span><span style="color: #0a3069">'</span><span style="color: #24292f;background-color: #f6f8fa">),</span>
</div><div class='code-line code-line-3'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #24292f;background-color: #f6f8fa">cookiesEnabled</span>&nbsp;<span style="color: #0550ae">=</span>&nbsp;<span style="color: #24292f;background-color: #f6f8fa">cookie</span><span style="color: #24292f;background-color: #f6f8fa">.</span><span style="color: #8250df">enabled</span><span style="color: #24292f;background-color: #f6f8fa">();</span>
</div><div class='code-line code-line-4'>&nbsp;
</div><div class='code-line code-line-5'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #cf222e">if </span><span style="color: #24292f;background-color: #f6f8fa">(</span><span style="color: #24292f;background-color: #f6f8fa">cookiesEnabled</span>&nbsp;<span style="color: #0550ae">&amp;&amp;</span>&nbsp;<span style="color: #24292f;background-color: #f6f8fa">device_cookie</span>&nbsp;<span style="color: #0550ae">==</span>&nbsp;<span style="color: #0a3069">'</span><span style="color: #0a3069">desktop</span><span style="color: #0a3069">'</span><span style="color: #24292f;background-color: #f6f8fa">)</span>&nbsp;<span style="color: #24292f;background-color: #f6f8fa">{</span>
</div><div class='code-line code-line-6'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #953800">window</span><span style="color: #24292f;background-color: #f6f8fa">.</span><span style="color: #24292f;background-color: #f6f8fa">location</span><span style="color: #24292f;background-color: #f6f8fa">.</span><span style="color: #8250df">reload</span><span style="color: #24292f;background-color: #f6f8fa">(</span><span style="color: #0550ae">true</span><span style="color: #24292f;background-color: #f6f8fa">);</span>
</div><div class='code-line code-line-7'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #24292f;background-color: #f6f8fa">}</span>
</div><div class='code-line code-line-8'>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #0550ae">&lt;</span><span style="color: #116329">/script