{
  "data": {
    "dojo4/nicer-whenver-for-yer-railzer": {
      "author": "ara@dojo4.com",
      "title": "nicer whenver for yer railzer",
      "published_at": "2014-02-28 04:18:42 UTC",
      "body": "<div class=\"ro markdown\">\n  <p>whenever.rb is a nice DSL for configuring cron tasks in ruby ( <a href=\"https://github.com/javan/whenever\" target=\"_blank\">https://github.com/javan/whenever</a> )</p>\n\n<p>however, it has a major flaw: all the tasks it runs under cron use the <em>same unix priority</em>, and by ‘priority’ we mean <em>the one that takes yer boxen down</em></p>\n\n<p>fortunately, this is easy to fix</p>\n\n<p>step one, replace // configure the job templates in your ./config/schedule.rb file to look something like this</p>\n\n<div class=\"language-ruby highlighter-rouge\"><code class='code' style='white-space:pre;'><div class='code-line code-line-1'>\n</div><div class='code-line code-line-2'><span style=\"color: #6e7781\"># Learn more: http://github.com/javan/whenever</span>\n</div><div class='code-line code-line-3'>\n</div><div class='code-line code-line-4'><span style=\"color: #24292f;background-color: #f6f8fa\">job_type</span>&nbsp;<span style=\"color: #0a3069\">:rake</span><span style=\"color: #24292f;background-color: #f6f8fa\">,</span>&nbsp;<span style=\"color: #0a3069\">\"cd :path &amp;&amp; RAILS_ENV=:environment :environment_variable=:environment nice -n 19 bundle exec rake :task --silent :output\"</span>\n</div><div class='code-line code-line-5'>\n</div><div class='code-line code-line-6'><span style=\"color: #24292f;background-color: #f6f8fa\">job_type</span>&nbsp;<span style=\"color: #0a3069\">:runner</span><span style=\"color: #24292f;background-color: #f6f8fa\">,</span>&nbsp;<span style=\"color: #0a3069\">\"cd :path &amp;&amp; nice -n 19 ./bin/rails runner -e :environment ':task' :output\"</span>\n</div><div class='code-line code-line-7'>\n</div><div class='code-line code-line-8'>\n</div></code></div>\n\n<p>step two: <em>profit</em></p>\n\n<p>for those of you that don’t know what unix ‘nice’ is you might want to read <a href=\"http://en.wikipedia.org/wiki/Nice_(Unix)\" target=\"_blank\">http://en.wikipedia.org/wiki/Nice_(Unix)</a>.  TL;DR: it makes your background processes not eat all teh CPUz.</p>\n\n</div>\n",
      "assets": {},
      "_meta": {
        "identifier": "dojo4/nicer-whenver-for-yer-railzer",
        "type": "dojo4",
        "id": "nicer-whenver-for-yer-railzer",
        "urls": [
          "/ro/dojo4/nicer-whenver-for-yer-railzer/body.md"
        ],
        "created_at": "2025-05-06 08:47:14 +0000",
        "updated_at": "2025-05-06 08:47:14 +0000",
        "rel": {
          "curr": "dojo4/nicer-whenver-for-yer-railzer",
          "prev": "dojo4/within40feet-day-27",
          "next": "dojo4/within40feet-day-28"
        }
      }
    }
  },
  "_meta": {
    "url": "/ro",
    "type": "dojo4",
    "id": "nicer-whenver-for-yer-railzer"
  }
}